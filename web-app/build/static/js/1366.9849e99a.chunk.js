"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[1366],{31366:(e,l,t)=>{t.r(l),t.d(l,{default:()=>u});var a=t(9950),o=t(89132),n=t(31690),c=t(99491),i=t(49078),s=t(82817),r=t(98167),d=t(44414),p=null;const u=()=>{const[e,l]=(0,a.useState)(!1),[t,u]=(0,a.useState)(["cpu","mem","block","mutex","goroutines"]),b=e=>{let l=[];l=t.indexOf(e.target.value)>-1?t.filter(l=>l!==e.target.value):[...t,e.target.value],u(l)},m=(0,c.jL)();return(0,a.useEffect)(()=>{m((0,i.ph)("profile"))},[]),(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(s.A,{label:"Profile",actions:(0,d.jsx)(r.A,{})}),(0,d.jsx)(o.Mxu,{children:(0,d.jsxs)(o.Hbc,{children:[(0,d.jsxs)(o.azJ,{sx:{display:"flex",gap:10,"& div":{width:"initial"},"& .inputItem:not(:last-of-type)":{marginBottom:0}},children:[(0,d.jsx)(o.l1Y,{noMinWidth:!0,children:"Types to profile:"}),[{label:"cpu",value:"cpu"},{label:"mem",value:"mem"},{label:"block",value:"block"},{label:"mutex",value:"mutex"},{label:"goroutines",value:"goroutines"}].map(l=>(0,d.jsx)(o.Sc0,{checked:t.indexOf(l.value)>-1,disabled:e,id:"checkbox-".concat(l.label),label:l.label,name:"checkbox-".concat(l.label),onChange:b,value:l.value},"checkbox-".concat(l.label)))]}),(0,d.jsxs)(o.azJ,{sx:{display:"flex",justifyContent:"flex-end",marginTop:24,gap:10},children:[(0,d.jsx)(o.$nd,{id:"start-profiling",type:"submit",variant:"callAction",disabled:e||t.length<1,onClick:()=>{(()=>{const e=t.join(","),a=new URL(window.location.toString()),o=a.port,c=new URL(document.baseURI).pathname,i=(0,n.nw)(a.protocol);if(null!==(p=new WebSocket("".concat(i,"://").concat(a.hostname,":").concat(o).concat(c,"ws/profile?types=").concat(e))))p.onopen=()=>{l(!0),p.send("ok")},p.onmessage=e=>{let t=new Blob([e.data],{type:"application/zip"});l(!1);var a=document.createElement("a");a.href=window.URL.createObjectURL(t),a.download="profile.zip",document.body.appendChild(a),a.click(),document.body.removeChild(a)},p.onclose=()=>{console.log("connection closed by server"),l(!1)}})()},label:"Start Profiling"}),(0,d.jsx)(o.$nd,{id:"stop-profiling",type:"submit",variant:"callAction",color:"primary",disabled:!e,onClick:()=>{p.close(1e3),l(!1)},label:"Stop Profiling"})]})]})})]})}}}]);