"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[8231],{8231:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(9950),i=n(87946),a=n.n(i),s=n(89132),o=n(98341),l=n(70444),c=n(26843),d=n(93598),u=n(47304),x=n(28429),p=n(49078),h=n(99491),m=n(48965),y=n(49534),_=n(44414);const g=e=>{let{onCloseAndRefresh:t,deleteOpen:n,bucket:i,id:a}=e;const o=(0,h.jL)(),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c&&l.F.buckets.deleteBucketLifecycleRule(i,a).then(()=>{d(!1),t(!0)}).catch(e=>{d(!1),o((0,p.C9)((0,m.S)(e.error)))})},[c,i,a,t,o]);return(0,_.jsx)(y.A,{title:"Delete Lifecycle Rule",confirmText:"Delete",isOpen:n,isLoading:c,onConfirm:()=>{d(!0)},titleIcon:(0,_.jsx)(s.xWY,{}),onClose:()=>t(!1),confirmationContent:(0,_.jsxs)(r.Fragment,{children:["Are you sure you want to delete the ",(0,_.jsx)("strong",{children:a})," rule?"]})})};var j=n(89379),b=n(45246),f=n(32680),v=n(66147);const S=e=>{var t,n,i,o,c,d;let{closeModalAndRefresh:u,selectedBucket:x,lifecycleRule:y,open:g}=e;const S=(0,h.jL)(),[C,k]=(0,r.useState)(!0),[A,T]=(0,r.useState)(!1),[E,O]=(0,r.useState)(""),[F,I]=(0,r.useState)(!1),[L,V]=(0,r.useState)([]),[w,N]=(0,r.useState)(""),[R,D]=(0,r.useState)(""),[B,P]=(0,r.useState)(""),[M,z]=(0,r.useState)(!1),[G,U]=(0,r.useState)(!1),[Y,q]=(0,r.useState)("0"),[K,H]=(0,r.useState)("0"),[$,Z]=(0,r.useState)("expiry"),[J,W]=(0,r.useState)("0"),[Q,X]=(0,r.useState)("0"),[ee,te]=(0,r.useState)(!1),[ne,re]=(0,r.useState)(!1),[ie,ae]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C&&l.F.admin.tiersListNames().then(e=>{const t=a()(e.data,"items",[]);if(null!==t&&t.length>=1){const e=t.map(e=>({label:e,value:e}));var n;if(V(e),e.length>0)D((null===(n=y.transition)||void 0===n?void 0:n.storage_class)||"")}k(!1)}).catch(e=>{k(!1),S((0,p.Dy)((0,m.S)(e.error)))})},[S,C,null===(t=y.transition)||void 0===t?void 0:t.storage_class]),(0,r.useEffect)(()=>{let e=!0;"expiry"!==$&&("0"!==Q&&""===R||"0"!==K&&""===B)&&(e=!1),te(e)},[$,J,Q,R,K,B]),(0,r.useEffect)(()=>{var e,t;"Enabled"===y.status&&I(!0);let n=!1;var r,i,a,s,o,l;(y.transition&&(y.transition.days&&0!==y.transition.days&&(X(y.transition.days.toString()),Z("transition"),n=!0),y.transition.noncurrent_transition_days&&0!==y.transition.noncurrent_transition_days&&(H(y.transition.noncurrent_transition_days.toString()),Z("transition"),n=!0),y.transition.date&&"0001-01-01T00:00:00Z"!==y.transition.date&&(Z("transition"),n=!0)),y.expiration&&(y.expiration.days&&0!==y.expiration.days&&(W(y.expiration.days.toString()),Z("expiry"),n=!1),y.expiration.noncurrent_expiration_days&&0!==y.expiration.noncurrent_expiration_days&&(q(y.expiration.noncurrent_expiration_days.toString()),Z("expiry"),n=!1),y.expiration.date&&"0001-01-01T00:00:00Z"!==y.expiration.date&&(Z("expiry"),n=!1)),n)?(D((null===(r=y.transition)||void 0===r?void 0:r.storage_class)||""),H((null===(i=y.transition)||void 0===i||null===(a=i.noncurrent_transition_days)||void 0===a?void 0:a.toString())||"0"),P((null===(s=y.transition)||void 0===s?void 0:s.noncurrent_storage_class)||"")):q((null===(o=y.expiration)||void 0===o||null===(l=o.noncurrent_expiration_days)||void 0===l?void 0:l.toString())||"0");if(z(!(null===(e=y.expiration)||void 0===e||!e.delete_marker)),U(!(null===(t=y.expiration)||void 0===t||!t.delete_all)),N(y.prefix||""),y.tags){const e=y.tags.reduce((e,t,n)=>"".concat(e).concat(0!==n?"&":"").concat(t.key,"=").concat(t.value),"");O(e)}},[y]);let se="";return y.expiration&&(y.expiration.days>0?se="Current Version":y.expiration.noncurrent_expiration_days&&(se="Non-Current Version")),y.transition&&(y.transition.days>0?se="Current Version":y.transition.noncurrent_transition_days&&(se="Non-Current Version")),(0,_.jsx)(f.A,{onClose:()=>{u(!1)},modalOpen:g,title:"Edit Lifecycle Configuration",titleIcon:(0,_.jsx)(s.oVU,{}),children:C?(0,_.jsx)(s.aHM,{style:{width:16,height:16}}):(0,_.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{if(e.preventDefault(),!A&&(T(!0),null!==x&&null!==y)){let e={};if("expiry"===$){var t,n,r;let i={};null!==(t=y.expiration)&&void 0!==t&&t.days&&(null===(n=y.expiration)||void 0===n?void 0:n.days)>0&&(i.expiry_days=parseInt(J)),null!==(r=y.expiration)&&void 0!==r&&r.noncurrent_expiration_days&&(i.noncurrentversion_expiration_days=parseInt(Y)),e=(0,j.A)({},i)}else{var i,a,s;let t={};null!==(i=y.transition)&&void 0!==i&&i.days&&(null===(a=y.transition)||void 0===a?void 0:a.days)>0&&(t.transition_days=parseInt(Q),t.storage_class=R),null!==(s=y.transition)&&void 0!==s&&s.noncurrent_transition_days&&(t.noncurrentversion_transition_days=parseInt(K),t.noncurrentversion_transition_storage_class=B),e=(0,j.A)({},t)}const o=(0,j.A)({type:$,disable:!F,prefix:w,tags:E,expired_object_delete_marker:M,expired_object_delete_all:G},e);l.F.buckets.updateBucketLifecycle(x,y.id,o).then(e=>{T(!1),u(!0)}).catch(async e=>{T(!1);const t=await e.json();S((0,p.C9)((0,m.S)(t)))})}})(e)},children:(0,_.jsxs)(s.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,_.jsx)(s.dOG,{label:"Status",indicatorLabels:["Enabled","Disabled"],checked:F,value:"user_enabled",id:"rule_status",name:"rule_status",onChange:e=>{I(e.target.checked)}}),(0,_.jsx)(s.cl_,{id:"id",name:"id",label:"Id",value:y.id,onChange:()=>{},disabled:!0}),$?(0,_.jsx)(s.z6M,{currentValue:$,id:"rule_type",name:"rule_type",label:"Rule Type",selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}],onChange:()=>{},disableOptions:!0}):null,(0,_.jsx)(s.cl_,{id:"object-version",name:"object-version",label:"Object Version",value:se,onChange:()=>{},disabled:!0}),"expiry"===$&&(null===(n=y.expiration)||void 0===n?void 0:n.days)&&(0,_.jsx)(s.cl_,{type:"number",id:"expiry_days",name:"expiry_days",onChange:e=>{W(e.target.value)},label:"Expiry Days",value:J,min:"0"}),"expiry"===$&&(null===(i=y.expiration)||void 0===i?void 0:i.noncurrent_expiration_days)&&(0,_.jsx)(s.cl_,{type:"number",id:"noncurrentversion_expiration_days",name:"noncurrentversion_expiration_days",onChange:e=>{q(e.target.value)},label:"Non-current Expiration Days",value:Y,min:"0"}),"transition"===$&&(null===(o=y.transition)||void 0===o?void 0:o.days)&&(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(s.cl_,{type:"number",id:"transition_days",name:"transition_days",onChange:e=>{X(e.target.value)},label:"Transition Days",value:Q,min:"0"}),(0,_.jsx)(s.l6P,{label:"Tier",id:"storage_class",name:"storage_class",value:R,onChange:e=>{D(e)},options:L})]}),"transition"===$&&(null===(c=y.transition)||void 0===c?void 0:c.noncurrent_transition_days)&&(0,_.jsxs)(r.Fragment,{children:[(0,_.jsx)(s.cl_,{type:"number",id:"noncurrentversion_transition_days",name:"noncurrentversion_transition_days",onChange:e=>{H(e.target.value)},label:"Non-current Transition Days",value:K,min:"0"}),(0,_.jsx)(s.l6P,{label:"Non-current Version Transition Storage Class",id:"noncurrentversion_t_SC",name:"noncurrentversion_t_SC",value:B,onChange:e=>{P(e)},options:L})]}),(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsxs)(s.nD3,{title:"Filters",id:"lifecycle-filters",expanded:ie,onTitleClick:()=>ae(!ie),children:[(0,_.jsx)(s.cl_,{id:"prefix",name:"prefix",onChange:e=>{N(e.target.value)},label:"Prefix",value:w}),(0,_.jsx)(v.A,{name:"tags",label:"Tags",elements:E,onChange:e=>{O(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})]})}),"expiry"===$&&(null===(d=y.expiration)||void 0===d?void 0:d.noncurrent_expiration_days)&&(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsxs)(s.nD3,{title:"Advanced",id:"lifecycle-advanced-filters",expanded:ne,onTitleClick:()=>re(!ne),sx:{marginTop:15},children:[(0,_.jsx)(s.dOG,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:M,onChange:e=>{z(e.target.checked)},label:"Expired Object Delete Marker"}),(0,_.jsx)(s.dOG,{value:"expired_delete_all",id:"expired_delete_all",name:"expired_delete_all",checked:G,onChange:e=>{U(e.target.checked)},label:"Expired All Versions"})]})}),(0,_.jsxs)(s.xA9,{item:!0,xs:12,sx:b.Uz.modalButtonBar,children:[(0,_.jsx)(s.$nd,{id:"cancel",type:"button",variant:"regular",disabled:A,onClick:()=>{u(!1)},label:"Cancel"}),(0,_.jsx)(s.$nd,{id:"save",type:"submit",variant:"callAction",color:"primary",disabled:A||!ee,label:"Save"})]}),A&&(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsx)(s.z21,{})})]})})})};var C=n(58093);const k=e=>{let{open:t,closeModalAndRefresh:n,bucketName:i}=e;const c=(0,h.jL)(),u=(0,o.d4)(p.Rq),[x,y]=(0,r.useState)(!0),[g,S]=(0,r.useState)([]),[k,A]=(0,r.useState)(!1),[T,E]=(0,r.useState)(null),[O,F]=(0,r.useState)(""),[I,L]=(0,r.useState)(""),[V,w]=(0,r.useState)(""),[N,R]=(0,r.useState)("expiry"),[D,B]=(0,r.useState)("current"),[P,M]=(0,r.useState)(""),[z,G]=(0,r.useState)(!1),[U,Y]=(0,r.useState)(!1),[q,K]=(0,r.useState)(!1),[H,$]=(0,r.useState)(!0),[Z,J]=(0,r.useState)(!1),[W,Q]=(0,r.useState)(!1),[X,ee]=(0,r.useState)("days"),te={"& .MuiPaper-root":{padding:0}};(0,r.useEffect)(()=>{x&&l.F.admin.tiersListNames().then(e=>{const t=a()(e.data,"items",[]);if(null!==t&&t.length>=1){const e=t.map(e=>({label:e,value:e}));S(e),e.length>0&&w(e[0].value)}y(!1)}).catch(e=>{y(!1),c((0,p.Dy)((0,m.S)(e.error)))})},[c,x]),(0,r.useEffect)(()=>{let e=!0;"expiry"!==N&&""===V&&(e=!1),P&&0!==parseInt(P)||(e=!1),parseInt(P)>2147483647&&(e=!1),G(e)},[N,P,V]),(0,r.useEffect)(()=>{H&&u&&l.F.buckets.getBucketVersioning(i).then(e=>{E(e.data),$(!1)}).catch(e=>{c((0,p.Dy)((0,m.S)(e))),$(!1)})},[H,c,i,u]);return(0,_.jsxs)(f.A,{modalOpen:t,onClose:()=>{n(!1)},title:"Add Lifecycle Rule",titleIcon:(0,_.jsx)(s.oVU,{}),children:[x&&(0,_.jsx)(s.xA9,{container:!0,children:(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsx)(s.z21,{})})}),!x&&(0,_.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),A(!0),(()=>{let e={};if("expiry"===N){let t={};"current"===D?t.expiry_days=parseInt(P):"days"===X?t.noncurrentversion_expiration_days=parseInt(P):t.newer_noncurrentversion_expiration_versions=parseInt(P),e=(0,j.A)({},t)}else{let t={};"current"===D?(t.transition_days=parseInt(P),t.storage_class=V):"days"===X&&(t.noncurrentversion_transition_days=parseInt(P),t.noncurrentversion_transition_storage_class=V),e=(0,j.A)({},t)}const t=(0,j.A)({type:N,prefix:O,tags:I,expired_object_delete_marker:U,expired_object_delete_all:q},e);l.F.buckets.addBucketLifecycle(i,t).then(()=>{A(!1),n(!0)}).catch(e=>{A(!1),c((0,p.Dy)((0,m.S)(e)))})})()},children:(0,_.jsxs)(s.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,_.jsx)(s.z6M,{currentValue:N,id:"ilm_type",name:"ilm_type",label:"Type of Lifecycle",onChange:e=>{R(e.target.value)},selectorOptions:[{value:"expiry",label:"Expiry"},{value:"transition",label:"Transition"}],helpTip:(0,_.jsxs)(r.Fragment,{children:["Select"," ",(0,_.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/object-management/create-lifecycle-management-expiration-rule.html",children:"Expiry"})," ","to delete Objects per this rule. Select"," ",(0,_.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/object-management/transition-objects-to-minio.html",children:"Transition"})," ","to move Objects to a remote storage"," ",(0,_.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/windows/administration/object-management/transition-objects-to-minio.html#configure-the-remote-storage-tier",children:"Tier"})," ","per this rule."]}),helpTipPlacement:"right"}),"Enabled"===(null===T||void 0===T?void 0:T.status)&&(0,_.jsx)(s.l6P,{value:D,id:"object_version",name:"object_version",label:"Object Version",onChange:e=>{B(e)},options:[{value:"current",label:"Current Version"},{value:"noncurrent",label:"Non-Current Version"}],helpTip:(0,_.jsxs)(r.Fragment,{children:["Select whether to apply the rule to current or non-current Object",(0,_.jsxs)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/object-management/create-lifecycle-management-expiration-rule.html#expire-versioned-objects",children:[" ","Versions"]})]}),helpTipPlacement:"right"}),(0,_.jsx)(s.cl_,{error:P&&!z?parseInt(P)<=0?"Number of ".concat(X," to retain must be greater than zero"):parseInt(P)>2147483647?"Number of ".concat(X," must be less than or equal to 2147483647"):"":"",id:"expiry_days",name:"expiry_days",onChange:e=>{e.target.validity.valid&&M(e.target.value)},pattern:"[0-9]*",label:"After",value:P,overlayObject:(0,_.jsx)(r.Fragment,{children:(0,_.jsxs)(s.xA9,{container:!0,sx:{justifyContent:"center"},children:[(0,_.jsx)(C.A,{id:"expire-current-unit",unitSelected:X,unitsList:[{label:"Days",value:"days"},{label:"Versions",value:"versions"}],disabled:"noncurrent"!==D||"expiry"!==N,onUnitChange:e=>{ee(e)}}),"expiry"===N&&"noncurrent"===D&&(0,_.jsxs)(s.V7x,{content:(0,_.jsx)(r.Fragment,{children:"Select to set expiry by days or newer noncurrent versions"}),placement:"right",children:[" ",(0,_.jsx)(s._0O,{style:{width:15,height:15}})]})]})})}),"expiry"===N?(0,_.jsx)(r.Fragment,{}):(0,_.jsx)(s.l6P,{label:"To Tier",id:"storage_class",name:"storage_class",value:V,onChange:e=>{w(e)},options:g,helpTip:(0,_.jsxs)(r.Fragment,{children:["Configure a"," ",(0,_.jsx)("a",{href:d.zZ.TIERS_ADD,color:"secondary",style:{textDecoration:"underline"},children:"remote tier"})," ","to receive transitioned Objects"]}),helpTipPlacement:"right"}),(0,_.jsx)(s.xA9,{item:!0,xs:12,sx:te,children:(0,_.jsxs)(s.nD3,{title:"Filters",id:"lifecycle-filters",expanded:W,onTitleClick:()=>Q(!W),children:[(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsx)(s.cl_,{id:"prefix",name:"prefix",onChange:e=>{F(e.target.value)},label:"Prefix",value:O})}),(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsx)(v.A,{name:"tags",label:"Tags",elements:"",onChange:e=>{L(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),"expiry"===N&&"noncurrent"===D&&(0,_.jsx)(s.xA9,{item:!0,xs:12,sx:te,children:(0,_.jsx)(s.nD3,{title:"Advanced",id:"lifecycle-advanced-filters",expanded:Z,onTitleClick:()=>J(!Z),sx:{marginTop:15},children:(0,_.jsxs)(s.xA9,{item:!0,xs:12,children:[(0,_.jsx)(s.dOG,{value:"expired_delete_marker",id:"expired_delete_marker",name:"expired_delete_marker",checked:U,onChange:e=>{Y(e.target.checked)},label:"Expire Delete Marker",description:"Remove the reference to the object if no versions are left"}),(0,_.jsx)(s.dOG,{value:"expired_delete_all",id:"expired_delete_all",name:"expired_delete_all",checked:q,onChange:e=>{K(e.target.checked)},label:"Expire All Versions",description:"Removes all the versions of the object already expired"})]})})}),(0,_.jsxs)(s.xA9,{item:!0,xs:12,sx:b.Uz.modalButtonBar,children:[(0,_.jsx)(s.$nd,{id:"reset",type:"button",variant:"regular",disabled:k,onClick:()=>{n(!1)},label:"Cancel"}),(0,_.jsx)(s.$nd,{id:"save-lifecycle",type:"submit",variant:"callAction",color:"primary",disabled:k||!z,label:"Save"})]}),k&&(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsx)(s.z21,{})})]})})]})};var A=n(30272);const T=()=>{const e=(0,o.d4)(u.Nx),t=(0,x.g)(),[n,i]=(0,r.useState)(!0),[m,y]=(0,r.useState)([]),[j,b]=(0,r.useState)(!1),[f,v]=(0,r.useState)(!1),[C,T]=(0,r.useState)(null),[E,O]=(0,r.useState)(!1),[F,I]=(0,r.useState)(null),L=(0,h.jL)(),V=t.bucketName||"",w=(0,c._)(V,[d.OV.S3_GET_LIFECYCLE_CONFIGURATION,d.OV.S3_GET_ACTIONS]);(0,r.useEffect)(()=>{e&&i(!0)},[e,i]),(0,r.useEffect)(()=>{L((0,p.ph)("bucket_detail_lifecycle"))},[]),(0,r.useEffect)(()=>{n&&(w?l.F.buckets.getBucketLifecycle(V).then(e=>{const t=a()(e.data,"lifecycle",[]);y(t||[]),i(!1)}).catch(e=>{console.error(e.error),y([]),i(!1)}):i(!1))},[n,i,V,w]);const N=[{label:"Type",renderFullObject:!0,renderFunction:e=>e?e.expiration&&(e.expiration.days>0||e.expiration.noncurrent_expiration_days||e.expiration.newer_noncurrent_expiration_versions&&e.expiration.newer_noncurrent_expiration_versions>0)?(0,_.jsx)("span",{children:"Expiry"}):e.transition&&(e.transition.days>0||e.transition.noncurrent_transition_days)?(0,_.jsx)("span",{children:"Transition"}):(0,_.jsx)(r.Fragment,{}):(0,_.jsx)(r.Fragment,{})},{label:"Version",renderFullObject:!0,renderFunction:e=>{if(!e)return(0,_.jsx)(r.Fragment,{});if(e.expiration){if(e.expiration.days>0)return(0,_.jsx)("span",{children:"Current"});if(e.expiration.noncurrent_expiration_days||e.expiration.newer_noncurrent_expiration_versions)return(0,_.jsx)("span",{children:"Non-Current"})}if(e.transition){if(e.transition.days>0)return(0,_.jsx)("span",{children:"Current"});if(e.transition.noncurrent_transition_days)return(0,_.jsx)("span",{children:"Non-Current"})}}},{label:"Expire Delete Marker",elementKey:"expire_delete_marker",renderFunction:e=>e&&e.expiration&&void 0!==e.expiration.delete_marker?(0,_.jsx)("span",{children:e.expiration.delete_marker?"true":"false"}):(0,_.jsx)(r.Fragment,{}),renderFullObject:!0},{label:"Tier",elementKey:"storage_class",renderFunction:e=>{let t=a()(e,"transition.storage_class","");return t=a()(e,"transition.noncurrent_storage_class",t),t},renderFullObject:!0},{label:"Prefix",elementKey:"prefix"},{label:"After",renderFullObject:!0,renderFunction:e=>{if(!e)return(0,_.jsx)(r.Fragment,{});if(e.transition){if(e.transition.days>0)return(0,_.jsxs)("span",{children:[e.transition.days," days"]});if(e.transition.noncurrent_transition_days)return(0,_.jsxs)("span",{children:[e.transition.noncurrent_transition_days," days"]})}return e.expiration?e.expiration.days>0?(0,_.jsxs)("span",{children:[e.expiration.days," days"]}):e.expiration.noncurrent_expiration_days?(0,_.jsxs)("span",{children:[e.expiration.noncurrent_expiration_days," days"]}):(0,_.jsxs)("span",{children:[e.expiration.newer_noncurrent_expiration_versions," versions"]}):void 0}},{label:"Status",elementKey:"status"}],R=[{type:"view",onClick(e){T(e),v(!0)}},{type:"delete",onClick(e){I(e),O(!0)},sendOnlyId:!0}];return(0,_.jsxs)(r.Fragment,{children:[f&&C&&(0,_.jsx)(S,{open:f,closeModalAndRefresh:e=>{v(!1),T(null),e&&i(!0)},selectedBucket:V,lifecycleRule:C}),j&&(0,_.jsx)(k,{open:j,bucketName:V,closeModalAndRefresh:e=>{b(!1),e&&i(!0)}}),E&&F&&(0,_.jsx)(g,{id:F,bucket:V,deleteOpen:E,onCloseAndRefresh:e=>{O(!1),I(null),e&&i(!0)}}),(0,_.jsx)(s._xt,{separator:!0,sx:{marginBottom:15},actions:(0,_.jsx)(c.R,{scopes:[d.OV.S3_PUT_LIFECYCLE_CONFIGURATION,d.OV.S3_PUT_ACTIONS],resource:V,matchAll:!0,errorProps:{disabled:!0},children:(0,_.jsx)(A.A,{tooltip:"Add Lifecycle Rule",children:(0,_.jsx)(s.$nd,{id:"add-bucket-lifecycle-rule",onClick:()=>{b(!0)},label:"Add Lifecycle Rule",icon:(0,_.jsx)(s.REV,{}),variant:"callAction"})})}),children:(0,_.jsx)(s.V7x,{content:(0,_.jsxs)(r.Fragment,{children:["MinIO derives it\u2019s behavior and syntax from"," ",(0,_.jsx)("a",{target:"blank",href:"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html",children:"S3 lifecycle"})," ","for compatibility in migrating workloads and lifecycle rules from S3 to MinIO."]}),placement:"right",children:"Lifecycle Rules"})}),(0,_.jsxs)(s.xA9,{container:!0,children:[(0,_.jsx)(s.xA9,{item:!0,xs:12,children:(0,_.jsx)(c.R,{scopes:[d.OV.S3_GET_LIFECYCLE_CONFIGURATION,d.OV.S3_GET_ACTIONS],resource:V,errorProps:{disabled:!0},children:(0,_.jsx)(s.bQt,{itemActions:R,columns:N,isLoading:n,records:m,entityName:"Lifecycle",customEmptyMessage:"There are no Lifecycle rules yet",idField:"id",customPaperHeight:"400px"})})}),!n&&(0,_.jsxs)(s.xA9,{item:!0,xs:12,children:[(0,_.jsx)("br",{}),(0,_.jsx)(s.lVp,{title:"Lifecycle Rules",iconComponent:(0,_.jsx)(s.fAn,{}),help:(0,_.jsxs)(r.Fragment,{children:["MinIO Object Lifecycle Management allows creating rules for time or date based automatic transition or expiry of objects. For object transition, MinIO automatically moves the object to a configured remote storage tier.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),"You can learn more at our"," ",(0,_.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/object-management/object-lifecycle-management.html",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}},32680:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(9950),i=n(98341),a=n(89132),s=n(99491),o=n(49078),l=n(96382),c=n(44414);const d=e=>{let{onClose:t,modalOpen:n,title:d,children:u,wideLimit:x=!0,titleIcon:p=null,iconColor:h="default",sx:m}=e;const y=(0,s.jL)(),[_,g]=(0,r.useState)(!1),j=(0,i.d4)(e=>e.system.modalSnackBar);(0,r.useEffect)(()=>{y((0,o.h0)(""))},[y]),(0,r.useEffect)(()=>{if(j){if(""===j.message)return void g(!1);"error"!==j.type&&g(!0)}},[j]);let b="";return j&&(b=j.detailedErrorMsg,(""===b||b&&b.length<5)&&(b=j.message)),(0,c.jsxs)(a.ngX,{onClose:t,open:n,title:d,titleIcon:p,widthLimit:x,sx:m,iconColor:h,children:[(0,c.jsx)(l.A,{isModal:!0}),(0,c.jsx)(a.qb_,{onClose:()=>{g(!1),y((0,o.h0)(""))},open:_,message:b,mode:"inline",variant:"error"===j.type?"error":"default",autoHideDuration:"error"===j.type?10:5,condensed:!0}),u]})}},58093:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(9950),i=n(89132),a=n(19335),s=n(87946),o=n.n(s),l=n(44414);const c=a.Ay.button(e=>{let{theme:t}=e;return{border:"1px solid ".concat(o()(t,"borderColor","#E2E2E2")),borderRadius:3,color:o()(t,"secondaryText","#5B5C5C"),backgroundColor:o()(t,"boxBackground","#FBFAFA"),fontSize:12}}),d=e=>{let{id:t,unitSelected:n,unitsList:a,disabled:s=!1,onUnitChange:o}=e;const[d,u]=r.useState(null),x=Boolean(d),p=e=>{u(null),""!==e&&o&&o(e)};return(0,l.jsxs)(r.Fragment,{children:[(0,l.jsx)(c,{id:"".concat(t,"-button"),"aria-controls":"".concat(t,"-menu"),"aria-haspopup":"true","aria-expanded":x?"true":void 0,onClick:e=>{u(e.currentTarget)},disabled:s,type:"button",children:n}),(0,l.jsx)(i.Vey,{id:"upload-main-menu",options:a,selectedOption:"",onSelect:e=>p(e),hideTriggerAction:()=>{p("")},open:x,anchorEl:d,anchorOrigin:"end"})]})}},66147:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(9950),i=n(87946),a=n.n(i),s=n(95491),o=n.n(s),l=n(89132),c=n(44414);const d=e=>{let{elements:t,name:n,label:i,tooltip:s="",keyPlaceholder:d="",valuePlaceholder:u="",onChange:x,withBorder:p=!1}=e;const[h,m]=(0,r.useState)([""]),[y,_]=(0,r.useState)([""]),g=(0,r.createRef)();(0,r.useEffect)(()=>{if(1===h.length&&""===h[0]&&1===y.length&&""===y[0]&&t&&""!==t){const e=t.split("&");let n=[],r=[];e.forEach(e=>{const t=e.split("=");2===t.length&&(n.push(t[0]),r.push(t[1]))}),n.push(""),r.push(""),m(n),_(r)}},[h,y,t]),(0,r.useEffect)(()=>{const e=g.current;e&&h.length>1&&e.scrollIntoView(!1)},[h]);const j=(0,r.useRef)(!0);(0,r.useLayoutEffect)(()=>{j.current?j.current=!1:v()},[h,y]);const b=e=>{e.persist();let t=[...h];const n=a()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,m(t)},f=e=>{e.persist();let t=[...y];const n=a()(e.target,"dataset.index","0");t[parseInt(n)]=e.target.value,_(t)},v=o()(()=>{let e="";h.forEach((t,n)=>{if(h[n]&&y[n]){let r="".concat(t,"=").concat(y[n]);0!==n&&(r="&".concat(r)),e="".concat(e).concat(r)}}),x(e)},500),S=y.map((e,t)=>(0,c.jsxs)(l.xA9,{item:!0,xs:12,className:"lineInputBoxes inputItem",children:[(0,c.jsx)(l.cl_,{id:"".concat(n,"-key-").concat(t.toString()),label:"",name:"".concat(n,"-").concat(t.toString()),value:h[t],onChange:b,index:t,placeholder:d}),(0,c.jsx)("span",{className:"queryDiv",children:":"}),(0,c.jsx)(l.cl_,{id:"".concat(n,"-value-").concat(t.toString()),label:"",name:"".concat(n,"-").concat(t.toString()),value:y[t],onChange:f,index:t,placeholder:u,overlayIcon:t===y.length-1?(0,c.jsx)(l.REV,{}):null,overlayAction:()=>{(()=>{if(""!==h[h.length-1].trim()&&""!==y[y.length-1].trim()){const e=[...h],t=[...y];e.push(""),t.push(""),m(e),_(t)}})()}})]},"query-pair-".concat(n,"-").concat(t.toString())));return(0,c.jsx)(r.Fragment,{children:(0,c.jsxs)(l.xA9,{item:!0,xs:12,sx:{"& .lineInputBoxes":{display:"flex"},"& .queryDiv":{alignSelf:"center",margin:"-15px 4px 0",fontWeight:600}},className:"inputItem",children:[(0,c.jsxs)(l.l1Y,{children:[i,""!==s&&(0,c.jsx)(l.azJ,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,c.jsx)(l.m_M,{tooltip:s,placement:"top",children:(0,c.jsx)(l.NTw,{style:{width:13,height:13}})})})]}),(0,c.jsxs)(l.azJ,{withBorders:p,sx:{padding:15,height:150,overflowY:"auto",position:"relative",marginTop:15},children:[S,(0,c.jsx)("div",{ref:g})]})]})})}}}]);