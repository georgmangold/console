(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[7478],{23701:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var r=n(89379),o=n(9950),a=n(87946),s=n.n(a),i=n(19335),c=n(89132),l=n(32680),d=n(95189),p=n.n(d),u=n(49078),y=n(99491),f=n(44414);const h=e=>{let{label:t="",value:n=""}=e;const r=(0,y.jL)();return(0,f.jsxs)(c.azJ,{sx:{marginTop:12},children:[(0,f.jsx)(c.l1Y,{children:t}),(0,f.jsx)(c.EmB,{actionButton:(0,f.jsx)(p(),{text:n,children:(0,f.jsx)(c.$nd,{id:"copy-path",variant:"regular",onClick:()=>{r((0,u.h0)("".concat(t," copied to clipboard")))},style:{marginRight:"5px",width:"28px",height:"28px",padding:"0px"},icon:(0,f.jsx)(c.TdU,{})})}),children:n})]})};var x=n(30272),m=n(45246);const g=i.Ay.div(e=>{let{theme:t}=e;return{color:s()(t,"signalColors.danger","#C51B3F"),fontSize:".85rem",margin:".5rem 0 .5rem 0",display:"flex",alignItems:"center","& svg ":{marginRight:".3rem",height:16,width:16}}}),b=(e,t)=>{let n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+t),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},j=e=>{let{newServiceAccount:t,open:n,closeModal:a,entity:i}=e;if(!t)return null;const d=s()(t,"console",null),p=s()(t,"idp",!1);return(0,f.jsx)(l.A,{modalOpen:n,onClose:()=>{a()},title:"New ".concat(i," Created"),titleIcon:(0,f.jsx)(c.kQt,{}),children:(0,f.jsxs)(c.xA9,{container:!0,children:[(0,f.jsxs)(c.xA9,{item:!0,xs:12,children:["A new ",i," has been created with the following details:",!p&&d&&(0,f.jsx)(o.Fragment,{children:(0,f.jsxs)(c.xA9,{item:!0,xs:12,sx:{overflowY:"auto",maxHeight:350},children:[(0,f.jsx)(c.azJ,{sx:{padding:".8rem 0 0 0",fontWeight:600,fontSize:".9rem"},children:"Console Credentials"}),Array.isArray(d)&&d.map((e,t)=>(0,f.jsxs)(o.Fragment,{children:[(0,f.jsx)(h,{label:"Access Key",value:e.accessKey}),(0,f.jsx)(h,{label:"Secret Key",value:e.secretKey})]})),!Array.isArray(d)&&(0,f.jsxs)(o.Fragment,{children:[(0,f.jsx)(h,{label:"Access Key",value:d.accessKey}),(0,f.jsx)(h,{label:"Secret Key",value:d.secretKey})]})]})}),(null===d||void 0===d)&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h,{label:"Access Key",value:t.accessKey||""}),(0,f.jsx)(h,{label:"Secret Key",value:t.secretKey||""})]}),p?(0,f.jsx)(g,{children:"Please Login via the configured external identity provider."}):(0,f.jsxs)(g,{children:[(0,f.jsx)(c.cJw,{}),(0,f.jsx)("span",{children:"Write these down, as this is the only time the secret will be displayed."})]})]}),(0,f.jsx)(c.xA9,{item:!0,xs:12,sx:(0,r.A)({},m.Uz.modalButtonBar),children:!p&&(0,f.jsxs)(o.Fragment,{children:[(0,f.jsx)(x.A,{tooltip:"Download credentials in a JSON file formatted for import using mc alias import. This will only include the default login credentials.",children:(0,f.jsx)(c.$nd,{id:"download-button",label:"Download for import",onClick:()=>{let e={};if(d)if(Array.isArray(d)){e=d.map(e=>({url:e.url,accessKey:e.accessKey,secretKey:e.secretKey,api:"s3v4",path:"auto"}))[0]}else e={url:d.url,accessKey:d.accessKey,secretKey:d.secretKey,api:"s3v4",path:"auto"};else e={url:t.url,accessKey:t.accessKey,secretKey:t.secretKey,api:"s3v4",path:"auto"};b("credentials.json",JSON.stringify((0,r.A)({},e)))},icon:(0,f.jsx)(c.s3U,{}),variant:"callAction"})}),Array.isArray(d)&&d.length>1&&(0,f.jsx)(x.A,{tooltip:"Download all access credentials to a JSON file. NOTE: This file is not formatted for import using mc alias import. If you plan to import this alias from the file, please use the Download for Import button. ",children:(0,f.jsx)(c.$nd,{id:"download-all-button",label:"Download all access credentials",onClick:()=>{let e={};if(d&&Array.isArray(d)&&d.length>1){e=d.map(e=>({accessKey:e.accessKey,secretKey:e.secretKey}))}b("all_credentials.json",JSON.stringify((0,r.A)({},e)))},icon:(0,f.jsx)(c.s3U,{}),variant:"callAction",color:"primary"})})]})})]})})}},32680:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(9950),o=n(98341),a=n(89132),s=n(99491),i=n(49078),c=n(96382),l=n(44414);const d=e=>{let{onClose:t,modalOpen:n,title:d,children:p,wideLimit:u=!0,titleIcon:y=null,iconColor:f="default",sx:h}=e;const x=(0,s.jL)(),[m,g]=(0,r.useState)(!1),b=(0,o.d4)(e=>e.system.modalSnackBar);(0,r.useEffect)(()=>{x((0,i.h0)(""))},[x]),(0,r.useEffect)(()=>{if(b){if(""===b.message)return void g(!1);"error"!==b.type&&g(!0)}},[b]);let j="";return b&&(j=b.detailedErrorMsg,(""===j||j&&j.length<5)&&(j=b.message)),(0,l.jsxs)(a.ngX,{onClose:t,open:n,title:d,titleIcon:y,widthLimit:u,sx:h,iconColor:f,children:[(0,l.jsx)(c.A,{isModal:!0}),(0,l.jsx)(a.qb_,{onClose:()=>{g(!1),x((0,i.h0)(""))},open:m,message:j,mode:"inline",variant:"error"===b.type?"error":"default",autoHideDuration:"error"===b.type?10:5,condensed:!0}),p]})}},33312:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(9950);var r=n(19335),o=n(44414);const a=r.Ay.h1(()=>({padding:0,margin:0,fontSize:".9rem"})),s=e=>{let{children:t}=e;return(0,o.jsx)(a,{children:t})}},59660:e=>{e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},67243:(e,t,n)=>{"use strict";var r=n(59660),o={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,a,s,i,c,l,d=!1;t||(t={}),n=t.debug||!1;try{if(s=r(),i=document.createRange(),c=document.getSelection(),(l=document.createElement("span")).textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(r){if(r.stopPropagation(),t.format)if(r.preventDefault(),"undefined"===typeof r.clipboardData){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var a=o[t.format]||o.default;window.clipboardData.setData(a,e)}else r.clipboardData.clearData(),r.clipboardData.setData(t.format,e);t.onCopy&&(r.preventDefault(),t.onCopy(r.clipboardData))}),document.body.appendChild(l),i.selectNodeContents(l),c.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");d=!0}catch(p){n&&console.error("unable to copy using execCommand: ",p),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),d=!0}catch(p){n&&console.error("unable to copy using clipboardData: ",p),n&&console.error("falling back to prompt"),a=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(a,e)}}finally{c&&("function"==typeof c.removeRange?c.removeRange(i):c.removeAllRanges()),l&&document.body.removeChild(l),s()}return d}},94702:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.CopyToClipboard=void 0;var o=i(n(9950)),a=i(n(67243)),s=["text","onCopy","options","children"];function i(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){x(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},u(e,t)}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return f(e)}(this,n)}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(c,e);var t,n,r,i=y(c);function c(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x(f(e=i.call.apply(i,[this].concat(n))),"onClick",function(t){var n=e.props,r=n.text,s=n.onCopy,i=n.children,c=n.options,l=o.default.Children.only(i),d=(0,a.default)(r,c);s&&s(r,d),l&&l.props&&"function"===typeof l.props.onClick&&l.props.onClick(t)}),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=(e.text,e.onCopy,e.options,e.children),n=d(e,s),r=o.default.Children.only(t);return o.default.cloneElement(r,l(l({},n),{},{onClick:this.onClick}))}}])&&p(t.prototype,n),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),c}(o.default.PureComponent);t.CopyToClipboard=m,x(m,"defaultProps",{onCopy:void 0,options:void 0})},94797:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(9950),o=n(89132),a=n(95189),s=n.n(a),i=n(30272),c=n(44414);const l=e=>{let{value:t,label:n="",tooltip:a="",mode:l="json",onChange:d,editorHeight:p=250,helptip:u}=e;return(0,c.jsx)(o.BYM,{value:t,onChange:e=>d(e),mode:l,tooltip:a,editorHeight:p,label:n,helpTools:(0,c.jsx)(r.Fragment,{children:(0,c.jsx)(i.A,{tooltip:"Copy to Clipboard",children:(0,c.jsx)(s(),{text:t,children:(0,c.jsx)(o.$nd,{type:"button",id:"copy-code-mirror",icon:(0,c.jsx)(o.TdU,{}),color:"primary",variant:"regular"})})})}),helpTip:u,helpTipPlacement:"right"})}},95189:(e,t,n)=>{"use strict";var r=n(94702).CopyToClipboard;r.CopyToClipboard=r,e.exports=r},97478:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>C});var r=n(89379),o=n(9950),a=n(28429),s=n(89132),i=n(45246),c=n(93598),l=n(49078),d=n(70444),p=n(48965),u=n(5501),y=n(94797),f=n(44414);const h=e=>{let{icon:t,description:n}=e;return(0,f.jsxs)(s.azJ,{sx:{display:"flex","& .min-icon":{marginRight:"10px",height:"23px",width:"23px",marginBottom:"10px"}},children:[t," ",(0,f.jsx)("div",{style:{fontSize:"14px",fontStyle:"italic",color:"#5E5E5E"},children:n})]})},x=()=>(0,f.jsxs)(s.azJ,{sx:{flex:1,border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"20px",marginTop:0},children:[(0,f.jsxs)(s.azJ,{sx:{fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",marginBottom:"16px",paddingBottom:"20px","& .min-icon":{height:"21px",width:"21px",marginRight:"15px"}},children:[(0,f.jsx)(s.nag,{}),(0,f.jsx)("div",{children:"Learn more about Access Keys"})]}),(0,f.jsxs)(s.azJ,{sx:{fontSize:"14px",marginBottom:"15px"},children:[(0,f.jsxs)(s.azJ,{sx:{paddingBottom:"20px"},children:[(0,f.jsx)(h,{icon:(0,f.jsx)(s.ehx,{}),description:"Create Access Keys"}),(0,f.jsx)(s.azJ,{sx:{paddingTop:"20px"},children:"Access Keys inherit the policies explicitly attached to the parent user, and the policies attached to each group in which the parent user has membership."})]}),(0,f.jsxs)(s.azJ,{sx:{paddingBottom:"20px"},children:[(0,f.jsx)(h,{icon:(0,f.jsx)(s.aJN,{}),description:"Assign Custom Credentials"}),(0,f.jsx)(s.azJ,{sx:{paddingTop:"10px"},children:"Randomized access credentials are recommended, and provided by default. You may use your own custom Access Key and Secret Key by replacing the default values. After creation of any Access Key, you will be given the opportunity to view and download the account credentials."}),(0,f.jsx)(s.azJ,{sx:{paddingTop:"10px"},children:"Access Keys support programmatic access by applications. You cannot use a Access Key to log into the MinIO Console."})]}),(0,f.jsxs)(s.azJ,{sx:{paddingBottom:"20px"},children:[(0,f.jsx)(h,{icon:(0,f.jsx)(s.n$X,{}),description:"Assign Access Policies"}),(0,f.jsx)(s.azJ,{sx:{paddingTop:"10px"},children:"You can specify an optional JSON-formatted IAM policy to further restrict Access Key access to a subset of the actions and resources explicitly allowed for the parent user. Additional access beyond that of the parent user cannot be implemented through these policies."}),(0,f.jsx)(s.azJ,{sx:{paddingTop:"10px"},children:"You cannot modify the optional Access Key IAM policy after saving."})]})]}),(0,f.jsx)(s.azJ,{sx:{display:"flex",flexFlow:"column"}})]});var m=n(23701),g=n(33312),b=n(82817),j=n(98167),v=n(99491),A=n(59908);const C=()=>{const e=(0,v.jL)(),t=(0,a.Zp)(),[n,h]=(0,o.useState)(!1),[C,w]=(0,o.useState)((0,A.$f)(20)),[S,K]=(0,o.useState)((0,A.$f)(40)),[O,E]=(0,o.useState)(!1),[D,P]=(0,o.useState)(null),[T,k]=(0,o.useState)(""),[J,z]=(0,o.useState)(""),[R,_]=(0,o.useState)(""),[B,I]=(0,o.useState)(""),[N,U]=(0,o.useState)();(0,o.useEffect)(()=>{e((0,l.ph)("add_service_account"))},[]),(0,o.useEffect)(()=>{if(n){const t=N?N.toJSDate().toISOString():null;d.F.serviceAccountCredentials.createServiceAccountCreds({policy:T,accessKey:C,secretKey:S,description:R,comment:B,name:J,expiry:t},{type:u.cM.Json}).then(e=>{h(!1),P({accessKey:e.data.accessKey||"",secretKey:e.data.secretKey||"",url:e.url||""})}).catch(t=>{h(!1),e((0,l.C9)((0,p.S)(t.error)))})}},[n,h,e,T,C,S,J,R,N,B]),(0,o.useEffect)(()=>{O&&d.F.user.getUserPolicy().then(e=>{k(JSON.stringify(JSON.parse(e.data),null,4))})},[O]);return(0,f.jsxs)(o.Fragment,{children:[null!==D&&(0,f.jsx)(m.A,{newServiceAccount:D,open:!0,closeModal:()=>{P(null),t("".concat(c.zZ.ACCOUNT))},entity:"Access Key"}),(0,f.jsxs)(s.xA9,{item:!0,xs:12,children:[(0,f.jsx)(b.A,{label:(0,f.jsx)(s.EGL,{label:"Access Keys",onClick:()=>t(c.zZ.ACCOUNT)}),actions:(0,f.jsx)(j.A,{})}),(0,f.jsx)(s.Mxu,{children:(0,f.jsx)(s.Hbc,{helpBox:(0,f.jsx)(x,{}),icon:(0,f.jsx)(s.kQt,{}),title:"Create Access Key",children:(0,f.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),(e=>{e.preventDefault(),h(!0)})(e)},children:[(0,f.jsx)(s.cl_,{value:C,label:"Access Key",id:"accessKey",name:"accessKey",placeholder:"Enter Access Key",onChange:e=>{w(e.target.value)},startIcon:(0,f.jsx)(s.ehx,{})}),(0,f.jsx)(s.cl_,{value:S,label:"Secret Key",id:"secretKey",name:"secretKey",type:"password",placeholder:"Enter Secret Key",onChange:e=>{K(e.target.value)},startIcon:(0,f.jsx)(s.aJN,{})}),(0,f.jsx)(s.dOG,{value:"serviceAccountPolicy",id:"serviceAccountPolicy",name:"serviceAccountPolicy",checked:O,onChange:e=>{E(e.target.checked)},label:"Restrict beyond user policy",description:"You can specify an optional JSON-formatted IAM policy to further restrict Access Key access to a subset of the actions and resources explicitly allowed for the parent user. Additional access beyond that of the parent user cannot be implemented through these policies."}),O&&(0,f.jsxs)(s.xA9,{item:!0,xs:12,children:[(0,f.jsx)(s.azJ,{children:(0,f.jsx)(s.V7x,{content:(0,f.jsx)(o.Fragment,{children:(0,f.jsx)("a",{target:"blank",href:"https://min.io/docs/minio/kubernetes/upstream/administration/identity-access-management/policy-based-access-control.html#policy-document-structure",children:"Guide to access policy structure"})}),placement:"right",children:(0,f.jsx)(g.A,{children:"Current User Policy - edit the JSON to remove permissions for this Access Key"})})}),(0,f.jsx)(s.xA9,{item:!0,xs:12,sx:(0,r.A)({},i.Uz.formScrollable),children:(0,f.jsx)(y.A,{value:T,onChange:e=>{k(e)},editorHeight:"350px"})})]}),(0,f.jsx)(s.xA9,{xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"start",fontWeight:600,color:"rgb(7, 25, 62)",gap:2,marginBottom:"15px",marginTop:"15px"},children:(0,f.jsx)(s.azJ,{sx:{marginTop:"15px",width:"100%","& label":{width:"180px"}},children:(0,f.jsx)(s.e8j,{noLabelMinWidth:!0,value:N,onChange:e=>{U(e)},id:"expiryTime",label:"Expiry",timeFormat:"24h",secondsSelector:!1})})}),(0,f.jsx)(s.cl_,{value:J,label:"Name",id:"name",name:"name",type:"text",placeholder:"Enter a name",onChange:e=>{z(e.target.value)}}),(0,f.jsx)(s.cl_,{value:R,label:"Description",id:"description",name:"description",type:"text",placeholder:"Enter a description",onChange:e=>{_(e.target.value)}}),(0,f.jsx)(s.cl_,{value:B,label:"Comments",id:"comment",name:"comment",type:"text",placeholder:"Enter a comment",onChange:e=>{I(e.target.value)}}),(0,f.jsxs)(s.xA9,{item:!0,xs:12,sx:(0,r.A)({},i.Uz.modalButtonBar),children:[(0,f.jsx)(s.$nd,{id:"clear",type:"button",variant:"regular",onClick:()=>{k(""),P(null),w(""),K("")},label:"Clear"}),(0,f.jsx)(s.$nd,{id:"create-sa",type:"submit",variant:"callAction",color:"primary",label:"Create"})]})]})})})]})]})}}}]);