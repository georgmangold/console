"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[3298],{23758:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(65043),a=n(89923),i=n(94574),l=n(33097),c=n.n(l),o=n(70579);const r=i.Ay.button(e=>{let{theme:t}=e;return{border:"1px solid ".concat(c()(t,"borderColor","#E2E2E2")),borderRadius:3,color:c()(t,"secondaryText","#5B5C5C"),backgroundColor:c()(t,"boxBackground","#FBFAFA"),fontSize:12}}),d=e=>{let{id:t,unitSelected:n,unitsList:i,disabled:l=!1,onUnitChange:c}=e;const[d,u]=s.useState(null),h=Boolean(d),x=e=>{u(null),""!==e&&c&&c(e)};return(0,o.jsxs)(s.Fragment,{children:[(0,o.jsx)(r,{id:"".concat(t,"-button"),"aria-controls":"".concat(t,"-menu"),"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:e=>{u(e.currentTarget)},disabled:l,type:"button",children:n}),(0,o.jsx)(a.Vey,{id:"upload-main-menu",options:i,selectedOption:"",onSelect:e=>x(e),hideTriggerAction:()=>{x("")},open:h,anchorEl:d,anchorOrigin:"end"})]})}},43298:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var s=n(65043),a=n(73216),i=n(89923),l=n(77403),c=n(77938),o=n(99161),r=n(64159),d=n(21383),u=n(22166),h=n(46537),x=n(48793),m=n(56629),g=n(53518),p=n(79331),b=n(69772),j=n(6681),k=n(64681),v=n(46096),C=n(18218),S=n(33097),f=n.n(S),y=n(94574),A=n(35475),_=n(56483),B=n(80882),T=n(70579);const w=y.Ay.div(e=>{let{theme:t}=e;return{border:"".concat(f()(t,"borderColor","#eaeaea")," 1px solid"),borderRadius:3,padding:15,cursor:"pointer","&.disabled":{backgroundColor:f()(t,"signalColors.danger","red")},"&:hover":{backgroundColor:f()(t,"boxBackground","#FBFAFA")},"& .bucketTitle":{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:10,"& h1":{padding:0,margin:0,marginBottom:5,fontSize:22,color:f()(t,"screenTitle.iconColor","#07193E"),["@media (max-width: ".concat(i.nmC.md,"px)")]:{marginBottom:0}}},"& .bucketDetails":{display:"flex",gap:40,"& span":{fontSize:14},["@media (max-width: ".concat(i.nmC.md,"px)")]:{flexFlow:"column-reverse",gap:5}},"& .bucketMetrics":{display:"flex",alignItems:"center",marginTop:20,gap:25,borderTop:"".concat(f()(t,"borderColor","#E2E2E2")," 1px solid"),paddingTop:20,"& svg.bucketIcon":{color:f()(t,"screenTitle.iconColor","#07193E"),fill:f()(t,"screenTitle.iconColor","#07193E")},"& .metric":{"& .min-icon":{color:f()(t,"fontColor","#000"),width:13,marginRight:5}},"& .metricLabel":{fontSize:14,fontWeight:"bold",color:f()(t,"fontColor","#000")},"& .metricText":{fontSize:24,fontWeight:"bold"},"& .unit":{fontSize:12,fontWeight:"normal"},["@media (max-width: ".concat(i.nmC.md,"px)")]:{marginTop:8,paddingTop:8}}}}),E=e=>{var t,n;let{bucket:l,onSelect:r,selected:d,bulkSelect:u}=e;const h=(0,a.Zp)(),[x,m]=(0,s.useState)(!1),g=(0,_.nO)("".concat(l.size)||"0"),p=g.split(" ")[0],b=g.split(" ")[1],j=f()(l,"details.quota.quota","0"),k=(0,_.GT)(j,!0,!1),v=(0,c._)(l.name,o.pC[o.ac.BUCKET_ADMIN])&&!1;return(0,T.jsxs)(w,{onClick:()=>{!x&&h("/buckets/".concat(l.name,"/admin"))},id:"manageBucket-".concat(l.name),className:"bucket-item ".concat(v?"disabled":""),children:[(0,T.jsxs)(i.azJ,{className:"bucketTitle",children:[u&&(0,T.jsx)(i.azJ,{onClick:e=>{e.stopPropagation()},children:(0,T.jsx)(i.Sc0,{checked:d,id:"select-".concat(l.name),label:"",name:"select-".concat(l.name),onChange:e=>{r(e)},value:l.name})}),(0,T.jsxs)("h1",{children:[l.name," ",v]})]}),(0,T.jsxs)(i.azJ,{className:"bucketDetails",children:[(0,T.jsxs)("span",{id:"created-".concat(l.name),children:[(0,T.jsx)("strong",{children:"Created:"})," ",l.creation_date?new Date(l.creation_date).toString():"n/a"]}),(0,T.jsxs)("span",{id:"access-".concat(l.name),children:[(0,T.jsx)("strong",{children:"Access:"})," ",(e=>{var t,n,s,a,i,l;return null===(t=e.rw_access)||void 0===t||!t.read||null!==(n=e.rw_access)&&void 0!==n&&n.write?null!==(s=e.rw_access)&&void 0!==s&&s.read||null===(a=e.rw_access)||void 0===a||!a.write?null!==(i=e.rw_access)&&void 0!==i&&i.read&&null!==(l=e.rw_access)&&void 0!==l&&l.write?"R/W":"":"W":"R"})(l)]})]}),(0,T.jsxs)(i.azJ,{className:"bucketMetrics",children:[(0,T.jsx)(A.N_,{to:"/buckets/".concat(l.name,"/admin"),children:(0,T.jsx)(i.brV,{className:"bucketIcon",style:{height:48,width:48}})}),(0,T.jsxs)(i.xA9,{item:!0,className:"metric",onMouseEnter:()=>{var e;return(null===(e=l.details)||void 0===e?void 0:e.versioning)&&m(!0)},onMouseLeave:()=>{var e;return(null===(e=l.details)||void 0===e?void 0:e.versioning)&&m(!1)},children:[(null===(t=l.details)||void 0===t?void 0:t.versioning)&&(0,T.jsxs)(i.V7x,{content:B.p,placement:"top",children:[(0,T.jsx)(i.wNL,{})," "]}),!(null!==(n=l.details)&&void 0!==n&&n.versioning)&&(0,T.jsx)(i.wNL,{}),(0,T.jsx)("span",{className:"metricLabel",children:"Usage"}),(0,T.jsxs)("div",{className:"metricText",children:[p,(0,T.jsx)("span",{className:"unit",children:b}),"0"!==j&&(0,T.jsxs)(s.Fragment,{children:[" ","/ ",k.total,(0,T.jsx)("span",{className:"unit",children:k.unit})]})]})]}),(0,T.jsxs)(i.xA9,{item:!0,className:"metric",children:[(0,T.jsx)(i.Sxe,{}),(0,T.jsx)("span",{className:"metricLabel",children:"Objects"}),(0,T.jsx)("div",{className:"metricText",children:l.objects?(0,_.Af)(l.objects):0})]})]})]})};var R=n(94141),L=n(23758);const N=e=>{let{open:t,closeModalAndRefresh:n,buckets:a}=e;const l=(0,d.jL)(),[c,o]=(0,s.useState)([]),[u,h]=(0,s.useState)(!1),[x,p]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[k,v]=(0,s.useState)(""),[C,S]=(0,s.useState)(""),[y,A]=(0,s.useState)(""),[B,w]=(0,s.useState)(!0),[E,N]=(0,s.useState)("async"),[F,U]=(0,s.useState)("100"),[z,K]=(0,s.useState)("Gi"),[M,I]=(0,s.useState)("60"),[O,V]=(0,s.useState)([]),[D,J]=(0,s.useState)([]),[P,W]=(0,s.useState)([]),$=D.map(e=>({label:e,value:e}));(0,s.useEffect)(()=>{if(0===O.length){const e=[],t=[];a.forEach(n=>{e.push(n),t.push("")}),V(t),o(e)}},[a,O.length]);const q=e=>{let{errString:t}=e;switch(t){case"":return(0,T.jsx)(i.azJ,{sx:{color:"#42C91A"},children:(0,T.jsx)(i.C1y,{})});case"n/a":return null;default:if(t)return(0,T.jsx)(i.azJ,{sx:{color:"#C72C48"},children:(0,T.jsx)(i.m_M,{tooltip:t,placement:"top",children:(0,T.jsx)(i.cJw,{})})})}return null},Z=(e,t)=>{const n=[...O];n[e]=t,V(n)},G=e=>{let t=[...c],n=[...O];null===e||void 0===e||e.forEach(e=>{const s=f()(e,"errorString","");if(!s||""===s){const s=t.indexOf(e.originBucket||"");t.splice(s,1),n.splice(s,1)}}),o(t),V(n)};return(0,T.jsx)(R.A,{modalOpen:t,onClose:()=>{n(!1)},title:"Set Multiple Bucket Replication",children:(0,T.jsx)(i.sQ4,{loadingStep:u||x,wizardSteps:[{label:"Remote Configuration",componentRender:(0,T.jsx)(s.Fragment,{children:(0,T.jsxs)(i.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,T.jsx)(i.EmB,{label:"Local Buckets to replicate",sx:{maxWidth:"440px",width:"100%"},children:c.join(", ")}),(0,T.jsx)("h4",{children:"Remote Endpoint Configuration"}),(0,T.jsxs)("span",{style:{fontSize:14},children:["Please avoid the use of root credentials for this feature",(0,T.jsx)("br",{}),(0,T.jsx)("br",{})]}),(0,T.jsx)(i.cl_,{id:"accessKey",name:"accessKey",onChange:e=>{j(e.target.value)},label:"Access Key",value:b}),(0,T.jsx)(i.cl_,{id:"secretKey",name:"secretKey",onChange:e=>{v(e.target.value)},label:"Secret Key",value:k}),(0,T.jsx)(i.cl_,{id:"targetURL",name:"targetURL",onChange:e=>{S(e.target.value)},placeholder:"play.min.io:9000",label:"Target URL",value:C}),(0,T.jsx)(i.dOG,{checked:B,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:e=>{w(e.target.checked)},value:"yes"}),(0,T.jsx)(i.cl_,{id:"region",name:"region",onChange:e=>{A(e.target.value)},label:"Region",value:y}),(0,T.jsx)(i.l6P,{id:"replication_mode",name:"replication_mode",onChange:e=>{N(e)},label:"Replication Mode",value:E,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]}),"async"===E&&(0,T.jsx)(i.cl_,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:e=>{e.target.validity.valid&&U(e.target.value)},label:"Bandwidth",value:F,min:"0",pattern:"[0-9]*",overlayObject:(0,T.jsx)(L.A,{id:"quota_unit",onUnitChange:e=>{K(e)},unitSelected:z,unitsList:(0,_.l9)(["Ki"]),disabled:!1})}),(0,T.jsx)(i.cl_,{id:"healthCheck",name:"healthCheck",onChange:e=>{I(e.target.value)},label:"Health Check Duration",value:M})]})}),buttons:[{type:"custom",label:"Next",enabled:!x,action:e=>{const t={accessKey:b,secretKey:k,targetURL:C,useTLS:B};p(!0),m.F.listExternalBuckets.listExternalBuckets(t).then(t=>{const n=f()(t.data,"buckets",[]);if(n&&n.length>0){const e=n.map(e=>e.name);J(e)}e("++"),p(!1)}).catch(e=>{p(!1),l((0,r.Dy)((0,g.S)(e.error)))})}}]},{label:"Bucket Assignments",componentRender:(0,T.jsxs)(s.Fragment,{children:[(0,T.jsx)("h3",{children:"Remote Bucket Assignments"}),(0,T.jsx)("span",{style:{fontSize:14},children:"Please select / type the desired remote bucket were you want the local data to be replicated."}),(0,T.jsx)(i.azJ,{sx:{display:"grid",gridTemplateColumns:"auto auto 45px",alignItems:"center",justifyContent:"stretch","& .hide":{opacity:0,transitionDuration:"0.3s"}},children:c.map((e,t)=>{const n=(e=>{if(P&&P.length>0){const t=P.find(t=>t.originBucket===e);if(t){return f()(t,"errorString","")||""}}return"n/a"})(e);return(0,T.jsxs)(s.Fragment,{children:[(0,T.jsx)("div",{className:""===n?"hide":"",children:e}),(0,T.jsx)("div",{className:""===n?"hide":"",children:(a=t,D.length>0?(0,T.jsx)(s.Fragment,{children:(0,T.jsx)(i.l6P,{label:"",id:"assign-bucket-".concat(a),name:"assign-bucket-".concat(a),value:O[a],onChange:e=>{Z(a,e)},options:$,disabled:u})}):(0,T.jsx)(s.Fragment,{children:(0,T.jsx)(i.cl_,{id:"assign-bucket-".concat(a),name:"assign-bucket-".concat(a),label:"",onChange:e=>{Z(a,e.target.value)},value:O[a],disabled:u})}))}),(0,T.jsx)("div",{className:""===n?"hide":"",children:P&&P.length>0&&(0,T.jsx)(q,{errString:n})})]},"buckets-assignation-".concat(t.toString(),"-").concat(e));var a})})]}),buttons:[{type:"back",label:"Back",enabled:!0},{type:"next",label:"Create",enabled:!u,action:()=>{h(!0);const e=c.map((e,t)=>({originBucket:e,destinationBucket:O[t]})),t="".concat(B?"https://":"http://").concat(C),s=parseInt(M),a={accessKey:b,secretKey:k,targetURL:t,region:y,bucketsRelation:e,syncMode:E,bandwidth:"async"===E?parseInt((0,_.q5)(F,z,!0)):0,healthCheckPeriod:s};m.F.bucketsReplication.setMultiBucketReplication(a).then(e=>{h(!1);const t=e.data.replicationState;W(t);const s=null===t||void 0===t?void 0:t.filter(e=>e.errorString&&""!==e.errorString);0===(null===s||void 0===s?void 0:s.length)?n(!0):setTimeout(()=>{G(t)},500)}).catch(e=>{h(!1),l((0,r.Dy)((0,g.S)(e.error)))})}}]}],forModal:!0})})},F=()=>{const e=(0,d.jL)(),t=(0,a.Zp)(),[n,S]=(0,s.useState)([]),[f,y]=(0,s.useState)(!0),[A,_]=(0,s.useState)(""),[B,w]=(0,s.useState)([]),[R,L]=(0,s.useState)(!1),[F,U]=(0,s.useState)(!1),z=(0,u.d4)(h.s$),K=!(null===z||void 0===z||!z.includes("object-browser-only"));(0,s.useEffect)(()=>{e((0,r.ph)("ob_bucket_list"))},[e]),(0,s.useEffect)(()=>{if(f){(()=>{y(!0),m.F.buckets.listBuckets().then(t=>{t.data?(y(!1),S(t.data.buckets||[])):t.error&&(y(!1),e((0,r.C9)((0,g.S)(t.error))))})})()}},[f,e]);const M=n.filter(e=>""===A||e.name.indexOf(A)>=0),I=n.length>0,O=e=>{const t=e.target,n=t.value,s=t.checked;let a=[...B];return s?a.push(n):a=a.filter(e=>e!==n),w(a),a},V=(0,C.A)("*",[o.OV.S3_CREATE_BUCKET]),D=(0,C.A)("*",[o.OV.S3_LIST_BUCKET,o.OV.S3_ALL_LIST_BUCKET]);return(0,T.jsxs)(s.Fragment,{children:[R&&(0,T.jsx)(N,{open:R,buckets:B,closeModalAndRefresh:e=>{L(!1),e&&w([])}}),!K&&(0,T.jsx)(x.A,{label:"Buckets",actions:(0,T.jsx)(p.A,{})}),(0,T.jsxs)(i.Mxu,{children:[(0,T.jsxs)(i.xA9,{item:!0,xs:12,sx:l._0.actionsTray,children:[K&&(0,T.jsx)(i.xA9,{item:!0,xs:!0,children:(0,T.jsx)(b.A,{marginRight:15,marginTop:10})}),I&&(0,T.jsx)(k.A,{onChange:_,placeholder:"Search Buckets",value:A,sx:{minWidth:380,["@media (max-width: ".concat(i.nmC.md,"px)")]:{minWidth:220}}}),(0,T.jsxs)(i.xA9,{item:!0,xs:12,sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:5},children:[!K&&(0,T.jsxs)(s.Fragment,{children:[(0,T.jsx)(j.A,{tooltip:I?F?"Unselect Buckets":"Select Multiple Buckets":"",children:(0,T.jsx)(i.$nd,{id:"multiple-bucket-seection",onClick:()=>{U(!F),w([])},icon:(0,T.jsx)(i.IN,{}),variant:F?"callAction":"regular",disabled:!I})}),F&&(0,T.jsx)(j.A,{tooltip:I?B.length===M.length?"Unselect All Buckets":"Select All Buckets":"",children:(0,T.jsx)(i.$nd,{id:"select-all-buckets",onClick:()=>{if(B.length===M.length)return void w([]);const e=M.map(e=>e.name);w(e)},icon:(0,T.jsx)(i.nhX,{}),variant:"regular"})}),(0,T.jsx)(j.A,{tooltip:I?0===B.length?F?"Please select at least one bucket on which to configure Replication":"Use the Select Multiple Buckets button to choose buckets on which to configure Replication":"Set Replication":"",children:(0,T.jsx)(i.$nd,{id:"set-replication",onClick:()=>{L(!0)},icon:(0,T.jsx)(i.hwo,{}),variant:"regular",disabled:0===B.length})})]}),(0,T.jsx)(j.A,{tooltip:"Refresh",children:(0,T.jsx)(i.$nd,{id:"refresh-buckets",onClick:()=>{y(!0)},icon:(0,T.jsx)(i.fNY,{}),variant:"regular"})}),!K&&(0,T.jsx)(j.A,{tooltip:V?"":(0,o.vj)([o.OV.S3_CREATE_BUCKET],"create a bucket"),children:(0,T.jsx)(i.$nd,{id:"create-bucket",onClick:()=>{t(o.zZ.ADD_BUCKETS)},icon:(0,T.jsx)(i.REV,{}),variant:"callAction",disabled:!V,label:"Create Bucket"})})]})]}),f&&(0,T.jsx)(i.z21,{}),!f&&(0,T.jsxs)(i.xA9,{item:!0,xs:12,sx:{marginTop:25,height:"calc(100vh - 211px)","&.isEmbedded":{height:"calc(100vh - 128px)"}},className:K?"isEmbedded":"",children:[0!==M.length&&(0,T.jsx)(v.A,{rowRenderFunction:e=>{const t=M[e]||null;return t?(0,T.jsx)(E,{bucket:t,onSelect:O,selected:B.includes(t.name),bulkSelect:F}):null},totalItems:M.length}),0===M.length&&""!==A&&(0,T.jsx)(i.xA9,{container:!0,children:(0,T.jsx)(i.xA9,{item:!0,xs:8,children:(0,T.jsx)(i.lVp,{iconComponent:(0,T.jsx)(i.brV,{}),title:"No Results",help:(0,T.jsx)(s.Fragment,{children:"No buckets match the filtering condition"})})})}),!I&&(0,T.jsx)(i.xA9,{container:!0,children:(0,T.jsx)(i.xA9,{item:!0,xs:8,children:(0,T.jsx)(i.lVp,{iconComponent:(0,T.jsx)(i.brV,{}),title:"Buckets",help:(0,T.jsxs)(s.Fragment,{children:["MinIO uses buckets to organize objects. A bucket is similar to a folder or directory in a filesystem, where each bucket can hold an arbitrary number of objects.",(0,T.jsx)("br",{}),D?"":(0,T.jsxs)(s.Fragment,{children:[(0,T.jsx)("br",{}),(0,o.vj)([o.OV.S3_LIST_BUCKET,o.OV.S3_ALL_LIST_BUCKET],"view the buckets on this server"),(0,T.jsx)("br",{})]}),(0,T.jsxs)(c.R,{scopes:[o.OV.S3_CREATE_BUCKET],resource:o.Ms,children:[(0,T.jsx)("br",{}),"To get started,\xa0",(0,T.jsx)(i.t53,{onClick:()=>{t(o.zZ.ADD_BUCKETS)},children:"Create a Bucket."})]})]})})})})]})]})]})}},94141:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(65043),a=n(22166),i=n(89923),l=n(21383),c=n(64159),o=n(49555),r=n(70579);const d=e=>{let{onClose:t,modalOpen:n,title:d,children:u,wideLimit:h=!0,titleIcon:x=null,iconColor:m="default",sx:g}=e;const p=(0,l.jL)(),[b,j]=(0,s.useState)(!1),k=(0,a.d4)(e=>e.system.modalSnackBar);(0,s.useEffect)(()=>{p((0,c.h0)(""))},[p]),(0,s.useEffect)(()=>{if(k){if(""===k.message)return void j(!1);"error"!==k.type&&j(!0)}},[k]);let v="";return k&&(v=k.detailedErrorMsg,(""===v||v&&v.length<5)&&(v=k.message)),(0,r.jsxs)(i.ngX,{onClose:t,open:n,title:d,titleIcon:x,widthLimit:h,sx:g,iconColor:m,children:[(0,r.jsx)(o.A,{isModal:!0}),(0,r.jsx)(i.qb_,{onClose:()=>{j(!1),p((0,c.h0)(""))},open:b,message:v,mode:"inline",variant:"error"===k.type?"error":"default",autoHideDuration:"error"===k.type?10:5,condensed:!0}),u]})}}}]);
//# sourceMappingURL=3298.ee96f80d.chunk.js.map