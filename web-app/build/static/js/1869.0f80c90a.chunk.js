"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[1869],{32680:(e,t,l)=>{l.d(t,{A:()=>d});var a=l(9950),s=l(98341),n=l(89132),i=l(99491),o=l(49078),r=l(96382),c=l(44414);const d=e=>{let{onClose:t,modalOpen:l,title:d,children:u,wideLimit:x=!0,titleIcon:m=null,iconColor:h="default",sx:f}=e;const p=(0,i.jL)(),[b,j]=(0,a.useState)(!1),v=(0,s.d4)(e=>e.system.modalSnackBar);(0,a.useEffect)(()=>{p((0,o.h0)(""))},[p]),(0,a.useEffect)(()=>{if(v){if(""===v.message)return void j(!1);"error"!==v.type&&j(!0)}},[v]);let g="";return v&&(g=v.detailedErrorMsg,(""===g||g&&g.length<5)&&(g=v.message)),(0,c.jsxs)(n.ngX,{onClose:t,open:l,title:d,titleIcon:m,widthLimit:x,sx:f,iconColor:h,children:[(0,c.jsx)(r.A,{isModal:!0}),(0,c.jsx)(n.qb_,{onClose:()=>{j(!1),p((0,o.h0)(""))},open:b,message:g,mode:"inline",variant:"error"===v.type?"error":"default",autoHideDuration:"error"===v.type?10:5,condensed:!0}),u]})}},81869:(e,t,l)=>{l.r(t),l.d(t,{default:()=>m});var a=l(89379),s=l(9950),n=l(89132),i=l(49078),o=l(99491),r=l(70444),c=l(5501),d=l(32680),u=l(45246),x=l(44414);const m=e=>{let{open:t,selectedBucket:l,closeModalAndRefresh:m}=e;const h=(0,o.jL)(),[f,p]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[v,g]=(0,s.useState)(""),[A,C]=(0,s.useState)(""),[S,k]=(0,s.useState)([]),[E,y]=(0,s.useState)([]),w=(0,s.useCallback)(()=>{p(!0),r.F.admin.arnList().then(e=>{null!==e.data.arns&&y(e.data.arns),p(!1)}).catch(e=>{p(!1),h((0,i.Dy)(e))})},[h]);(0,s.useEffect)(()=>{w()},[w]);const R=[{label:"PUT - Object Uploaded",value:c.Wj.Put},{label:"GET - Object accessed",value:c.Wj.Get},{label:"DELETE - Object Deleted",value:c.Wj.Delete},{label:"REPLICA - Object Replicated",value:c.Wj.Replica},{label:"ILM - Object Transitioned",value:c.Wj.Ilm},{label:"SCANNER - Object has too many versions / Prefixes has too many sub-folders",value:c.Wj.Scanner}],I=null===E||void 0===E?void 0:E.map(e=>({label:e,value:e}));return(0,x.jsx)(d.A,{modalOpen:t,onClose:()=>{m()},title:"Subscribe To Bucket Events",titleIcon:(0,x.jsx)(n.VDx,{}),children:(0,x.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),f||(p(!0),r.F.buckets.createBucketEvent(l,{configuration:{arn:A,events:S,prefix:b,suffix:v},ignoreExisting:!0}).then(()=>{p(!1),m()}).catch(e=>{p(!1),h((0,i.Dy)(e))}))},children:(0,x.jsxs)(n.xA9,{container:!0,children:[(0,x.jsxs)(n.xA9,{item:!0,xs:12,sx:u.a_.formScrollable,children:[(0,x.jsx)(n.xA9,{item:!0,xs:12,sx:(0,a.A)((0,a.A)({},u.h$.formFieldRow),{},{"& div div .MuiOutlinedInput-root":{padding:0}}),children:(0,x.jsx)(n.jT8,{onChange:e=>{C(e)},id:"select-access-policy",name:"select-access-policy",label:"ARN",value:A,options:I||[],helpTip:(0,x.jsx)(s.Fragment,{children:(0,x.jsx)("a",{target:"blank",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/reference-arns.html",children:"Amazon Resource Name"})})})}),(0,x.jsx)(n.xA9,{item:!0,xs:12,sx:u.h$.formFieldRow,children:(0,x.jsx)(n.cl_,{id:"prefix-input",name:"prefix-input",label:"Prefix",value:b,onChange:e=>{j(e.target.value)}})}),(0,x.jsx)(n.xA9,{item:!0,xs:12,sx:u.h$.formFieldRow,children:(0,x.jsx)(n.cl_,{id:"suffix-input",name:"suffix-input",label:"Suffix",value:v,onChange:e=>{g(e.target.value)}})}),(0,x.jsx)(n.xA9,{item:!0,xs:12,sx:u.h$.formFieldRow,children:(0,x.jsx)(n.bQt,{columns:[{label:"Event",elementKey:"label"}],idField:"value",records:R,onSelect:e=>{const t=e.target,l=t.value,a=t.checked;let s=[...S];a?s.push(l):s=s.filter(e=>e!==l),k(s)},selectedItems:S,noBackground:!0,customPaperHeight:"260px"})})]}),(0,x.jsxs)(n.xA9,{item:!0,xs:12,sx:u.Uz.modalButtonBar,children:[(0,x.jsx)(n.$nd,{id:"cancel-add-event",type:"button",variant:"regular",disabled:f,onClick:()=>{m()},label:"Cancel"}),(0,x.jsx)(n.$nd,{id:"save-event",type:"submit",variant:"callAction",disabled:f||""===A||0===S.length,label:"Save"})]})]})})})}}}]);