"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[669],{40669:(e,s,t)=>{t.r(s),t.d(s,{default:()=>R});var a=t(89379),n=t(9950),r=t(89132),o=t(98341),l=t(28429),i=t(45246),c=t(32680),d=t(49078),u=t(99491),h=t(70444),x=t(48965),p=t(44414);const m=e=>{let{open:s,closeModal:t}=e;const o=(0,u.jL)(),[l,m]=(0,n.useState)(""),[g,j]=(0,n.useState)(""),[w,A]=(0,n.useState)(""),[y,b]=(0,n.useState)(!1),C=localStorage.getItem("userLoggedIn")||"";return s?(0,p.jsxs)(c.A,{title:"Change Password for ".concat(C),modalOpen:s,onClose:()=>{j(""),A(""),m(""),t()},titleIcon:(0,p.jsx)(r.Fwq,{}),children:[(0,p.jsx)("div",{children:"This will change your Console password. Please note your new password down, as it will be required to log into Console after this session."}),(0,p.jsx)(r.Wei,{variant:"warning",title:"Warning",message:(0,p.jsxs)(n.Fragment,{children:["If you are looking to change MINIO_ROOT_USER credentials, ",(0,p.jsx)("br",{}),"Please refer to"," ",(0,p.jsx)("a",{target:"_blank",rel:"noopener",href:"https://min.io/docs/minio/linux/administration/identity-access-management/minio-user-management.html#id4",children:"rotating"})," ","credentials."]}),sx:{margin:"15px 0"}}),(0,p.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{if(e.preventDefault(),g!==w)return void o((0,d.Dy)({errorMessage:"New passwords don't match",detailedError:""}));if(g.length<8)return void o((0,d.Dy)({errorMessage:"Passwords must be at least 8 characters long",detailedError:""}));if(y)return;b(!0);let s={current_secret_key:l,new_secret_key:g};h.F.account.accountChangePassword(s).then(()=>{b(!1),j(""),A(""),m(""),o((0,d.Hk)("Successfully updated the password.")),t()}).catch(async e=>{b(!1),j(""),A(""),m("");const s=await e.json();o((0,d.C9)((0,x.S)(s)))})})(e)},children:(0,p.jsxs)(r.xA9,{container:!0,children:[(0,p.jsx)(r.xA9,{item:!0,xs:12,sx:(0,a.A)({},i.Uz.modalFormScrollable),children:(0,p.jsxs)(r.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,p.jsx)(r.cl_,{id:"current-password",name:"current-password",onChange:e=>{m(e.target.value)},label:"Current Password",type:"password",value:l}),(0,p.jsx)(r.cl_,{id:"new-password",name:"new-password",onChange:e=>{j(e.target.value)},label:"New Password",type:"password",value:g}),(0,p.jsx)(r.cl_,{id:"re-new-password",name:"re-new-password",onChange:e=>{A(e.target.value)},label:"Type New Password Again",type:"password",value:w})]})}),(0,p.jsx)(r.xA9,{item:!0,xs:12,sx:(0,a.A)({},i.Uz.modalButtonBar),children:(0,p.jsx)(r.$nd,{id:"save-password-modal",type:"submit",variant:"callAction",color:"primary",disabled:y||!(l.length>0&&g.length>0&&w.length>0),label:"Save"})}),y&&(0,p.jsx)(r.xA9,{item:!0,xs:12,children:(0,p.jsx)(r.z21,{})})]})})]}):null};var g=t(27428),j=t(55604),w=t(7174),A=t(43878),y=t(85743),b=t(86070),C=t(30272),v=t(82817),f=t(98167),S=t(42677),k=t(20416),_=t(26843),E=t(93598);const M=(0,j.A)(n.lazy(()=>t.e(7958).then(t.bind(t,77958)))),R=()=>{const e=(0,u.jL)(),s=(0,l.Zp)(),t=(0,o.d4)(b.s$),[c,j]=(0,n.useState)([]),[R,I]=(0,n.useState)(!1),[K,O]=(0,n.useState)(""),[P,D]=(0,n.useState)(!1),[N,T]=(0,n.useState)(null),[F,L]=(0,n.useState)(!1),[U,z]=(0,n.useState)([]),[V,$]=(0,n.useState)(!1),[W,B]=(0,n.useState)(!1),H=t&&t.includes("external-idp")||!1;(0,n.useEffect)(()=>{J()},[]),(0,n.useEffect)(()=>{e((0,d.ph)("accessKeys"))},[]),(0,n.useEffect)(()=>{R&&h.F.serviceAccounts.listUserServiceAccounts().then(e=>{I(!1);const s=e.data.sort(k.LA);j(s)}).catch(s=>{e((0,d.C9)((0,x.S)((null===s||void 0===s?void 0:s.error)||"Error retrieving access keys"))),I(!1)})},[R,I,j,e]);const J=()=>{I(!0)},q=e=>{T(e),B(!0)},Q=[{type:"view",onClick:e=>{e&&q(e.accessKey)}},{type:"delete",onClick:e=>{e&&(e=>{T(e),D(!0)})(e.accessKey)}},{type:"edit",onClick:e=>{e&&q(e.accessKey)}}],Y=c.filter(e=>{var s;return null===e||void 0===e||null===(s=e.accessKey)||void 0===s?void 0:s.toLowerCase().includes(K.toLowerCase())});return(0,p.jsxs)(n.Fragment,{children:[P&&(0,p.jsx)(M,{deleteOpen:P,selectedServiceAccount:N,closeDeleteModalAndRefresh:e=>{(e=>{D(!1),e&&(z([]),J())})(e)}}),V&&(0,p.jsx)(A.A,{deleteOpen:V,selectedSAs:U,closeDeleteModalAndRefresh:s=>{$(!1),s&&(e((0,d.Hk)("Access keys deleted successfully.")),z([]),I(!0))}}),W&&(0,p.jsx)(y.A,{open:W,selectedAccessKey:N,closeModalAndRefresh:()=>{B(!1),I(!0)}}),(0,p.jsx)(m,{open:F,closeModal:()=>L(!1)}),(0,p.jsx)(v.A,{label:"Access Keys",actions:(0,p.jsx)(f.A,{})}),(0,p.jsx)(r.Mxu,{children:(0,p.jsxs)(r.xA9,{container:!0,children:[(0,p.jsxs)(r.xA9,{item:!0,xs:12,sx:(0,a.A)({},i._0.actionsTray),children:[(0,p.jsx)(g.A,{placeholder:"Search Access Keys",onChange:O,sx:{marginRight:"auto",maxWidth:380},value:K}),(0,p.jsxs)(r.azJ,{sx:{display:"flex",flexWrap:"nowrap",gap:5},children:[(0,p.jsx)(C.A,{tooltip:"Delete Selected",children:(0,p.jsx)(r.$nd,{id:"delete-selected-accounts",onClick:()=>{$(!0)},label:"Delete Selected",icon:(0,p.jsx)(r.d7y,{}),disabled:0===U.length,variant:"secondary"})}),(0,p.jsx)(_.R,{scopes:[E.OV.ADMIN_CREATE_USER],resource:E.Ms,matchAll:!0,errorProps:{disabled:!0},children:(0,p.jsx)(r.$nd,{id:"change-password",onClick:()=>L(!0),label:"Change Password",icon:(0,p.jsx)(r.aJN,{}),variant:"regular",disabled:H})}),(0,p.jsx)(_.R,{scopes:[E.OV.ADMIN_CREATE_SERVICEACCOUNT],resource:E.Ms,matchAll:!0,errorProps:{disabled:!0},children:(0,p.jsx)(r.$nd,{id:"create-service-account",onClick:()=>{s("".concat(E.zZ.ACCOUNT_ADD))},label:"Create access key",icon:(0,p.jsx)(r.REV,{}),variant:"callAction"})})]})]}),(0,p.jsx)(r.xA9,{item:!0,xs:12,children:(0,p.jsx)(r.bQt,{itemActions:Q,entityName:"Access Keys",columns:S.X,onSelect:e=>(0,w.Qm)(e,z,U),selectedItems:U,isLoading:R,records:Y,idField:"accessKey"})}),(0,p.jsx)(r.xA9,{item:!0,xs:12,sx:{marginTop:15},children:(0,p.jsx)(r.lVp,{title:"Learn more about ACCESS KEYS",iconComponent:(0,p.jsx)(r.JMb,{}),help:(0,p.jsxs)(n.Fragment,{children:["MinIO access keys are child identities of an authenticated MinIO user, including externally managed identities. Each access key inherits its privileges based on the policies attached to it\u2019s parent user or those groups in which the parent user has membership. Access Keys also support an optional inline policy which further restricts access to a subset of actions and resources available to the parent user.",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"You can learn more at our"," ",(0,p.jsx)("a",{href:"https://min.io/docs/minio/linux/administration/identity-access-management/minio-user-management.html#id3",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})})]})})]})}}}]);