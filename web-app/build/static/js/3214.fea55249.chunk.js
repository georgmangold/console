"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[3214],{32680:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(9950),i=n(98341),o=n(89132),r=n(99491),l=n(49078),s=n(96382),c=n(44414);const d=e=>{let{onClose:t,modalOpen:n,title:d,children:u,wideLimit:m=!0,titleIcon:b=null,iconColor:p="default",sx:h}=e;const g=(0,r.jL)(),[j,f]=(0,a.useState)(!1),x=(0,i.d4)(e=>e.system.modalSnackBar);(0,a.useEffect)(()=>{g((0,l.h0)(""))},[g]),(0,a.useEffect)(()=>{if(x){if(""===x.message)return void f(!1);"error"!==x.type&&f(!0)}},[x]);let v="";return x&&(v=x.detailedErrorMsg,(""===v||v&&v.length<5)&&(v=x.message)),(0,c.jsxs)(o.ngX,{onClose:t,open:n,title:d,titleIcon:b,widthLimit:m,sx:h,iconColor:p,children:[(0,c.jsx)(s.A,{isModal:!0}),(0,c.jsx)(o.qb_,{onClose:()=>{f(!1),g((0,l.h0)(""))},open:j,message:v,mode:"inline",variant:"error"===x.type?"error":"default",autoHideDuration:"error"===x.type?10:5,condensed:!0}),u]})}},43214:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var a=n(9950),i=n(89132),o=n(70444),r=n(5501),l=n(48965),s=n(45246),c=n(49078),d=n(99491),u=n(32680),m=n(44414);const b=e=>{let{open:t,bucketName:n,closeModalAndRefresh:b}=e;const p=(0,d.jL)(),[h,g]=(0,a.useState)(!1),[j,f]=(0,a.useState)(!0),[x,v]=(0,a.useState)(r.BT.Compliance),[y,C]=(0,a.useState)(r.wg.Days),[k,S]=(0,a.useState)(1),[w,_]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{Number.isNaN(k)||(k||1)<1?_(!1):_(!0)},[k]),(0,a.useEffect)(()=>{j&&o.F.buckets.getBucketRetentionConfig(n).then(e=>{f(!1),v(e.data.mode),S(e.data.validity),C(e.data.unit)}).catch(()=>{f(!1)})},[j,n]),(0,m.jsx)(u.A,{title:"Set Retention Configuration",modalOpen:t,onClose:()=>{b()},children:j?(0,m.jsx)(i.aHM,{style:{width:16,height:16}}):(0,m.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{e.preventDefault(),h||(g(!0),o.F.buckets.setBucketRetentionConfig(n,{mode:x||r.BT.Compliance,unit:y||r.wg.Days,validity:k||1}).then(()=>{g(!1),b()}).catch(e=>{g(!1),p((0,c.Dy)((0,l.S)(e.error)))}))},children:(0,m.jsxs)(i.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,m.jsx)(i.z6M,{currentValue:x,id:"retention_mode",name:"retention_mode",label:"Retention Mode",onChange:e=>{v(e.target.value)},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}],helpTip:(0,m.jsxs)(a.Fragment,{children:[" ",(0,m.jsx)("a",{href:"https://docs.min.io/community/minio-object-store/administration/object-management/object-retention.html#compliance-mode",target:"blank",children:"Compliance"})," ","lock protects Objects from write operations by all users, including the MinIO root user.",(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),(0,m.jsx)("a",{href:"https://docs.min.io/community/minio-object-store/administration/object-management/object-retention.html#governance-mode",target:"blank",children:"Governance"})," ","lock protects Objects from write operations by non-privileged users."]}),helpTipPlacement:"right"}),(0,m.jsx)(i.z6M,{currentValue:y,id:"retention_unit",name:"retention_unit",label:"Retention Unit",onChange:e=>{C(e.target.value)},selectorOptions:[{value:"days",label:"Days"},{value:"years",label:"Years"}]}),(0,m.jsx)(i.cl_,{type:"number",id:"retention_validity",name:"retention_validity",onChange:e=>{S(e.target.valueAsNumber)},label:"Retention Validity",value:String(k),required:!0,min:"1"}),(0,m.jsxs)(i.xA9,{item:!0,xs:12,sx:s.Uz.modalButtonBar,children:[(0,m.jsx)(i.$nd,{id:"cancel",type:"button",variant:"regular",disabled:h,onClick:()=>{b()},label:"Cancel"}),(0,m.jsx)(i.$nd,{id:"set",type:"submit",variant:"callAction",color:"primary",disabled:h||!w,label:"Set"})]}),h&&(0,m.jsx)(i.xA9,{item:!0,xs:12,children:(0,m.jsx)(i.z21,{})})]})})})}}}]);