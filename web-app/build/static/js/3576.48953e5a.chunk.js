"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[3576],{73576:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var i=n(9950),l=n(98341),s=n(28429),c=n(89132),o=n(2586),r=n(26843),a=n(93598),d=n(49078),u=n(47304),h=n(99491),p=n(30272),b=n(55604),m=n(44414);const x=(0,b.A)(i.lazy(()=>n.e(5503).then(n.bind(n,15503)))),A=(0,b.A)(i.lazy(()=>n.e(116).then(n.bind(n,30116)))),j=(0,b.A)(i.lazy(()=>n.e(4599).then(n.bind(n,14599)))),R=()=>{const e=(0,h.jL)(),t=(0,s.g)(),n=(0,l.d4)(u.Nx),[b,R]=(0,i.useState)(!0),[_,O]=(0,i.useState)([]),[I,S]=(0,i.useState)(!1),[T,g]=(0,i.useState)(!1),[k,N]=(0,i.useState)(!1),[C,y]=(0,i.useState)(""),[f,P]=(0,i.useState)([]),[E,v]=(0,i.useState)(!1),F=t.bucketName||"",V=(0,r._)(F,[a.OV.S3_GET_REPLICATION_CONFIGURATION,a.OV.S3_GET_ACTIONS]);(0,i.useEffect)(()=>{e((0,d.ph)("bucket_detail_replication"))},[]),(0,i.useEffect)(()=>{n&&R(!0)},[n,R]),(0,i.useEffect)(()=>{b&&(V?o.A.invoke("GET","/api/v1/buckets/".concat(F,"/replication")).then(e=>{const t=e.rules?e.rules:[];t.sort((e,t)=>e.priority-t.priority),O(t),R(!1)}).catch(t=>{e((0,d.C9)(t)),R(!1)}):R(!1))},[b,e,F,V]);const w=function(){g(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},U=(0,s.Zp)(),G=[{type:"delete",onClick:e=>{y(e.id),v(!1),S(!0)}},{type:"view",onClick:e=>{y(e.id),U("/buckets/edit-replication?bucketName=".concat(F,"&ruleID=").concat(e.id))},disableButtonFunction:!(0,r._)(F,[a.OV.S3_PUT_REPLICATION_CONFIGURATION,a.OV.S3_PUT_ACTIONS],!0)}];return(0,m.jsxs)(i.Fragment,{children:[T&&(0,m.jsx)(A,{closeModalAndRefresh:()=>{w(!1),R(!0)},open:T,bucketName:F,setReplicationRules:_}),I&&(0,m.jsx)(j,{deleteOpen:I,selectedBucket:F,closeDeleteModalAndRefresh:e=>{S(!1),e&&R(!0)},ruleToDelete:C,rulesToDelete:f,remainingRules:_.length,allSelected:_.length>0&&f.length===_.length,deleteSelectedRules:E}),k&&(0,m.jsx)(x,{closeModalAndRefresh:e=>{N(!1),e&&R(!0)},open:k,bucketName:F,ruleID:C}),(0,m.jsx)(c._xt,{separator:!0,sx:{marginBottom:15},actions:(0,m.jsxs)(c.azJ,{style:{display:"flex",gap:10},children:[(0,m.jsx)(r.R,{scopes:[a.OV.S3_PUT_REPLICATION_CONFIGURATION,a.OV.S3_PUT_ACTIONS],resource:F,matchAll:!0,errorProps:{disabled:!0},children:(0,m.jsx)(p.A,{tooltip:"Remove Selected Replication Rules",children:(0,m.jsx)(c.$nd,{id:"remove-bucket-replication-rule",onClick:()=>{y("selectedRules"),v(!0),S(!0)},label:"Remove Selected Rules",icon:(0,m.jsx)(c.ucK,{}),color:"secondary",disabled:0===f.length||0===_.length,variant:"secondary"})})}),(0,m.jsx)(r.R,{scopes:[a.OV.S3_PUT_REPLICATION_CONFIGURATION,a.OV.S3_PUT_ACTIONS],resource:F,matchAll:!0,errorProps:{disabled:!0},children:(0,m.jsx)(p.A,{tooltip:"Add Replication Rule",children:(0,m.jsx)(c.$nd,{id:"add-bucket-replication-rule",onClick:()=>{U(a.zZ.BUCKETS_ADD_REPLICATION+"?bucketName=".concat(F,"&nextPriority=").concat(_.length+1))},label:"Add Replication Rule",icon:(0,m.jsx)(c.REV,{}),variant:"callAction"})})})]}),children:(0,m.jsx)(c.V7x,{content:(0,m.jsxs)(i.Fragment,{children:["MinIO"," ",(0,m.jsx)("a",{target:"blank",href:"https://docs.min.io/community/minio-object-store/administration/bucket-replication.html",children:"server-side bucket replication"})," ","is an automatic bucket-level configuration that synchronizes objects between a source and destination bucket."]}),placement:"right",children:"Replication"})}),(0,m.jsxs)(c.xA9,{container:!0,children:[(0,m.jsx)(c.xA9,{item:!0,xs:12,children:(0,m.jsx)(r.R,{scopes:[a.OV.S3_GET_REPLICATION_CONFIGURATION,a.OV.S3_GET_ACTIONS],resource:F,errorProps:{disabled:!0},children:(0,m.jsx)(c.bQt,{itemActions:G,columns:[{label:"Priority",elementKey:"priority",width:55,contentTextAlign:"center"},{label:"Destination",elementKey:"destination",renderFunction:e=>(0,m.jsx)(i.Fragment,{children:e.bucket.replace("arn:aws:s3:::","")})},{label:"Prefix",elementKey:"prefix",width:200},{label:"Tags",elementKey:"tags",renderFunction:e=>(0,m.jsx)(i.Fragment,{children:e&&""!==e.tags?"Yes":"No"}),width:60},{label:"Status",elementKey:"status",width:100}],isLoading:b,records:_,entityName:"Replication Rules",idField:"id",customPaperHeight:"400px",textSelectable:!0,selectedItems:f,onSelect:e=>(e=>{const t=e.target,n=t.value,i=t.checked;let l=[...f];return i?l.push(n):l=l.filter(e=>e!==n),P(l),l})(e),onSelectAll:()=>{f.length!==_.length?P(_.map(e=>e.id)):P([])}})})}),(0,m.jsxs)(c.xA9,{item:!0,xs:12,children:[(0,m.jsx)("br",{}),(0,m.jsx)(c.lVp,{title:"Replication",iconComponent:(0,m.jsx)(c.brV,{}),help:(0,m.jsxs)(i.Fragment,{children:["MinIO supports server-side and client-side replication of objects between source and destination buckets.",(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),"You can learn more at the"," ",(0,m.jsx)("a",{href:"https://docs.min.io/community/minio-object-store/administration/bucket-replication.html",target:"_blank",rel:"noopener",children:"documentation"}),"."]})})]})]})]})}}}]);