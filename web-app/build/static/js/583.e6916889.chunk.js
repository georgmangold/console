"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[583],{23934:(e,t,n)=>{n.d(t,{A:()=>p});var s=n(9950),i=n(89132),a=n(49078),o=n(99491),r=n(49534),l=n(70444),c=n(48965),d=n(44414);const p=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,idp:p,idpType:u}=e;const f=(0,o.jL)(),[x,A]=(0,s.useState)(!1);if(!p)return null;const j="_"===p?"Default":p;return(0,d.jsx)(r.A,{title:"Delete ".concat(j),confirmText:"Delete",isOpen:n,titleIcon:(0,d.jsx)(i.xWY,{}),isLoading:x,onConfirm:()=>{A(!0),l.F.idp.deleteConfiguration(p,u).then(e=>{(e=>{t(!0),f((0,a.YR)(!0===e.restart))})(e.data)}).catch(e=>f((0,a.C9)((0,c.S)(e.error)))).finally(()=>A(!1))},onClose:()=>t(!1),confirmButtonProps:{disabled:x},confirmationContent:(0,d.jsxs)(s.Fragment,{children:["Are you sure you want to delete IDP ",(0,d.jsx)("b",{children:j})," ","configuration? ",(0,d.jsx)("br",{})]})})}},50583:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var s=n(9950),i=n(89379),a=n(89132),o=n(28429),r=n(70444),l=n(48965),c=n(99491),d=n(93598),p=n(26843),u=n(49078),f=n(45246),x=n(30272),A=n(23934),j=n(82817),C=n(70503),b=n(44414);const h=e=>{let{idpType:t}=e;const n=(0,c.jL)(),h=(0,o.Zp)(),[m,y]=(0,s.useState)(!1),[D,_]=(0,s.useState)(""),[O,g]=(0,s.useState)(!1),[I,M]=(0,s.useState)([]),N=(0,p._)(d.Ms,[d.OV.ADMIN_CONFIG_UPDATE]),F=(0,p._)(d.Ms,[d.OV.ADMIN_CONFIG_UPDATE]),T=(0,p._)(d.Ms,[d.OV.ADMIN_CONFIG_UPDATE]);(0,s.useEffect)(()=>{E()},[]),(0,s.useEffect)(()=>{O&&(T?r.F.idp.listConfigurations(t).then(e=>{g(!1),e.data.results&&M(e.data.results.map(e=>(e.name="_"===e.name?"Default":e.name,e.enabled=!0===e.enabled?"Enabled":"Disabled",e)))}).catch(e=>{g(!1),n((0,u.C9)((0,l.S)(e.error)))}):g(!1))},[O,g,M,n,T,t]);const E=()=>{g(!0)},P=[{type:"view",onClick:e=>{let n="Default"===e.name?"_":e.name;h("/identity/idp/".concat(t,"/configurations/").concat(n))},disableButtonFunction:()=>!F},{type:"delete",onClick:e=>{y(!0),_(e="Default"===e?"_":e)},sendOnlyId:!0,disableButtonFunction:e=>!N||"Default"===e}];return(0,s.useEffect)(()=>{n((0,u.ph)("idp_configs"))},[]),(0,b.jsxs)(s.Fragment,{children:[m&&(0,b.jsx)(A.A,{deleteOpen:m,idp:D,idpType:t,closeDeleteModalAndRefresh:async e=>{y(!1),e&&E()}}),(0,b.jsx)(j.A,{label:"".concat(t.toUpperCase()," Configurations"),actions:(0,b.jsx)(C.A,{})}),(0,b.jsx)(a.Mxu,{children:(0,b.jsxs)(a.xA9,{container:!0,children:[(0,b.jsxs)(a.xA9,{item:!0,xs:12,sx:(0,i.A)((0,i.A)({},f._0.actionsTray),{},{justifyContent:"flex-end",gap:8}),children:[(0,b.jsx)(p.R,{scopes:[d.OV.ADMIN_CONFIG_UPDATE],resource:d.Ms,errorProps:{disabled:!0},children:(0,b.jsx)(x.A,{tooltip:"Refresh",children:(0,b.jsx)(a.$nd,{id:"refresh-keys",variant:"regular",icon:(0,b.jsx)(a.fNY,{}),onClick:()=>g(!0)})})}),(0,b.jsx)(p.R,{scopes:[d.OV.ADMIN_CONFIG_UPDATE],resource:d.Ms,errorProps:{disabled:!0},children:(0,b.jsx)(x.A,{tooltip:"Create ".concat(t," configuration"),children:(0,b.jsx)(a.$nd,{id:"create-idp",label:"Create Configuration",variant:"callAction",icon:(0,b.jsx)(a.REV,{}),onClick:()=>h("/identity/idp/".concat(t,"/configurations/add-idp"))})})})]}),(0,b.jsx)(a.xA9,{item:!0,xs:12,children:(0,b.jsx)(p.R,{scopes:[d.OV.ADMIN_CONFIG_UPDATE],resource:d.Ms,errorProps:{disabled:!0},children:(0,b.jsx)(a.bQt,{itemActions:P,columns:[{label:"Name",elementKey:"name"},{label:"Type",elementKey:"type"},{label:"Enabled",elementKey:"enabled"}],isLoading:O,records:I,entityName:"Keys",idField:"name"})})})]})})]})},m=()=>(0,b.jsx)(h,{idpType:"openid"})}}]);