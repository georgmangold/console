"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[1634,4945],{3796:(e,t,n)=>{n.d(t,{_:()=>r});var s=n(59908),o=n(26347),i=n(45176),a=n(45536),l=n(49078);const r=(e,t,n,r)=>{var c;const d=encodeURIComponent("".concat(t,"-").concat(r.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),u=(0,s.oK)().toLowerCase().includes("win");if(((null===(c=r.name)||void 0===c?void 0:c.length)||0)>200&&u)return void e((0,a.Jl)(!0));const h=(0,o.E0)(8),m=(0,i.RG)(t,n,r.version_id,r.size||0,null,h,t=>{e((0,a.DW)({instanceID:d,progress:t}))},()=>{e((0,a.rx)(d))},t=>{e((0,a.iL)({instanceID:d,msg:t}))},()=>{e((0,a.Dm)(d))},()=>{e((0,l.Hk)("File download will be handled directly by the browser."))});(0,o.FP)(h,m),e((0,a.cP)({ID:h,bucketName:t,done:!1,instanceID:d,percentage:0,prefix:r.name||"",type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}},18949:(e,t,n)=>{n.d(t,{Ex:()=>p,HS:()=>h,mS:()=>m,op:()=>u,oz:()=>x});var s=n(11359),o=n(59908),i=n(26347),a=n(45176),l=n(45536),r=n(49078),c=n(43217),d=n(70444);const u=(0,s.zD)("objectBrowser/downloadSelected",async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:d}=t;const u=n(),h=t=>{const n=encodeURIComponent("".concat(e,"-").concat(t.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),s=(0,i.E0)(8),o=(0,a.RG)(e,t.name,t.version_id,t.size,null,s,e=>{d((0,l.DW)({instanceID:n,progress:e}))},()=>{d((0,l.rx)(n))},e=>{d((0,l.iL)({instanceID:n,msg:e}))},()=>{d((0,l.Dm)(n))},()=>{d((0,r.Hk)("File download will be handled directly by the browser."))});(0,i.FP)(s,o),d((0,l.cP)({ID:s,bucketName:e,done:!1,instanceID:n,percentage:0,prefix:t.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))};if(0!==u.objectBrowser.selectedObjects.length){let t=[];const n=e=>u.objectBrowser.selectedObjects.includes(e.name);if(t=u.objectBrowser.records.filter(n),1===t.length){if(t[0].name.length>200&&(0,o.oK)().toLowerCase().includes("win"))return void d((0,l.Ew)(t[0]));h(t[0])}else if(1===t.length)h(t[0]);else if(t.length>1){const n="".concat(c.c9.now().toFormat("LL-dd-yyyy-HH-mm-ss"),"_files_list.zip"),s=t.reduce((e,t)=>{const n=null===t||void 0===t?void 0:t.delete_flag;return t&&!n?e.push(t.name):console.log("Skipping ".concat(null===t||void 0===t?void 0:t.name," from download.")),e},[]);return void await(0,a.Fj)(e,s,n)}}}),h=(0,s.zD)("objectBrowser/openPreview",async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,l.go)(e)),o((0,l.xE)(!0)))}}),m=(0,s.zD)("objectBrowser/openShare",async(e,t)=>{let{getState:n,rejectWithValue:s,dispatch:o}=t;const i=n();if(1===i.objectBrowser.selectedObjects.length){let e;const t=e=>i.objectBrowser.selectedObjects.includes(e.name);e=i.objectBrowser.records.find(t),e&&(o((0,l.go)(e)),o((0,l.Lf)(!0)))}}),x=(0,s.zD)("objectBrowser/openAnonymousAccess",async(e,t)=>{let{getState:n,dispatch:s}=t;const o=n();1===o.objectBrowser.selectedObjects.length&&o.objectBrowser.selectedObjects[0].endsWith("/")&&s((0,l.I8)(!0))}),p=(0,s.zD)("objectBrowser/maxShareLinkExpTime",async(e,t)=>{let{rejectWithValue:n,dispatch:s}=t;return d.F.buckets.getMaxShareLinkExp().then(e=>{s((0,l.QV)(e.data.exp))}).catch(async e=>n(e.error))})},21572:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var s=n(9950),o=n(98341),i=n(89132),a=n(95189),l=n.n(a),r=n(32680),c=n(43217),d=n(44414);const u=e=>{let{id:t,label:n,maxSeconds:o,entity:a,onChange:l}=e;const r=Math.floor(o/86400),u=Math.floor(o%86400/3600),h=Math.floor(o%3600/60),[m,x]=(0,s.useState)(0),[p,j]=(0,s.useState)(0),[b,g]=(0,s.useState)(0),[f,v]=(0,s.useState)(!0),[_,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{x(r),j(u),g(h)},[r,u,h]),(0,s.useEffect)(()=>{var e,t,n;isNaN(p)||isNaN(m)||isNaN(b)||S((e=m,t=p,n=b,c.c9.now().plus({hours:t+24*e,minutes:n}).toISO()))},[m,p,b]),(0,s.useEffect)(()=>{if(f&&_){const e=c.c9.fromISO(_).toFormat("yyyy-MM-dd HH:mm:ss");l(e.split(" ").join("T"),!0)}else l("0000-00-00",!1)},[_,l,f]),(0,s.useEffect)(()=>{let e=!0;(m<0||m>7||m>r||isNaN(m))&&(e=!1),(p<0||p>23||isNaN(p))&&(e=!1),(b<0||b>59||isNaN(b))&&(e=!1),m===r&&(p>u&&(e=!1),p===u&&b>h&&(e=!1)),m<=0&&p<=0&&b<=0&&(e=!1),v(e)},[_,r,u,h,l,m,p,b]);const O={"& .textBoxContainer":{minWidth:0},"& input":{textAlign:"center",paddingRight:10,paddingLeft:10,width:40}};return(0,d.jsxs)(i.azJ,{className:"inputItem",children:[(0,d.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",marginBottom:5},children:(0,d.jsx)(i.l1Y,{htmlFor:t,children:n})}),(0,d.jsxs)(i.azJ,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-evenly",gap:10,"& .reverseInput":{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}}},children:[(0,d.jsx)(i.azJ,{children:(0,d.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"7",label:"Days",name:t,onChange:e=>{x(parseInt(e.target.value))},value:m.toString(),sx:O,noLabelMinWidth:!0})}),(0,d.jsx)(i.azJ,{children:(0,d.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:e=>{j(parseInt(e.target.value))},value:p.toString(),sx:O,noLabelMinWidth:!0})}),(0,d.jsx)(i.azJ,{children:(0,d.jsx)(i.cl_,{id:t,className:"reverseInput removeArrows",type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:e=>{g(parseInt(e.target.value))},value:b.toString(),sx:O,noLabelMinWidth:!0})})]}),(0,d.jsx)(i.azJ,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10,marginBottom:15,"& .validityText":{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},"& .validTill":{fontWeight:"bold",marginLeft:15},"& .invalidDurationText":{marginTop:15,display:"flex",color:"red",fontSize:11}},children:f&&_?(0,d.jsxs)("div",{className:"validityText",children:[(0,d.jsx)(i.qYV,{}),(0,d.jsxs)("div",{children:[a," will be available until:"]})," ",(0,d.jsx)("div",{className:"validTill",children:c.c9.fromISO(_).toFormat("MM/dd/yyyy HH:mm:ss ZZZZ")})]}):(0,d.jsx)("div",{className:"invalidDurationText",children:"Please select a valid duration."})})]})};var h=n(59908),m=n(49078),x=n(99491),p=n(70444),j=n(48965),b=n(18949),g=n(45536),f=n(95491),v=n.n(f);const _=e=>{let{open:t,closeModalAndRefresh:n,bucketName:a,dataObject:c}=e;const f=(0,x.jL)(),_=(0,o.d4)(m.Rq),S=(0,o.d4)(g.yL),[O,w]=(0,s.useState)(""),[T,C]=(0,s.useState)(!0),[y,E]=(0,s.useState)(!1),[I,A]=(0,s.useState)(""),[N,k]=(0,s.useState)(!0),[B,L]=(0,s.useState)("null"),F=v()((e,t)=>{k(t),t?A(e):(A(""),w(""))},300);return(0,s.useEffect)(()=>{f((0,b.Ex)())},[f]),(0,s.useEffect)(()=>{if(void 0===c.version_id)return _?(p.F.buckets.listObjects(a,{prefix:c.name||"",with_versions:_}).then(e=>{const t=(e.data.objects||[]).find(e=>e.is_latest);L(t?"".concat(t.version_id):"null")}).catch(e=>{f((0,m.Dy)((0,j.S)(e.error)))}),void C(!1)):(L("null"),void C(!1));L(c.version_id||"null"),C(!1)},[a,c,_,f]),(0,s.useEffect)(()=>{if(N&&!T){E(!0),w("");const e=new Date("".concat(I)),t=new Date,n=Math.ceil((e.getTime()-t.getTime())/1e3);n>0&&p.F.buckets.shareObject(a,{prefix:c.name||"",version_id:B,expires:""!==I?"".concat(n,"s"):""}).then(e=>{w(e.data),E(!1)}).catch(e=>{f((0,m.Dy)((0,j.S)(e.error))),w(""),E(!1)})}},[c,I,a,N,w,f,_,T,B]),(0,d.jsx)(s.Fragment,{children:(0,d.jsxs)(r.A,{title:"Share File",titleIcon:(0,d.jsx)(i.liv,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:()=>{n()},children:[T&&(0,d.jsx)(i.xA9,{item:!0,xs:12,children:(0,d.jsx)(i.z21,{})}),!T&&(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(i.xA9,{item:!0,xs:12,sx:{fontSize:14,fontWeight:400},children:(0,d.jsx)(i.m_M,{placement:"right",tooltip:(0,d.jsxs)("span",{children:["You can reset your session by logging out and logging back in to the web UI. ",(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),"You can increase the maximum configuration time by setting the MINIO_STS_DURATION environment variable on all your nodes. ",(0,d.jsx)("br",{})," ",(0,d.jsx)("br",{}),"You can use ",(0,d.jsx)("b",{children:"mc share"})," as an alternative to this UI, where the session length does not limit the URL validity."]}),children:(0,d.jsxs)("span",{children:["The following URL lets you share this object without requiring a login. ",(0,d.jsx)("br",{}),"The URL expires automatically at the earlier of your configured time (",(0,h.K7)(S),") or the expiration of your current web session."]})})}),(0,d.jsx)("br",{}),(0,d.jsx)(i.xA9,{item:!0,xs:12,children:(0,d.jsx)(u,{id:"date",label:"Active for",maxSeconds:S,onChange:F,entity:"Link"})}),(0,d.jsx)(i.xA9,{item:!0,xs:12,sx:{marginBottom:10},children:(0,d.jsx)(i.EmB,{actionButton:(0,d.jsx)(l(),{text:O,children:(0,d.jsx)(i.$nd,{id:"copy-path",variant:"regular",onClick:()=>{f((0,m.h0)("Share URL Copied to clipboard"))},disabled:""===O||y,style:{width:"28px",height:"28px",padding:"0px"},icon:(0,d.jsx)(i.TdU,{})})}),children:O})})]})]})})}},32680:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(9950),o=n(98341),i=n(89132),a=n(99491),l=n(49078),r=n(96382),c=n(44414);const d=e=>{let{onClose:t,modalOpen:n,title:d,children:u,wideLimit:h=!0,titleIcon:m=null,iconColor:x="default",sx:p}=e;const j=(0,a.jL)(),[b,g]=(0,s.useState)(!1),f=(0,o.d4)(e=>e.system.modalSnackBar);(0,s.useEffect)(()=>{j((0,l.h0)(""))},[j]),(0,s.useEffect)(()=>{if(f){if(""===f.message)return void g(!1);"error"!==f.type&&g(!0)}},[f]);let v="";return f&&(v=f.detailedErrorMsg,(""===v||v&&v.length<5)&&(v=f.message)),(0,c.jsxs)(i.ngX,{onClose:t,open:n,title:d,titleIcon:m,widthLimit:h,sx:p,iconColor:x,children:[(0,c.jsx)(r.A,{isModal:!0}),(0,c.jsx)(i.qb_,{onClose:()=>{g(!1),j((0,l.h0)(""))},open:b,message:v,mode:"inline",variant:"error"===f.type?"error":"default",autoHideDuration:"error"===f.type?10:5,condensed:!0}),u]})}},39971:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var s=n(9950),o=n(32680),i=n(89132),a=n(87946),l=n.n(a),r=n(45176),c=n(70444),d=n(32878),u=n(54823),h=n(49910),m=n(44414);d.EA.workerSrc="./scripts/pdf.worker.min.mjs";const x=e=>{let{path:t,loading:n,onLoad:o,downloadFile:a}=e;const[l,r]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0);if(!t)return null;const x=c>5?5:c,p=Array.from(Array(x).keys());return(0,m.jsxs)(s.Fragment,{children:[l&&0===c&&(0,m.jsx)(i.Wei,{variant:"error",title:"Error",message:(0,m.jsxs)(s.Fragment,{children:["File preview couldn't be displayed, Please try Download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!n&&!l&&(0,m.jsx)(i.Wei,{variant:"warning",title:"File Preview",message:(0,m.jsxs)(s.Fragment,{children:["This is a File Preview for the first ",p.length," pages of the document, if you wish to work with the full document please download instead.",(0,m.jsx)(i.azJ,{sx:{display:"flex",justifyContent:"center",marginTop:12},children:(0,m.jsx)(i.$nd,{id:"download-preview",onClick:a,variant:"callAction",children:"Download File"})})]}),sx:{marginBottom:10}}),!l&&(0,m.jsx)(i.azJ,{sx:{overflowY:"auto","& .react-pdf__Page__canvas":{margin:"0 auto",backgroundColor:"transparent"}},children:(0,m.jsx)(u.A,{file:t,onLoadSuccess:e=>{let{_pdfInfo:t}=e;d(t.numPages||0),r(!1),o()},onLoadError:e=>{r(!0),o(),console.error(e)},children:p.map(e=>(0,m.jsx)(h.A,{pageNumber:e+1,renderAnnotationLayer:!1,renderTextLayer:!1,renderForms:!1},"render-page-".concat(e)))})})]})};var p=n(3796),j=n(99491);const b=e=>{let{bucketName:t,actualInfo:n,isFullscreen:o=!1}=e;const a=(0,j.jL)(),[d,u]=(0,s.useState)(!0),[h,b]=(0,s.useState)(null),[g,f]=(0,s.useState)(!1),v=(null===n||void 0===n?void 0:n.name)||"",_=(0,s.useCallback)(()=>{g||c.F.buckets.getObjectMetadata(t,{prefix:v,versionID:n.version_id||""}).then(e=>{let t=l()(e.data,"objectMetadata",{});f(!0),b(t)}).catch(e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),f(!0)})},[t,v,g,n.version_id]);(0,s.useEffect)(()=>{t&&v&&_()},[t,v,_]);let S="";if(n){let e=document.baseURI.replace(window.location.origin,"");S="".concat(window.location.origin).concat(e,"api/v1/buckets/").concat(encodeURIComponent(t),"/objects/download?preview=true&prefix=").concat(encodeURIComponent(n.name||"")),n.version_id&&(S=S.concat("&version_id=".concat(n.version_id)))}let O=(0,r.IZ)(h,v);const w=()=>{u(!1)};return(0,m.jsxs)(s.Fragment,{children:["none"!==O&&d&&(0,m.jsx)(i.xA9,{item:!0,xs:12,children:(0,m.jsx)(i.z21,{})}),g?(0,m.jsxs)(i.azJ,{sx:{textAlign:"center","& .iframeContainer":{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},"& .iframeBase":{backgroundColor:"#fff"},"& .iframeHidden":{display:"none"}},children:["video"===O&&(0,m.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:w,children:(0,m.jsx)("source",{src:S,type:"video/mp4"})}),"audio"===O&&(0,m.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:w,children:(0,m.jsx)("source",{src:S,type:"audio/mpeg"})}),"image"===O&&(0,m.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:S,alt:"preview",onLoad:w}),"pdf"===O&&(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(x,{path:S,onLoad:w,loading:d,downloadFile:()=>{(0,p._)(a,t,v,n)}})}),"none"===O&&(0,m.jsx)("div",{children:(0,m.jsx)(i.Wei,{message:" File couldn't be previewed using file extension or mime type. Please try Download instead",title:"Preview unavailable",sx:{margin:"15px 0"}})}),"none"!==O&&"video"!==O&&"audio"!==O&&"image"!==O&&"pdf"!==O&&(0,m.jsx)("div",{className:"iframeBase ".concat(d?"iframeHidden":""),children:(0,m.jsx)("iframe",{src:S,title:"File Preview",allowTransparency:!0,className:"iframeContainer ".concat(o?"fullHeight":O),onLoad:w,children:"File couldn't be loaded. Please try Download instead"})})]}):null]})},g=e=>{let{open:t,bucketName:n,actualInfo:a,onClosePreview:l}=e;return(0,m.jsx)(s.Fragment,{children:(0,m.jsx)(o.A,{modalOpen:t,title:"Preview - ".concat(null===a||void 0===a?void 0:a.name),onClose:l,wideLimit:!1,titleIcon:(0,m.jsx)(i.jG,{}),children:(0,m.jsx)(b,{bucketName:n,actualInfo:a})})})}},48374:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(9950),o=n(89132),i=n(44414);const a=e=>{let{value:t}=e;const[n,a]=(0,s.useState)(!1);return(0,i.jsxs)(o.azJ,{sx:{display:"flex",alignItems:"center",flexFlow:"row",["@media (max-width: ".concat(o.nmC.sm,"px)")]:{flexFlow:"column"}},children:[(0,i.jsx)(o.cl_,{id:"inspect-dec-key",name:"inspect-dec-key",placeholder:"",label:"",type:n?"text":"password",onChange:()=>{},value:t,overlayIcon:(0,i.jsx)(o.TdU,{}),readOnly:!0,overlayAction:()=>navigator.clipboard.writeText(t)}),(0,i.jsx)(o.$nd,{id:"show-hide-key",style:{marginLeft:"10px"},variant:"callAction",onClick:()=>a(!n),label:"Show/Hide"})]})}},54945:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var s=n(9950),o=n(32680),i=n(89132),a=n(70444),l=n(48965),r=n(45246),c=n(49078),d=n(99491),u=n(44414);const h=e=>{let{modalOpen:t,onClose:n,bucket:h,prefilledRoute:m}=e;const x=(0,d.jL)(),[p,j]=(0,s.useState)(""),[b,g]=(0,s.useState)("readonly");(0,s.useEffect)(()=>{m&&j(m)},[m]);return(0,u.jsx)(o.A,{modalOpen:t,title:"Add Anonymous Access Rule",onClose:n,titleIcon:(0,u.jsx)(i.No_,{}),children:(0,u.jsxs)(i.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,u.jsx)(i.cl_,{value:p,label:"Prefix",id:"prefix",name:"prefix",placeholder:"Enter Prefix",onChange:e=>{j(e.target.value)},tooltip:"Enter '/' to apply the rule to all prefixes and objects at the bucket root. Do not include the wildcard asterisk '*' as part of the prefix *unless* it is an explicit part of the prefix name. The Console automatically appends an asterisk to the appropriate sections of the resulting IAM policy."}),(0,u.jsx)(i.l6P,{id:"access",name:"Access",onChange:e=>{g(e)},label:"Access",value:b,options:[{label:"readonly",value:"readonly"},{label:"writeonly",value:"writeonly"},{label:"readwrite",value:"readwrite"}],disabled:!1,helpTip:(0,u.jsx)(s.Fragment,{children:"Select the desired level of access available to unauthenticated Users"}),helpTipPlacement:"right"}),(0,u.jsxs)(i.xA9,{item:!0,xs:12,sx:r.Uz.modalButtonBar,children:[(0,u.jsx)(i.$nd,{id:"clear",type:"button",variant:"regular",onClick:()=>{j(""),g("readonly")},label:"Clear"}),(0,u.jsx)(i.$nd,{id:"add-access-save",type:"submit",variant:"callAction",disabled:""===p.trim(),onClick:()=>{a.F.bucket.setAccessRuleWithBucket(h,{prefix:p,access:b}).then(e=>{x((0,c.Hk)("Access Rule added successfully")),n()}).catch(e=>{x((0,c.C9)((0,l.S)(e.error))),n()})},label:"Save"})]})]})})}},55604:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(89379),o=n(9950),i=n(44414);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){return(0,i.jsx)(o.Suspense,{fallback:t,children:(0,i.jsx)(e,(0,s.A)({},n))})}}},71634:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Je});var s=n(9950),o=n(98341),i=n(28429),a=n(70444),l=n(99491),r=n(93598),c=n(45536),d=n(89379),u=n(87946),h=n.n(u),m=n(89132),x=n(48965),p=n(55044),j=n(43217),b=n(59908),g=n(95189),f=n.n(g),v=n(19335),_=n(42074),S=n(26843),O=n(55604),w=n(49078);const T=e=>(e.match(/\.([^.]*?)(?=\?|#|$)/)||[])[1],C=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=Object.keys(e).reduce((n,s)=>(T(s)&&s.includes(t)&&(n[s]=e[s]),n),{});return Object.keys(s).filter(e=>{const o=s[e].some(e=>n.find(t=>{let n=!1;if(-1!==t.indexOf("*")){const s=t.substring(0,t.length-1);n=e.includes(s)}return n||e===t})),i=e.substring(0,e.indexOf("/*."))==="arn:aws:s3:::".concat(t);return o&&(i&&"arn:aws:s3:::*"!==e)})};var y=n(44414);const E=(0,O.A)(s.lazy(()=>n.e(2797).then(n.bind(n,42797)))),I=v.Ay.div(()=>({display:"flex","& .additionalOptions":{paddingRight:"10px",display:"flex",alignItems:"center",["@media (max-width: ".concat(m.nmC.lg,"px)")]:{display:"none"}},"& .slashSpacingStyle":{margin:"0 5px"}})),A=e=>{let{bucketName:t,internalPaths:n,hidePathButton:a,additionalOptions:d}=e;const u=(0,l.jL)(),h=(0,i.Zp)(),x=(0,o.d4)(e=>e.objectBrowser.rewind.rewindEnabled),p=(0,o.d4)(e=>e.objectBrowser.versionsMode),j=(0,o.d4)(e=>e.objectBrowser.versionedFile),g=(0,o.d4)(e=>e.system.anonymousMode),[v,O]=(0,s.useState)(!1),[T,A]=(0,s.useState)(!1),N=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],k=(0,o.d4)(e=>e.console.session&&e.console.session.permissions||{});let B=n;""!==n&&(B="/".concat(n));const L=B.split("/").filter(e=>""!==e),F=L.length-1,V=t+B||t,D=C(k,V,N);(0,s.useEffect)(()=>{A(!1),Object.keys(k).forEach(e=>{e.includes(V)&&e.includes("/*")&&A(!0)})},[V,n,k]);const R=(0,S._)([V,...D],N)||g||T;let P=L.map((e,n)=>{const o="".concat(L.slice(0,n+1).join("/"),"/"),i="/browser/".concat(encodeURIComponent(t),"/").concat(o?"".concat(encodeURIComponent(o)):"");return n===F&&e===j?null:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("span",{className:"slashSpacingStyle",children:"/"}),n===F?(0,y.jsx)("span",{style:{cursor:"default",whiteSpace:"pre"},children:(0,b.Tw)(e)}):(0,y.jsx)(_.N_,{style:{whiteSpace:"pre"},to:i,onClick:()=>{u((0,c.cQ)({status:!1,objectName:""}))},children:(0,b.Tw)(e)})]},"breadcrumbs-".concat(n.toString()))}),U=[];p&&(U=[(0,y.jsx)(s.Fragment,{children:(0,y.jsxs)("span",{children:[(0,y.jsx)("span",{className:"slashSpacingStyle",children:"/"}),j," - Versions"]})},"breadcrumbs-versionedItem")]);const z=[(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(_.N_,{to:"/browser/".concat(t),onClick:()=>{u((0,c.cQ)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path"),...P,...U];return(0,y.jsxs)(s.Fragment,{children:[(0,y.jsxs)(I,{children:[v&&(0,y.jsx)(E,{modalOpen:v,bucketName:t,folderName:n,onClose:()=>{O(!1)},limitedSubPath:T&&!((0,S._)([V,...D],N)||g)}),(0,y.jsx)(m.BIu,{sx:{whiteSpace:"pre"},goBackFunction:()=>{if(p)u((0,c.cQ)({status:!1,objectName:""}));else{if(0===L.length)return void h("/browser");const e=L.slice(0,-1);h("/browser/".concat(t).concat(e.length>0?"/".concat(encodeURIComponent("".concat(e.join("/"),"/"))):""))}},additionalOptions:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(f(),{text:"".concat(t,"/").concat(L.join("/")),children:(0,y.jsx)(m.$nd,{id:"copy-path",icon:(0,y.jsx)(m.TdU,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:()=>{u((0,w.Hk)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,y.jsx)(m.azJ,{className:"additionalOptions",children:d})]}),children:z}),!a&&(0,y.jsx)(m.m_M,{tooltip:R?"Choose or create a new path":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"create a new path"),children:(0,y.jsx)(m.$nd,{id:"new-path",onClick:()=>{O(!0)},disabled:!g&&(x||!R),icon:(0,y.jsx)(m.pj3,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,y.jsx)(m.azJ,{sx:{display:"none",marginTop:15,marginBottom:5,justifyContent:"flex-start","& > div":{fontSize:12,fontWeight:"normal",flexDirection:"row",flexWrap:"nowrap"},["@media (max-width: ".concat(m.nmC.lg,"px)")]:{display:"flex"}},children:d})]})};var N=n(45176);const k=e=>"Enabled"===e||"Suspended"===e;var B=n(26347),L=n(47304),F=n(18949),V=n(30272);const D=e=>{let{uploadPath:t,bucketName:n,forceDisable:i=!1,uploadFileFunction:a,uploadFolderFunction:l,overrideStyles:c={}}=e;const[d,u]=(0,s.useState)(null),[h,x]=(0,s.useState)(!1),p=(0,o.d4)(e=>e.system.anonymousMode),j=(0,o.d4)(e=>e.console.session&&e.console.session.permissions||{}),b=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],g=C(j,t,b),f=Boolean(d),v=()=>{u(null)},_=(0,S._)([t,...g],b)||p,O=(0,S._)([n,...g],b,!1,!0),w=_||O;return(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(V.A,{tooltip:w?"Upload Files":(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,y.jsx)(m.$nd,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":f?"true":void 0,onClick:e=>{x(!h),u(e.currentTarget)},label:"Upload",icon:(0,y.jsx)(m.JMY,{}),variant:"callAction",disabled:i||!w,sx:c})}),(0,y.jsx)(m.Vey,{id:"upload-main-menu",options:[{label:"Upload File",icon:(0,y.jsx)(m.JMY,{}),value:"file",disabled:!_||i},{label:"Upload Folder",icon:(0,y.jsx)(m.nDF,{}),value:"folder",disabled:!O||i}],selectedOption:"",onSelect:e=>{"folder"!==e?a(v):l(v)},hideTriggerAction:()=>{x(!1)},open:h,anchorEl:d,anchorOrigin:"end",useAnchorWidth:!0})]})},R=e=>{let{open:t,closePanel:n,className:s="",children:o}=e;return(0,y.jsxs)(m.azJ,{id:"details-panel",sx:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},className:"".concat(t?"open":""," ").concat(s),children:[(0,y.jsx)(m.$nd,{variant:"text",id:"close-details-list",onClick:n,icon:(0,y.jsx)(m._FR,{}),sx:{position:"absolute",right:5,top:18,padding:0,height:14,"&:hover:not(:disabled)":{backgroundColor:"transparent"}}}),o]})};var P=n(3796);const U=e=>{let{icon:t,strings:n}=e;return(0,y.jsxs)(m.azJ,{sx:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16},"& .fileNameText":{whiteSpace:"pre",overflow:"hidden",textOverflow:"ellipsis"}},children:[t,(0,y.jsx)("span",{className:"fileNameText",children:(0,b.qf)(n[n.length-1])})]})},z=[{icon:(0,y.jsx)(m.FRZ,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,y.jsx)(m.jCy,{}),extensions:["mp3","m4a","aac"]},{icon:(0,y.jsx)(m.yTC,{}),extensions:["pdf"]},{icon:(0,y.jsx)(m.QvW,{}),extensions:["ppt","pptx"]},{icon:(0,y.jsx)(m.z9t,{}),extensions:["xls","xlsx"]},{icon:(0,y.jsx)(m.VSs,{}),extensions:["cer","crt","pem"]},{icon:(0,y.jsx)(m.bM2,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,y.jsx)(m.qM2,{}),extensions:["cfg","yaml"]},{icon:(0,y.jsx)(m.ITz,{}),extensions:["sql"]},{icon:(0,y.jsx)(m.PcO,{}),extensions:["ttf","otf"]},{icon:(0,y.jsx)(m.yEV,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,y.jsx)(m.j_m,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,y.jsx)(m.DUd,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,y.jsx)(m.nLN,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],G=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e,s=(0,y.jsx)(m.KlI,{});e.endsWith("/")&&(s=(0,y.jsx)(m.kez,{}),n=e.slice(0,-1));const o=e.toLowerCase();for(const a of z)for(const e of a.extensions)o.endsWith(".".concat(e))&&(s=a.icon);!e.endsWith("/")&&e.indexOf(".")<0&&(s=(0,y.jsx)(m.YJK,{}));const i=n.split("/");return t?s:(0,y.jsx)(U,{icon:s,strings:i})};var M=n(39971);const J=e=>{let{metaData:t}=e;const n=Object.keys(t);return(0,y.jsx)(s.Fragment,{children:n.map((e,n)=>{const s=(e=>Array.isArray(e)?e.map(b.Tw).join(", "):(0,b.Tw)(e))(t[e]);return(0,y.jsxs)(m.azJ,{sx:{marginBottom:15,fontSize:14,maxHeight:180,overflowY:"auto"},children:[(0,y.jsx)("strong",{children:e}),(0,y.jsx)("br",{}),s]},"box-meta-".concat(e,"-").concat(n.toString()))})})};var K=n(21572),W=n(5501),H=n(45246);const Y=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],$=Array.from(Array(31),(e,t)=>({value:(t+1).toString(),label:(t+1).toString()})),Z=(new Date).getFullYear(),q=Array.from(Array(50),(e,t)=>({value:(t+Z).toString(),label:(t+Z).toString()}));var Q=n(32680);const X=(0,s.forwardRef)((e,t)=>{let{id:n,label:o,disableOptions:i=!1,tooltip:a="",borderBottom:l=!1,onDateChange:r,value:c=""}=e;(0,s.useImperativeHandle)(t,()=>({resetDate:b}));const[d,u]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[p,j]=(0,s.useState)("");(0,s.useEffect)(()=>{if(""!==c){const e=c.split("-");j(e[0]),u(e[1]),x("".concat(parseInt(e[2])))}},[c]),(0,s.useEffect)(()=>{const[e,t]=((e,t,n)=>{const s=Date.parse("".concat(e,"-").concat(t,"-").concat(n));if(isNaN(s))return[!1,""];const o=parseInt(t),i=parseInt(n),a=o<10?"0".concat(o):o,l=i<10?"0".concat(i):i,r=new Date(s).toISOString().split("T")[0],c="".concat(e,"-").concat(a,"-").concat(l);return[r===c,c]})(p,d,h);r(t,e)},[d,h,p,r]);const b=()=>{u(""),x(""),j("")},g=()=>i||!1,f=[{value:"",label:"<Month>"},...Y],v=[{value:"",label:"<Day>"},...$],_=[{value:"",label:"<Year>"},...q];return(0,y.jsxs)(m.azJ,{className:"inputItem",children:[(0,y.jsx)(m.azJ,{sx:{display:"flex",alignItems:"center",gap:5,marginBottom:5},children:(0,y.jsxs)(m.l1Y,{htmlFor:n,children:[(0,y.jsx)("span",{children:o}),""!==a&&(0,y.jsx)(m.azJ,{sx:{marginLeft:5,display:"flex",alignItems:"center","& .min-icon":{width:13}},children:(0,y.jsx)(m.m_M,{tooltip:a,placement:"top",children:(0,y.jsx)(m.azJ,{sx:{"& .min-icon":{width:13}},children:(0,y.jsx)(m.NTw,{})})})})]})}),(0,y.jsxs)(m.azJ,{sx:{display:"flex",gap:12},children:[(0,y.jsx)(m.l6P,{id:"".concat(n,"-month"),name:"".concat(n,"-month"),value:d,onChange:e=>{u(e)},options:f,label:"",disabled:g()}),(0,y.jsx)(m.l6P,{id:"".concat(n,"-day"),name:"".concat(n,"-day"),value:h,onChange:e=>{x(e)},options:v,label:"",disabled:g()}),(0,y.jsx)(m.l6P,{id:"".concat(n,"-year"),name:"".concat(n,"-year"),value:p,onChange:e=>{j(e)},options:_,label:"",disabled:g(),sx:{marginBottom:12}})]})]})}),ee=e=>{let{open:t,closeModalAndRefresh:n,objectName:i,objectInfo:r,bucketName:c}=e;const d=(0,l.jL)(),u=(0,o.d4)(e=>e.objectBrowser.retentionConfig),[h,p]=(0,s.useState)(!0),[j,b]=(0,s.useState)(""),[g,f]=(0,s.useState)(""),[v,_]=(0,s.useState)(!1),[S,O]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(r.retention_mode&&(b((null===u||void 0===u?void 0:u.mode)||W.BT.Governance),C(!0)),r.retention_until_date){const t=new Date(r.retention_until_date);if("Invalid Date"!==t.toString()){const n=t.getFullYear(),s=(e=t.getMonth()+1)<10?"0".concat(e):"".concat(e),o=t.getDate();isNaN(o)||"NaN"===s||isNaN(n)||f("".concat(n,"-").concat(s,"-").concat(o))}C(!0)}var e},[r,null===u||void 0===u?void 0:u.mode]);const E=(0,s.useRef)(null),I=()=>{p(!1),b(W.BT.Governance),E.current&&E.current.resetDate()},A=T&&("governance"===j||""===j);return(0,y.jsx)(Q.A,{title:"Set Retention Policy",modalOpen:t,onClose:()=>{I(),n(!1)},children:(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:(0,y.jsxs)(m.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(m.azJ,{className:"inputItem",children:[(0,y.jsx)("strong",{children:"Selected Object"}),": ",i]}),A&&(0,y.jsx)(m.dOG,{value:"status",id:"status",name:"status",checked:h,onChange:e=>{p(!h)},label:"Status",indicatorLabels:["Enabled","Disabled"]}),(0,y.jsx)(m.z6M,{currentValue:j,id:"type",name:"type",label:"Type",disableOptions:!h||T&&""!==j,onChange:e=>{b(e.target.value)},selectorOptions:[{label:"Governance",value:W.BT.Governance},{label:"Compliance",value:W.BT.Compliance}]}),(0,y.jsx)(X,{id:"date",label:"Date",disableOptions:!(h&&("governance"===j||"compliance"===j)),ref:E,value:g,borderBottom:!0,onDateChange:(e,t)=>{_(t),t&&f(e)}}),(0,y.jsxs)(m.xA9,{item:!0,xs:12,sx:H.Uz.modalButtonBar,children:[(0,y.jsx)(m.$nd,{id:"reset",type:"button",variant:"regular",onClick:I,label:"Reset"}),(0,y.jsx)(m.$nd,{id:"save",type:"submit",variant:"callAction",disabled:h&&""===j||h&&!v||S,onClick:()=>{O(!0);const e=r.name||"",t=r.version_id||null,s=h||"governance"!==j?"".concat(g,"T23:59:59Z"):"";h||"governance"!==j?((e,t,s)=>{a.F.buckets.putObjectRetention(c,{prefix:e,version_id:t||""},{expires:s,mode:j}).then(()=>{O(!1),n(!0)}).catch(e=>{d((0,w.Dy)((0,x.S)(e.error))),O(!1)})})(e,t,s):((e,t)=>{a.F.buckets.deleteObjectRetention(c,{prefix:e,version_id:t||""}).then(()=>{O(!1),n(!0)}).catch(e=>{d((0,w.Dy)((0,x.S)(e.error))),O(!1)})})(e,t)},label:"Save"})]})]})})})};var te=n(49534),ne=n(1531);const se=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:a,versioningInfo:c,selectedVersion:d=""}=e;const u=(0,l.jL)(),[h,x]=(0,ne.A)(()=>t(!0),e=>{u((0,w.C9)(e)),"Access Denied."===e.detailedError&&t(!0)}),[p,j]=(0,s.useState)(!1),[b,g]=(0,s.useState)(!1),f=(0,o.d4)(e=>e.objectBrowser.retentionConfig),v=(0,S._)([i],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if(!a)return null;return(0,y.jsx)(te.A,{title:"Delete Object",confirmText:"Delete",isOpen:n,titleIcon:(0,y.jsx)(m.xWY,{}),isLoading:h,onConfirm:()=>{const e=a.endsWith("/");x("DELETE","/api/v1/buckets/".concat(encodeURIComponent(i),"/objects?prefix=").concat(encodeURIComponent(a)).concat(""!==d?"&version_id=".concat(encodeURIComponent(d)):"&recursive=".concat(e,"&all_versions=").concat(p)).concat(b?"&bypass=true":""))},onClose:()=>t(!1),confirmationContent:(0,y.jsxs)(s.Fragment,{children:["Are you sure you want to delete: ",(0,y.jsx)("br",{}),(0,y.jsx)("b",{children:a})," ",""!==d?(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),"Version ID:",(0,y.jsx)("br",{}),(0,y.jsx)("strong",{children:d})]}):"","? ",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),k(null===c||void 0===c?void 0:c.status)&&""===d&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(m.dOG,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:p,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:e=>{j(!p)},description:""})}),v&&(p||""!==d)&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)("div",{style:{marginTop:10},children:(0,y.jsx)(m.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:b,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{g(!b)},description:""})})}),p&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,y.jsx)("br",{}),"This action is irreversible."]}),(0,y.jsx)("br",{}),"Are you sure you want to continue?"]})]})})},oe=e=>{let{open:t,closeModalAndRefresh:n,objectName:o,bucketName:i,actualInfo:r}=e;const c=(0,l.jL)(),[d,u]=(0,s.useState)(!1),[p,j]=(0,s.useState)(!1),b=r.version_id;(0,s.useEffect)(()=>{const e=h()(r,"legal_hold_status","OFF");u("ON"===e)},[r]);const g=()=>{u(!1)};return(0,y.jsx)(Q.A,{title:"Set Legal Hold",modalOpen:t,onClose:()=>{g(),n(!1)},children:(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),j(!0),a.F.buckets.putObjectLegalHold(i,{prefix:o,version_id:b||""},{status:d?W.SW.Enabled:W.SW.Disabled}).then(()=>{j(!1),n(!0)}).catch(e=>{c((0,w.Dy)((0,x.S)(e.error))),j(!1)})})(e)},children:(0,y.jsxs)(m.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsxs)(m.azJ,{className:"inputItem",children:[(0,y.jsx)("strong",{children:"Object"}),": ",i+"/"+o]}),(0,y.jsx)(m.dOG,{value:"legalhold",id:"legalhold",name:"legalhold",checked:d,onChange:e=>{u(!d)},label:"Legal Hold Status",indicatorLabels:["Enabled","Disabled"],tooltip:"To enable this feature you need to enable versioning on the bucket before creation"}),(0,y.jsxs)(m.xA9,{item:!0,xs:12,sx:H.Uz.modalButtonBar,children:[(0,y.jsx)(m.$nd,{id:"clear",type:"button",variant:"regular",onClick:g,label:"Clear"}),(0,y.jsx)(m.$nd,{id:"save",type:"submit",variant:"callAction",disabled:p,label:" Save"})]})]})})})},ie=v.Ay.b(e=>{let{theme:t}=e;return{color:h()(t,"signalColors.danger","#C83B51"),marginLeft:5}}),ae=e=>{var t;let{modalOpen:n,onCloseAndUpdate:i,bucketName:c,actualInfo:u}=e;const p=(0,l.jL)(),j=(0,o.d4)(w.Rq),[b,g]=(0,s.useState)(""),[f,v]=(0,s.useState)(""),[_,O]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1),[E,I]=(0,s.useState)(""),[A,N]=(0,s.useState)(""),k=u.tags,B=Object.keys(k||{}),L=null===(t=u.name)||void 0===t?void 0:t.split("/"),F=(null===L||void 0===L?void 0:L.pop())||"",V=e=>(0,y.jsxs)(m.azJ,{sx:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:["Tag",e?"s":""," for: ",(0,y.jsx)("strong",{children:F})]});return(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(Q.A,{modalOpen:n,title:T?"Delete Tag":"Edit Tags",onClose:()=>{i(!0)},iconColor:T?"delete":"default",titleIcon:T?(0,y.jsx)(m.aaC,{}):(0,y.jsx)(m.cGQ,{}),children:T?(0,y.jsx)(s.Fragment,{children:(0,y.jsxs)(m.xA9,{container:!0,children:[V(!1),"Are you sure you want to delete the tag"," ",(0,y.jsxs)(ie,{children:[E," : ",A]})," ","?",(0,y.jsxs)(m.xA9,{item:!0,xs:12,sx:H.Uz.modalButtonBar,children:[(0,y.jsx)(m.$nd,{id:"cancel",type:"button",variant:"regular",onClick:()=>{I(""),N(""),C(!1)},label:"Cancel"}),(0,y.jsx)(m.$nd,{type:"submit",variant:"secondary",onClick:()=>{const e=(0,d.A)({},k);delete e[E];const t=j?u.version_id||"":"null";a.F.buckets.putObjectTags(c,{prefix:u.name||"",version_id:t},{tags:e}).then(()=>{i(!0),O(!1)}).catch(e=>{p((0,w.Dy)((0,x.S)(e.error))),O(!1)})},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,y.jsxs)(m.azJ,{children:[(0,y.jsx)(S.R,{scopes:[r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS],resource:c,children:(0,y.jsxs)(m.azJ,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[V(!0),(0,y.jsxs)(m.azJ,{sx:{fontSize:14,fontWeight:"normal"},children:["Current Tags:",(0,y.jsx)("br",{}),0===B.length?(0,y.jsx)("span",{className:"muted",children:"There are no tags for this object"}):(0,y.jsx)(s.Fragment,{}),(0,y.jsx)(m.azJ,{sx:{marginTop:"5px",marginBottom:"15px"},children:B.map((e,t)=>{const n=h()(k,"".concat(e),"");return""!==n?(0,y.jsx)(S.R,{scopes:[r.OV.S3_DELETE_OBJECT_TAGGING,r.OV.S3_DELETE_ACTIONS],resource:c,errorProps:{deleteIcon:null,onDelete:null},children:(0,y.jsx)(m.vwO,{id:"".concat(e," : ").concat(n),label:"".concat(e," : ").concat(n),variant:"regular",color:"default",onDelete:()=>{((e,t)=>{I(e),N(t),C(!0)})(e,n)}})},"chip-".concat(t)):null})})]})]})}),(0,y.jsx)(S.R,{scopes:[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS],resource:c,errorProps:{disabled:!0,onClick:null},children:(0,y.jsxs)(m.azJ,{children:[(0,y.jsx)(m._xt,{icon:(0,y.jsx)(m.b_$,{}),separator:!1,children:"Add New Tag"}),(0,y.jsxs)(m.Hbc,{containerPadding:!1,withBorders:!1,children:[(0,y.jsx)(m.cl_,{value:b,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:e=>{g(e.target.value)}}),(0,y.jsx)(m.cl_,{value:f,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:e=>{v(e.target.value)}}),(0,y.jsxs)(m.xA9,{item:!0,xs:12,sx:H.Uz.modalButtonBar,children:[(0,y.jsx)(m.$nd,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:()=>{v(""),g("")},label:"Clear"}),(0,y.jsx)(m.$nd,{type:"submit",variant:"callAction",disabled:""===f.trim()||""===b.trim()||_,onClick:()=>{O(!0);const e={};e[b]=f;const t=(0,d.A)((0,d.A)({},k),e),n=j?u.version_id||"":"null";a.F.buckets.putObjectTags(c,{prefix:u.name||"",version_id:n},{tags:t}).then(()=>{i(!0),O(!1)}).catch(e=>{p((0,w.Dy)((0,x.S)(e.error))),O(!1)})},id:"saveTag",label:"Save"})]})]})]})})]})})})};var le=n(48374);const re=e=>{let{closeInspectModalAndRefresh:t,inspectOpen:n,inspectPath:o,volumeName:i}=e;const a=(0,l.jL)(),r=()=>t(!1),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(""),[x,p]=(0,s.useState)("");if(!o)return null;return(0,y.jsxs)(s.Fragment,{children:[!u&&(0,y.jsx)(Q.A,{modalOpen:n,titleIcon:(0,y.jsx)(m.nTF,{}),title:"Inspect Object",onClose:r,children:(0,y.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault()})(e)},children:["Would you like to encrypt ",(0,y.jsx)("b",{children:o}),"? ",(0,y.jsx)("br",{}),(0,y.jsx)(m.dOG,{label:"Encrypt",indicatorLabels:["Yes","No"],checked:c,value:"encrypt",id:"encrypt",name:"encrypt",onChange:e=>{d(!c)},description:""}),(0,y.jsx)(m.xA9,{item:!0,xs:12,sx:H.Uz.modalButtonBar,children:(0,y.jsx)(m.$nd,{id:"inspect",type:"submit",variant:"callAction",color:"primary",onClick:async()=>{let e=document.baseURI.replace(window.location.origin,"");(async e=>await fetch(e,{method:"GET"}))("".concat(window.location.origin).concat(e,"api/v1/admin/inspect?volume=").concat(encodeURIComponent(i),"&file=").concat(encodeURIComponent(o+"/xl.meta"),"&encrypt=").concat(c)).then(async e=>{if(!e.ok){const t=await e.json();a((0,w.C9)({errorMessage:t.message,detailedError:t.code}))}const t=await e.blob(),n=e.headers.get("content-disposition").split('"')[1],s=(0,b.UM)(n)||"";(0,b.OT)(t,n),p(n),""!==s?h(s):r()}).catch(e=>{a((0,w.C9)(e))})},label:"Inspect"})})]})}),u?(0,y.jsxs)(Q.A,{modalOpen:n,title:"Inspect Decryption Key",onClose:()=>{(0,b.Yj)(x),r(),h("")},titleIcon:(0,y.jsx)(m.aJN,{}),children:[(0,y.jsxs)(m.azJ,{children:["This will be displayed only once. It cannot be recovered.",(0,y.jsx)("br",{}),"Use secure medium to share this key."]}),(0,y.jsx)(m.azJ,{children:(0,y.jsx)(le.A,{value:u})})]}):null]})},ce=e=>{let{open:t,closeModal:n,currentItem:o,internalPaths:i,actualInfo:a,bucketName:r}=e;const c=(0,l.jL)(),[d,u]=(0,s.useState)(o),[h,x]=(0,s.useState)(!1);return(0,y.jsxs)(Q.A,{title:"Rename Download",modalOpen:t,onClose:n,titleIcon:(0,y.jsx)(m.qUP,{}),children:[(0,y.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,y.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{})," We recommend to rename the file download"]}),(0,y.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:e=>{(e=>{e.preventDefault(),(0,P._)(c,r,i,a),n()})(e)},children:(0,y.jsxs)(m.Hbc,{withBorders:!1,containerPadding:!1,children:[(0,y.jsx)(m.cl_,{id:"download-filename",name:"download-filename",onChange:e=>{u(e.target.value)},label:"",type:"text",value:d,error:d.length>200&&!h?"Filename should be less than 200 characters long.":""}),(0,y.jsx)(m.dOG,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:h,onChange:e=>{x(e.target.checked),e.target.checked&&u(o)},label:"Use Original Name"}),(0,y.jsx)(m.xA9,{item:!0,xs:12,sx:H.Uz.modalButtonBar,children:(0,y.jsx)(m.$nd,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:d.length>200&&!h,label:"Download File"})})]})})]})},de={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},ue=e=>{let{internalPaths:t,bucketName:n,versioningInfo:i,locking:d,onClosePanel:u}=e;const x=(0,l.jL)(),p=(0,o.d4)(w.Rq),j=(0,o.d4)(e=>e.objectBrowser.versionsMode),g=(0,o.d4)(e=>e.objectBrowser.selectedVersion),f=(0,o.d4)(e=>e.objectBrowser.loadingObjectInfo),v=(0,o.d4)(e=>e.objectBrowser.versionsLimit),[_,O]=(0,s.useState)(!1),[T,C]=(0,s.useState)(!1),[E,I]=(0,s.useState)(!1),[A,k]=(0,s.useState)(!1),[B,L]=(0,s.useState)(!1),[F,D]=(0,s.useState)(null),[R,U]=(0,s.useState)([]),[z,W]=(0,s.useState)(null),[H,Y]=(0,s.useState)([]),[$,Z]=(0,s.useState)(!1),[q,Q]=(0,s.useState)(!1),[X,te]=(0,s.useState)(0),[ne,ie]=(0,s.useState)(!1),[le,ue]=(0,s.useState)(!1),[he,me]=(0,s.useState)(null),[xe,pe]=(0,s.useState)(!1),je=(t||"").split("/").pop()||"";let be=[];F&&F.name&&(be=F.name.split("/")),(0,s.useEffect)(()=>{if(p&&R&&R.length>=1){let e=R.find(e=>e.is_latest)||de;""!==g&&(e=R.find(e=>e.version_id===g)||de),e.is_delete_marker||pe(!0),D(e)}},[g,p,R]),(0,s.useEffect)(()=>{f&&""!==t&&a.F.buckets.listObjects(n,{prefix:t,with_versions:p,limit:v+1}).then(e=>{const t=e.data.objects||[];if(p){ie(t.length>v),t.splice(v),U(t),Y(t);const e=t.reduce((e,t)=>null!==t&&void 0!==t&&t.size?e+t.size:e,0);te(e)}else{const e=t[0];D(e),Y([]),e.is_delete_marker||pe(!0)}x((0,c.oe)(!1))}).catch(e=>{console.error("Error loading object details",e.error),x((0,c.oe)(!1))})},[f,n,t,x,p,g,v]),(0,s.useEffect)(()=>{xe&&""!==t&&a.F.buckets.getObjectMetadata(n,{prefix:t,versionID:(null===F||void 0===F?void 0:F.version_id)||""}).then(e=>{let t=h()(e.data,"objectMetadata",{});me(t),pe(!1)}).catch(e=>{console.error("Error Getting Metadata Status: ",e.detailedError),pe(!1)})},[n,t,xe,null===F||void 0===F?void 0:F.version_id]);let ge=[];F&&F.tags&&(ge=Object.keys(F.tags));const fe=(0,y.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,y.jsx)(m.aHM,{})});if(!F)return f?fe:null;const ve=be.length>0?be[be.length-1]:F.name,_e=[n,je,[n,F.name].join("/")],Se=(0,S._)(n,[r.OV.S3_PUT_OBJECT_LEGAL_HOLD,r.OV.S3_PUT_ACTIONS]),Oe=(0,S._)(_e,[r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_PUT_ACTIONS]),we=(0,S._)(_e,[r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_PUT_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],!0),Te=(0,S._)(_e,[r.OV.ADMIN_INSPECT_DATA]),Ce=(0,S._)(_e,[r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_OBJECT_VERSION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),ye=(0,S._)(_e,[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS]),Ee=(0,S._)([n,je,[n,F.name].join("/")],[r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS]);let Ie=(0,N.IZ)(he,je);const Ae=[{action:()=>{(0,P._)(x,n,t,F)},label:"Download",disabled:!!F.is_delete_marker||!ye,icon:(0,y.jsx)(m.s3U,{}),tooltip:ye?"Download this Object":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"download this object")},{action:()=>{O(!0)},label:"Share",disabled:!!F.is_delete_marker||!ye,icon:(0,y.jsx)(m.liv,{}),tooltip:ye?"Share this File":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"share this object")},{action:()=>{Q(!0)},label:"Preview",disabled:!!F.is_delete_marker||"none"===Ie&&!ye,icon:(0,y.jsx)(m.cyn,{}),tooltip:ye?"Preview this File":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"preview this object")},{action:()=>{k(!0)},label:"Legal Hold",disabled:!d||!p||!!F.is_delete_marker||!Se||""!==g,icon:(0,y.jsx)(m.ODz,{}),tooltip:Se?d?"Change Legal Hold rules for this File":"Object Locking must be enabled on this bucket in order to set Legal Hold":(0,r.vj)([r.OV.S3_PUT_OBJECT_LEGAL_HOLD,r.OV.S3_PUT_ACTIONS],"change legal hold settings for this object")},{action:()=>{C(!0)},label:"Retention",disabled:!p||!!F.is_delete_marker||!we||""!==g||!d,icon:(0,y.jsx)(m.gn6,{}),tooltip:we?d?"Change Retention rules for this File":"Object Locking must be enabled on this bucket in order to set Retention Rules":(0,r.vj)([r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_PUT_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"change Retention Rules for this object")},{action:()=>{I(!0)},label:"Tags",disabled:!!F.is_delete_marker||""!==g||!Oe,icon:(0,y.jsx)(m.P3Z,{}),tooltip:Oe?"Change Tags for this File":(0,r.vj)([r.OV.S3_PUT_OBJECT_TAGGING,r.OV.S3_GET_OBJECT_TAGGING,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"set Tags on this object")},{action:()=>{L(!0)},label:"Inspect",disabled:!p||!!F.is_delete_marker||""!==g||!Te,icon:(0,y.jsx)(m.nTF,{}),tooltip:Te?"Inspect this file":(0,r.vj)([r.OV.ADMIN_INSPECT_DATA],"inspect this file")},{action:()=>{x((0,c.cQ)({status:!j,objectName:ve}))},label:j?"Hide Object Versions":"Display Object Versions",icon:(0,y.jsx)(m.j1U,{}),disabled:!p||!(F.version_id&&"null"!==F.version_id)||!Ce,tooltip:Ce?F.version_id&&"null"!==F.version_id?"Display Versions for this file":"":(0,r.vj)([r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_OBJECT_VERSION,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,y.jsxs)(s.Fragment,{children:[_&&F&&(0,y.jsx)(K.default,{open:_,closeModalAndRefresh:()=>{W(null),O(!1)},bucketName:n,dataObject:z||F}),T&&F&&(0,y.jsx)(ee,{open:T,closeModalAndRefresh:e=>{C(!1),e&&x((0,c.oe)(!0))},objectName:je,objectInfo:F,bucketName:n}),$&&(0,y.jsx)(se,{deleteOpen:$,selectedBucket:n,selectedObject:t,closeDeleteModalAndRefresh:e=>{Z(!1),e&&""===g?u(!0):(x((0,c.SK)(!0)),x((0,c.Ai)("")),x((0,c.oe)(!0)))},versioningInfo:p?i:void 0,selectedVersion:g}),A&&F&&(0,y.jsx)(oe,{open:A,closeModalAndRefresh:e=>{k(!1),e&&x((0,c.oe)(!0))},objectName:F.name||"",bucketName:n,actualInfo:F}),q&&F&&(0,y.jsx)(M.default,{open:q,bucketName:n,actualInfo:F,onClosePreview:()=>{Q(!1)}}),E&&F&&(0,y.jsx)(ae,{modalOpen:E,bucketName:n,actualInfo:F,onCloseAndUpdate:e=>{I(!1),e&&x((0,c.oe)(!0))}}),B&&F&&(0,y.jsx)(re,{inspectOpen:B,volumeName:n,inspectPath:F.name||"",closeInspectModalAndRefresh:e=>{L(!1),e&&x((0,c.oe)(!0))}}),le&&F&&(0,y.jsx)(ce,{open:le,closeModal:()=>{ue(!1)},currentItem:je,bucketName:n,internalPaths:t,actualInfo:F}),f?(0,y.jsx)(s.Fragment,{children:fe}):(0,y.jsxs)(m.azJ,{sx:{"& .ObjectDetailsTitle":{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},"& .objectNameContainer":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},"& .capitalizeFirst":{textTransform:"capitalize"},"& .detailContainer":{padding:"0 22px",marginBottom:10,fontSize:14}},children:[(0,y.jsx)(m.Smc,{title:(0,y.jsxs)("div",{className:"ObjectDetailsTitle",children:[G(ve||"",!0),(0,y.jsx)("span",{className:"objectNameContainer",children:ve})]}),items:Ae}),(0,y.jsx)(V.A,{tooltip:Ee?"":(0,r.vj)([r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS],"delete this object"),children:(0,y.jsx)(m.xA9,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,y.jsx)(S.R,{resource:[n,je,[n,F.name].join("/")],scopes:[r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS],errorProps:{disabled:!0},children:(0,y.jsx)(m.$nd,{id:"delete-element-click",icon:(0,y.jsx)(m.d7y,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:()=>{Z(!0)},disabled:""===g&&F.is_delete_marker,sx:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete".concat(""!==g?" version":"")})})})}),(0,y.jsx)(m.kCK,{icon:(0,y.jsx)(m.Hch,{}),label:"Object Info"}),(0,y.jsxs)(m.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Name:"}),(0,y.jsx)("br",{}),(0,y.jsx)("div",{style:{overflowWrap:"break-word"},children:ve})]}),""!==g&&(0,y.jsxs)(m.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Version ID:"}),(0,y.jsx)("br",{}),g]}),(0,y.jsxs)(m.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Size:"}),(0,y.jsx)("br",{}),(0,b.nO)("".concat(F.size||"0"))]}),F.version_id&&"null"!==F.version_id&&""===g&&(0,y.jsxs)(m.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Versions:"}),(0,y.jsx)("br",{}),H.length,ne?"+":""," version",1!==H.length?"s":"",","," ",(0,b.qO)(X),ne?"+":""]}),""===g&&(0,y.jsxs)(m.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Last Modified:"}),(0,y.jsx)("br",{}),(e=>{const t=new Date,n=new Date(e),s=t.getTime()-n.getTime(),o=(0,b.eQ)(s,"ms");return""!==o.trim()?"".concat(o," ago"):"Just now"})(F.last_modified||"")]}),(0,y.jsxs)(m.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"ETAG:"}),(0,y.jsx)("br",{}),F.etag||"N/A"]}),(0,y.jsxs)(m.azJ,{className:"detailContainer",children:[(0,y.jsx)("strong",{children:"Tags:"}),(0,y.jsx)("br",{}),0===ge.length?"N/A":ge.map((e,t)=>(0,y.jsxs)("span",{children:[e,":",h()(F.tags,"".concat(e),""),t<ge.length-1?", ":""]},"key-vs-".concat(t.toString())))]}),(0,y.jsx)(m.azJ,{className:"detailContainer",children:(0,y.jsx)(S.R,{scopes:[r.OV.S3_GET_OBJECT_LEGAL_HOLD,r.OV.S3_GET_ACTIONS],resource:n,children:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("strong",{children:"Legal Hold:"}),(0,y.jsx)("br",{}),F.legal_hold_status?"On":"Off"]})})}),(0,y.jsx)(m.azJ,{className:"detailContainer",children:(0,y.jsx)(S.R,{scopes:[r.OV.S3_GET_OBJECT_RETENTION,r.OV.S3_GET_ACTIONS],resource:n,children:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("strong",{children:"Retention Policy:"}),(0,y.jsx)("br",{}),(0,y.jsx)("span",{className:"capitalizeFirst",children:(F.version_id&&F.version_id,(0,y.jsx)(s.Fragment,{children:F.retention_mode?F.retention_mode.toLowerCase():"None"}))})]})})}),!F.is_delete_marker&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(m.kCK,{label:"Metadata",icon:(0,y.jsx)(m.$vN,{})}),(0,y.jsx)(m.azJ,{className:"detailContainer",children:F&&he?(0,y.jsx)(J,{metaData:he}):null})]})]})]})},he=e=>{let{versionToRestore:t,bucketName:n,objectPath:o,restoreOpen:i,onCloseAndUpdate:r}=e;const d=(0,l.jL)(),[u,h]=(0,s.useState)(!1);return(0,y.jsx)(te.A,{title:"Restore File Version",confirmText:"Restore",isOpen:i,isLoading:u,titleIcon:(0,y.jsx)(m.YkU,{}),onConfirm:()=>{h(!0),a.F.buckets.putObjectRestore(n,{prefix:o,version_id:t.version_id||""}).then(()=>{h(!1),r(!0),d((0,c.NV)({prefix:o,objectInfo:t}))}).catch(e=>{d((0,w.C9)((0,x.S)(e.error))),h(!1)})},confirmButtonProps:{variant:"secondary",disabled:u},onClose:()=>{r(!1)},confirmationContent:(0,y.jsxs)(m.azJ,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,y.jsx)("br",{}),(0,y.jsx)("b",{children:o})," ",(0,y.jsx)("br",{})," with Version ID:",(0,y.jsx)("br",{}),(0,y.jsx)("b",{children:t.version_id}),"?"]})})},me=e=>{let{type:t}=e,n="#000",s="";switch(t){case"null":n="#07193E",s="NULL VERSION";break;case"deleted":n="#868686",s="DELETED";break;default:n="#174551",s="CURRENT VERSION"}return(0,y.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:s})},xe=v.Ay.div(e=>{let{theme:t}=e;return{"&:before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:h()(t,"borderColor","#F8F8F8"),left:"24px"},"& .mainFileVersionItem":{borderBottom:"".concat(h()(t,"borderColor","#F8F8F8")," 1px solid"),padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"}},"& .intermediateLayer":{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:h()(t,"boxBackground","#F8F8F8"),"& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10}},"& .buttonContainer":{textAlign:"right","& button":{marginLeft:"1.5rem"}},"& .versionID":{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},"& .versionData":{marginRight:"10px",fontSize:12,color:"#868686"},"@media (max-width: 600px)":{"& .buttonContainer":{"& button":{marginLeft:"5px"}}},"@media (max-width: 799px)":{"&:before":{display:"none"},"& .mainFileVersionItem":{padding:"5px 0px",margin:0},"& .intermediateLayer":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:h()(t,"boxBackground","#F8F8F8")}}},"& .versionContainer":{fontSize:14,"& svg.min-icon":{display:"none"}},"& .versionData":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"},"& .collapsableInfo":{display:"flex",flexDirection:"column"},"& .versionItem":{display:"none"}}}}),pe=e=>{let{fileName:t,versionInfo:n,isSelected:s,checkable:o,isChecked:i,onCheck:a,onShare:l,onDownload:r,onRestore:c,onPreview:d,globalClick:u,index:h,key:x,style:p}=e;const g=n.is_delete_marker,f=[{icon:(0,y.jsx)(m.cyn,{}),action:d,tooltip:"Preview"},{icon:(0,y.jsx)(m.s3U,{}),action:r,tooltip:"Download this version"},{icon:(0,y.jsx)(m.liv,{}),action:l,tooltip:"Share this version"},{icon:(0,y.jsx)(m.YkU,{}),action:c,tooltip:"Restore this version"}];let v=null;n.is_delete_marker?v="deleted":n.is_latest?v="current":"null"===n.version_id&&(v="null");let _=j.c9.now();return n.last_modified&&(_=j.c9.fromISO(n.last_modified)),(0,y.jsx)(xe,{children:(0,y.jsx)(m.xA9,{container:!0,className:"ctrItem",onClick:()=>{u(n)},style:p,children:(0,y.jsx)(m.xA9,{item:!0,xs:12,className:"intermediateLayer".concat(" ",s?"selected":""),children:(0,y.jsxs)(m.xA9,{item:!0,xs:!0,className:"mainFileVersionItem ".concat(n.is_delete_marker?"deleted":""),children:[(0,y.jsx)(m.xA9,{item:!0,xs:12,children:(0,y.jsxs)(m.xA9,{container:!0,children:[(0,y.jsxs)(m.xA9,{item:!0,xs:!0,md:4,className:"versionContainer",sx:{".inputItem":{width:"auto"}},children:[o&&(0,y.jsx)(m.Sc0,{checked:i,id:"select-".concat(n.version_id),name:"select-".concat(n.version_id),onChange:e=>{e.stopPropagation(),a(n.version_id||"")},value:n.version_id||"",disabled:n.is_delete_marker,sx:{width:"initial"}}),G(t,!0)," v",h.toString(),(0,y.jsx)("span",{className:"versionItem",children:v&&(0,y.jsx)(me,{type:v})})]}),(0,y.jsx)(m.xA9,{item:!0,xs:10,md:8,className:"buttonContainer",children:f.map((e,t)=>(0,y.jsx)(m.m_M,{tooltip:e.tooltip,children:(0,y.jsx)(m.K0,{size:"small",id:"version-action-".concat(e.tooltip,"-").concat(t.toString()),className:"spacing".concat(" ",g?"buttonDisabled":""),disabled:g,onClick:t=>{t.stopPropagation(),g?t.preventDefault():e.action(n)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},"version-action-".concat(e.tooltip,"-").concat(t.toString())))})]})}),(0,y.jsx)(m.xA9,{item:!0,xs:12,className:"versionID",children:"null"!==n.version_id?n.version_id:"-"}),(0,y.jsxs)(m.xA9,{item:!0,xs:12,className:"collapsableInfo",children:[(0,y.jsxs)("span",{className:"versionData",children:[(0,y.jsx)("strong",{children:"Last modified:"})," ",_.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,y.jsxs)("span",{className:"versionData",children:[(0,y.jsx)("strong",{children:"Size:"})," ",(0,b.nO)("".concat(n.size||"0"))]})]})]})})},x)})},je=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedObject:c}=e;const d=(0,l.jL)(),[u,h]=(0,s.useState)(!1),[p,j]=(0,s.useState)(""),[b,g]=(0,s.useState)(!1),f=(0,o.d4)(e=>e.objectBrowser.retentionConfig),v=(0,S._)([i],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===f||void 0===f?void 0:f.mode);if((0,s.useEffect)(()=>{u&&a.F.buckets.deleteObject(i,{prefix:c,non_current_versions:!0,bypass:b}).then(()=>{t(!0)}).catch(e=>{d((0,w.C9)((0,x.S)(e.error))),h(!1)})},[u,t,d,c,i,b]),!c)return null;return(0,y.jsx)(te.A,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:n,titleIcon:(0,y.jsx)(m.xWY,{}),isLoading:u,onConfirm:()=>{h(!0)},onClose:()=>t(!1),confirmButtonProps:{disabled:"YES, PROCEED"!==p||u},confirmationContent:(0,y.jsxs)(s.Fragment,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,y.jsx)("b",{children:c}),"? ",(0,y.jsx)("br",{}),v&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)("div",{style:{marginTop:10},children:(0,y.jsx)(m.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:b,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{g(!b)},description:""})})}),(0,y.jsx)("br",{}),"To continue please type ",(0,y.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,y.jsx)("br",{}),(0,y.jsx)("br",{}),(0,y.jsx)(m.xA9,{item:!0,xs:12,children:(0,y.jsx)(m.cl_,{id:"type-confirm",name:"retype-tenant",onChange:e=>{j(e.target.value)},label:"",value:p})})]})})},be=e=>{let{closeDeleteModalAndRefresh:t,deleteOpen:n,selectedBucket:i,selectedVersions:c,selectedObject:d}=e;const u=(0,l.jL)(),[h,p]=(0,s.useState)(!1),[j,b]=(0,s.useState)(!1),g=(0,o.d4)(e=>e.objectBrowser.retentionConfig),f=(0,S._)([i],[r.OV.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===g||void 0===g?void 0:g.mode);return(0,s.useEffect)(()=>{if(h){const e=c.map(e=>({path:d,versionID:e,recursive:!1}));e.length>0&&a.F.buckets.deleteMultipleObjects(i,e,{all_versions:!1,bypass:j}).then(()=>{p(!1),t(!0)}).catch(e=>{u((0,w.C9)((0,x.S)(e.error))),p(!1)})}},[h,t,i,d,c,j,u]),c?(0,y.jsx)(te.A,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:n,titleIcon:(0,y.jsx)(m.xWY,{}),isLoading:h,onConfirm:()=>{p(!0)},onClose:()=>t(!1),confirmationContent:(0,y.jsxs)(s.Fragment,{children:["Are you sure you want to delete the selected ",c.length," ","versions for ",(0,y.jsx)("strong",{children:d}),"?",f&&(0,y.jsx)(s.Fragment,{children:(0,y.jsx)("div",{style:{marginTop:10},children:(0,y.jsx)(m.dOG,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:j,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:e=>{b(!j)},description:""})})})]})}):null};var ge=n(85049);const fe={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:0,tags:{},version_id:void 0},ve=e=>{let{internalPaths:t,bucketName:n}=e;const i=(0,l.jL)(),r=(0,o.d4)(e=>e.objectBrowser.searchVersions),d=(0,o.d4)(e=>e.objectBrowser.loadingVersions),u=(0,o.d4)(e=>e.objectBrowser.selectedVersion),p=(0,o.d4)(e=>e.objectBrowser.versionsLimit),j=(0,o.d4)(w.Rq),[g,f]=(0,s.useState)(!1),[v,_]=(0,s.useState)(null),[S,O]=(0,s.useState)(null),[T,C]=(0,s.useState)([]),[E,I]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),[B,L]=(0,s.useState)(null),[F,D]=(0,s.useState)("date"),[R,U]=(0,s.useState)(!1),[z,G]=(0,s.useState)(!1),[J,W]=(0,s.useState)(!1),[H,Y]=(0,s.useState)([]),[$,Z]=(0,s.useState)(!1);let q=[];v&&v.name&&(q=v.name.split("/")),(0,s.useEffect)(()=>{d||v||i((0,c.SK)(!0))},[d,v,i]),(0,s.useEffect)(()=>{d&&""!==t&&a.F.buckets.listObjects(n,{prefix:t,with_versions:j,limit:p+1}).then(e=>{const n=h()(e.data,"objects",[]);I(n.length>p),n.splice(p);const s=n.filter(e=>e.name===t);j?(_(s.find(e=>e.is_latest)||fe),C(s)):(_(s[0]),C([])),i((0,c.SK)(!1))}).catch(e=>{i((0,w.C9)((0,x.S)(e.error))),i((0,c.SK)(!1))})},[d,n,t,i,j,p]);const Q=e=>{O(e),f(!0)},X=e=>{O(e),U(!0)},ee=e=>{L(e),k(!0)},te=e=>{(0,P._)(i,n,t,e)},ne=e=>{i((0,c.Ai)(e.version_id||""))},se=T.filter(e=>!!e.version_id&&e.version_id.includes(r)),oe=e=>{Z(!1),e&&(i((0,c.SK)(!0)),i((0,c.Ai)("")),i((0,c.oe)(!0)),Y([]))},ie=T.reduce((e,t)=>t.size?e+t.size:e,0);se.sort((e,t)=>{if("size"===F)return e.size&&t.size?e.size<t.size?-1:e.size>t.size?1:0:0;{const n=new Date(e.last_modified||"").getTime(),s=new Date(t.last_modified||"").getTime();return n<s?1:n>s?-1:0}});const ae=e=>{if(H.includes(e)){const t=H.filter(t=>t!==e);return void Y(t)}const t=[...H];t.push(e),Y(t)};return(0,y.jsxs)(s.Fragment,{children:[g&&v&&(0,y.jsx)(K.default,{open:g,closeModalAndRefresh:()=>{O(null),f(!1),U(!1)},bucketName:n,dataObject:S||v}),N&&v&&B&&(0,y.jsx)(he,{restoreOpen:N,bucketName:n,versionToRestore:B,objectPath:v.name||"",onCloseAndUpdate:e=>{k(!1),L(null),e&&(i((0,c.SK)(!0)),i((0,c.oe)(!0)))}}),R&&v&&(0,y.jsx)(M.default,{open:R,bucketName:n,actualInfo:{name:v.name||"",version_id:S&&S.version_id?S.version_id:"null",size:S&&S.size?S.size:0,content_type:"",last_modified:v.last_modified||""},onClosePreview:()=>{U(!1)}}),z&&(0,y.jsx)(je,{deleteOpen:z,closeDeleteModalAndRefresh:e=>{G(!1),e&&(i((0,c.SK)(!0)),i((0,c.Ai)("")),i((0,c.oe)(!0)))},selectedBucket:n,selectedObject:t}),$&&(0,y.jsx)(be,{selectedBucket:n,selectedObject:t,deleteOpen:$,selectedVersions:H,closeDeleteModalAndRefresh:oe}),(0,y.jsxs)(m.xA9,{container:!0,sx:{width:"100%",padding:10,"@media (max-width: 799px)":{minHeight:800}},children:[!v&&(0,y.jsx)(m.xA9,{item:!0,xs:12,children:(0,y.jsx)(m.z21,{})}),v&&(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(m.xA9,{item:!0,xs:12,children:(0,y.jsx)(A,{bucketName:n,internalPaths:t,hidePathButton:!0})}),(0,y.jsx)(m.xA9,{item:!0,xs:12,sx:{position:"relative","& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}},["@media (max-width: ".concat(m.nmC.md,"px)")]:{"&::before":{display:"none"}}},children:(0,y.jsx)(m.lcx,{icon:(0,y.jsx)("span",{style:{display:"block",marginTop:"-10px"},children:(0,y.jsx)(m.j1U,{style:{width:20,height:20}})}),title:"".concat(q.length>0?q[q.length-1]:v.name," Versions"),subTitle:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)("span",{className:"detailsSpacer",children:(0,y.jsxs)("strong",{children:[T.length,E?"+":""," Version",1===T.length?"":"s","\xa0\xa0\xa0"]})}),(0,y.jsx)("span",{className:"detailsSpacer",children:(0,y.jsxs)("strong",{children:[(0,b.qO)(ie),E?"+":""]})}),E&&(0,y.jsx)(V.A,{tooltip:"Load more Versions",children:(0,y.jsx)(m.$nd,{label:"Load more",id:"load-more-versions",onClick:()=>{i((0,c.Vk)(p+10)),oe(!0)},icon:(0,y.jsx)(m.fNY,{}),variant:"regular",style:{marginLeft:50}})})]}),actions:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(V.A,{tooltip:"Select Multiple Versions",children:(0,y.jsx)(m.$nd,{id:"select-multiple-versions",onClick:()=>{W(!J)},icon:(0,y.jsx)(m.IN,{}),variant:J?"callAction":"regular",style:{marginRight:8}})}),J&&(0,y.jsx)(V.A,{tooltip:"Delete Selected Versions",children:(0,y.jsx)(m.$nd,{id:"delete-multiple-versions",onClick:()=>{Z(!0)},icon:(0,y.jsx)(m.d7y,{}),variant:"secondary",style:{marginRight:8},disabled:0===H.length})}),(0,y.jsx)(V.A,{tooltip:"Delete Non Current Versions",children:(0,y.jsx)(m.$nd,{id:"delete-non-current",onClick:()=>{G(!0)},icon:(0,y.jsx)(m.rgY,{}),variant:"secondary",style:{marginRight:15},disabled:T.length<=1})}),(0,y.jsx)(m.l6P,{id:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}],value:F,label:"Sort by",onChange:e=>{D(e)},noLabelMinWidth:!0})]}),bottomBorder:!1})}),(0,y.jsx)(m.xA9,{item:!0,xs:12,sx:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto",["@media (max-width: ".concat(m.nmC.md,"px)")]:{height:600}},children:v.version_id&&"null"!==v.version_id&&(0,y.jsx)(ge.B8,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:se.length,rowHeight:108,rowRenderer:e=>{let{key:t,index:n,isScrolling:s,isVisible:o,style:i}=e;const a=T.length-n;return(0,y.jsx)(pe,{style:i,fileName:(null===v||void 0===v?void 0:v.name)||"",versionInfo:se[n],index:a,onDownload:te,onRestore:ee,onShare:Q,onPreview:X,globalClick:ne,isSelected:u===se[n].version_id,checkable:J,onCheck:ae,isChecked:H.includes(se[n].version_id||"")},t)}})})]})]})]})},_e=e=>{if(e.name.endsWith("/"))return"";const t=j.c9.now(),n=j.c9.fromISO(e.last_modified);return t.hasSame(n,"day")&&t.hasSame(n,"month")&&t.hasSame(n,"year")?"Today, ".concat(n.toFormat("HH:mm")):n.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},Se=e=>e.name.endsWith("/")||!e.size?"-":(0,b.nO)(String(e.size)),Oe=[{label:"Name",elementKey:"name",renderFunction:G,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:_e,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:Se,renderFullObject:!0,width:100,enableSort:!0}],we=[{label:"Name",elementKey:"name",renderFunction:G,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:_e,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:Se,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:e=>e?"Yes":"No",width:60}];var Te=n(86070);const Ce=()=>{const e=(0,l.jL)(),t=(0,i.g)(),n=(0,i.Zp)(),[a,d]=(0,s.useState)("ASC"),[u,x]=(0,s.useState)("name"),p=t.bucketName||"",j=(0,o.d4)(e=>e.objectBrowser.objectDetailsOpen),b=(0,o.d4)(e=>e.objectBrowser.requestInProgress),g=(0,o.d4)(Te.s$),f=!(null===g||void 0===g||!g.includes("object-browser-only")),v=(0,o.d4)(e=>e.objectBrowser.rewind.rewindEnabled),_=(0,o.d4)(e=>e.objectBrowser.records),O=(0,o.d4)(e=>e.objectBrowser.searchObjects),w=(0,o.d4)(e=>e.objectBrowser.selectedObjects),T=(0,o.d4)(e=>e.objectBrowser.connectionError),C=(0,o.d4)(e=>e.system.anonymousMode),E=(0,S._)(p,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET]),I=_.filter(e=>{if(""===O)return!0;return e.name.toLowerCase().indexOf(O.toLowerCase())>=0}).sort((0,N.$w)(u));let A=[];A="ASC"===a?I:I.reverse();const k=[{type:"view",tooltip:"View",onClick:t=>{var s;const o=t.name||"",i="/browser/".concat(encodeURIComponent(p)).concat(o?"/".concat(encodeURIComponent(o)):"");!C||null!==(s=t.name)&&void 0!==s&&s.endsWith("/")?(e((0,c.KX)([])),n(i),C||(e((0,c.TO)(!0)),e((0,c.SK)(!0))),e((0,c.A7)(o))):(0,P._)(e,p,o,t)},sendOnlyId:!1}];let B=E||C?"This location is empty".concat(v?"":", please try uploading a new file"):(0,r.vj)([r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],"view Objects in this bucket");T&&(B="Objects List unavailable. Please review your WebSockets configuration and try again");let L="calc(100vh - 290px)";return f&&(L="calc(100vh - 315px)"),(0,y.jsx)(m.bQt,{itemActions:k,columns:v?we:Oe,isLoading:b,entityName:"Objects",idField:"name",records:A,customPaperHeight:L,selectedItems:w,onSelect:C?void 0:t=>{const n=t.target,s=n.value,o=n.checked;let i=[...w];return o?i.push(s):i=i.filter(e=>e!==s),e((0,c.KX)(i)),e((0,c.A7)(null)),i},customEmptyMessage:B,sortEnabled:{currentSort:u,currentDirection:a,onSortClick:t=>{const n=h()(t,"sortDirection","DESC");x(t.sortBy),d(n),e((0,c.Yw)(!0))}},onSelectAll:()=>{if(e((0,c.A7)(null)),w.length===A.length)return void e((0,c.KX)([]));const t=A.map(e=>e.name);e((0,c.KX)(t))},rowStyle:e=>{var t;let{index:n}=e;return null!==(t=A[n])&&void 0!==t&&t.delete_flag?"deleted":""},sx:{minHeight:j?"100%":"initial"},noBackground:!0})};var ye=n(27428);const Ee=()=>{const e=(0,l.jL)(),t=(0,o.d4)(e=>e.objectBrowser.searchObjects);return(0,y.jsx)(ye.A,{placeholder:"Start typing to filter objects in the bucket",onChange:t=>{e((0,c.$X)(t))},value:t})};var Ie=n(54945);const Ae=(0,O.A)(s.lazy(()=>n.e(66).then(n.bind(n,50066)))),Ne=(0,O.A)(s.lazy(()=>Promise.resolve().then(n.bind(n,21572)))),ke=(0,O.A)(s.lazy(()=>n.e(3697).then(n.bind(n,53697)))),Be=(0,O.A)(s.lazy(()=>Promise.resolve().then(n.bind(n,39971)))),Le={borderWidth:2,borderRadius:2,borderColor:"transparent",outline:"none"},Fe={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#2196f3"},Ve={borderStyle:"dashed",backgroundColor:"transparent",borderColor:"#00e676"},De=()=>{var e;const t=(0,l.jL)(),n=(0,i.g)(),u=(0,i.Zp)(),g=(0,i.zy)(),f=(0,o.d4)(e=>e.objectBrowser.rewind.rewindEnabled),v=(0,o.d4)(e=>e.objectBrowser.rewind.bucketToRewind),_=(0,o.d4)(e=>e.objectBrowser.versionsMode),O=(0,o.d4)(e=>e.objectBrowser.showDeleted),E=(0,o.d4)(e=>e.objectBrowser.objectDetailsOpen),I=(0,o.d4)(e=>e.objectBrowser.selectedInternalPaths),P=(0,o.d4)(e=>e.objectBrowser.requestInProgress),U=(0,o.d4)(e=>e.objectBrowser.simplePath),z=(0,o.d4)(e=>e.objectBrowser.versionInfo),G=(0,o.d4)(e=>e.objectBrowser.lockingEnabled),M=(0,o.d4)(e=>e.objectBrowser.downloadRenameModal),J=(0,o.d4)(e=>e.objectBrowser.selectedPreview),K=(0,o.d4)(e=>e.objectBrowser.shareFileModalOpen),W=(0,o.d4)(e=>e.objectBrowser.previewOpen),H=(0,o.d4)(e=>e.objectBrowser.selectedBucket),Y=(0,o.d4)(e=>e.system.anonymousMode),$=(0,o.d4)(e=>e.objectBrowser.anonymousAccessOpen),Z=(0,o.d4)(e=>{var t;return(null===(t=e.objectBrowser)||void 0===t?void 0:t.records)||[]}),q=(0,o.d4)(L.Nx),Q=(0,o.d4)(L.fT),[X,ee]=(0,s.useState)(!1),[te,ne]=(0,s.useState)(!1),[se,oe]=(0,s.useState)(!1),[ie,ae]=(0,s.useState)(!1),[le,re]=(0,s.useState)(!1),[de,he]=(0,s.useState)(null),[me,xe]=(0,s.useState)(null),[pe,je]=(0,s.useState)(!1),be=k(z.status),ge=n.bucketName||"",fe=g.pathname.split("/browser/".concat(ge,"/")),_e=2===fe.length?decodeURIComponent(fe[1]):"",Se=_e.split("/").filter(e=>""!==e);let Oe=[ge];Se.length>0&&(Oe=Oe.concat(Se));const we=(0,s.useRef)(null),Te=(0,s.useRef)(null),ye=(0,o.d4)(e=>e.console.session&&e.console.session.permissions||{}),De=[r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],Re=Oe.join("/"),Pe=function(e,t){const n=C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).reduce((e,t)=>{const n=T(t);return n&&e.push(".".concat(n)),e},[]);return[...new Set(n)].join(",")}(ye,Re,De),Ue=C(ye,Re,De),ze=(0,S._)([Re,...Ue],[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS]),Ge=(0,S._)(ge,[r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_GET_BUCKET_VERSIONING]),Me=(0,S._)([Re,...Ue],[r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS]),Je=(0,S._)([Re,...Ue],De)||Y,Ke=(0,S._)(ge,[r.OV.S3_GET_BUCKET_POLICY,r.OV.S3_PUT_BUCKET_POLICY,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),We=(0,o.d4)(e=>e.objectBrowser.selectedObjects),He=(()=>{let e=!1;if(1===We.length){e=!!Z.find(e=>e.name==="".concat(We[0])&&e.delete_flag)}return e})(),Ye=(0,s.useCallback)(()=>{const e=We[0];!pe&&e&&a.F.buckets.getObjectMetadata(ge,{prefix:e}).then(e=>{let t=h()(e.data,"objectMetadata",{});je(!0),xe(t)}).catch(e=>{console.error("Error Getting Metadata Status: ",e,null===e||void 0===e?void 0:e.detailedError),je(!0)})},[ge,We,pe]);(0,s.useEffect)(()=>{ge&&!He&&Ye()},[ge,We,Ye,He]),(0,s.useEffect)(()=>{f&&v!==ge&&t((0,c.rS)())},[f,v,ge,t]),(0,s.useEffect)(()=>{null!==Te.current&&(Te.current.setAttribute("directory",""),Te.current.setAttribute("webkitdirectory",""))},[Te]),(0,s.useEffect)(()=>{if(1===We.length){const e=We[0],t=e.endsWith("/");let n=(0,N.IZ)(me,e);re(!("none"===n||!ze)),ae(!(!ze||t))}else ae(!1),re(!1)},[We,ze,me]),(0,s.useEffect)(()=>{de||Y||a.F.buckets.getBucketQuota(ge).then(e=>{let t=null;e.data.quota&&(t=e.data),he(t)}).catch(e=>{console.error("Error Getting Quota Status: ",e.error.detailedMessage),he(null)})},[de,ge,Y]),(0,s.useEffect)(()=>{We.length>0?t((0,c.TO)(!0)):0!==We.length||null!==I||P||t((0,c.TO)(!1))},[We,I,t,P]),(0,s.useEffect)(()=>{se||(t((0,L.ZU)(!0)),oe(!0))},[se,t,oe]),(0,s.useEffect)(()=>{!P&&!q||Y||a.F.buckets.bucketInfo(ge).then(e=>{t((0,L.ZU)(!1)),t((0,L.$T)(e.data))}).catch(e=>{t((0,L.ZU)(!1)),t((0,w.C9)((0,x.S)(e)))})},[ge,q,t,Y,P]),(0,s.useEffect)(()=>{""!==H&&a.F.buckets.getBucketRetentionConfig(H).then(e=>{t((0,c.PJ)(e.data))}).catch(()=>{t((0,c.PJ)(null))})},[H,t]);const $e=e=>{if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();var t=[];for(let n=0;n<e.target.files.length;n++)t.push(e.target.files[n]);Ze(t,""),e.target.value=""}},Ze=(0,s.useCallback)((e,n)=>{let s="";U&&(s=U.endsWith("/")?U:U+"/");((e,n,s,o)=>{let i=i=>new Promise((a,l)=>{let r="api/v1/buckets/".concat(n,"/objects/upload");const d=i.name,u=new Blob([i],{type:i.type}),m=(e=>e.replace(/(^|\/)\.\//g,"/"))(h()(i,"path","")),x=h()(i,"webkitRelativePath","");let p=o;const j=(0,B.E0)(8);""!==m?p=m:""!==x&&(p=x);let b="";if(""!==s||""!==p){const e=p.split("/").slice(0,-1).join("/"),t=s.endsWith("/")?s.slice(0,-1):s;b="".concat(t).concat(t.endsWith("/")||""===e||e.startsWith("/")?"":"/").concat(e).concat(!e.endsWith("/")||""===e.trim()&&!s.endsWith("/")?"/":"")}r=""!==b?"".concat(r,"?prefix=").concat(encodeURIComponent(b+d)):"".concat(r,"?prefix=").concat(encodeURIComponent(d));const g=encodeURIComponent("".concat(n,"-").concat(b,"-").concat((new Date).getTime(),"-").concat(Math.random()));let f=new XMLHttpRequest;f.open("POST",r,!0),Y&&f.setRequestHeader("X-Anonymous","1");const v=e.length>1;let _="An error occurred while uploading the file".concat(v?"s":"",".");const S={413:"Error - File size too large"};f.withCredentials=!1,f.onload=function(){if(f.status>=200&&f.status<300)t((0,c.rx)(g)),a({status:f.status}),(0,B.vy)(j);else{if(S[f.status])_=S[f.status];else if(f.response)try{const e=JSON.parse(f.response);_=e.detailedMessage}catch(e){_="something went wrong"}t((0,c.iL)({instanceID:g,msg:_})),l({status:f.status,message:_}),(0,B.vy)(j)}},f.upload.addEventListener("error",()=>{l(_),t((0,c.iL)({instanceID:g,msg:"A network error occurred."}))}),f.upload.addEventListener("progress",e=>{const n=Math.floor(100*e.loaded/e.total);t((0,c.DW)({instanceID:g,progress:n}))}),f.onerror=()=>{l(_),t((0,c.iL)({instanceID:g,msg:"A network error occurred."}))},f.onloadend=()=>{0===e.length&&t((0,c.Yw)(!0))},f.onabort=()=>{t((0,c.Dm)(g))};const O=new FormData;void 0!==i.size&&(O.append(i.size.toString(),u,d),(0,B.FP)(j,f),t((0,c.cP)({ID:j,bucketName:n,done:!1,instanceID:g,percentage:0,prefix:"".concat(b).concat(d),type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,B.vx)(j,O))});const a=[];t((0,c.Nu)());for(let t=0;t<e.length;t++){const n=e[t];a.push(i(n))}Promise.allSettled(a).then(e=>{const n=e.filter(e=>"rejected"===e.status);if(n.length>0){const e=a.length,s=a.length-n.length,o={errorMessage:"There were some errors during file upload",detailedError:"Uploaded files ".concat(s,"/").concat(e)};t((0,w.C9)(o))}t((0,c.Yw)(!0))})})(e,ge,s,n)},[ge,t,U,Y]),qe=(0,s.useCallback)(e=>{if(e&&e.length>0&&Je){let n=e[0].path,s=e;Pe.length>0&&(s=e.filter(e=>{const t=T(e.name);return Pe.includes(t)})),s.length?(Ze(s,n),console.log("".concat(s.length," Allowed Files Processed out of ").concat(e.length,"."),Re,...Ue),s.length!==e.length&&t((0,w.C9)({errorMessage:"Upload is restricted.",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")}))):(t((0,w.C9)({errorMessage:"Could not process drag and drop.",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")})),console.error("Could not process drag and drop . upload may be restricted.",Re,...Ue))}Je||t((0,w.C9)({errorMessage:"Upload not allowed",detailedError:(0,r.vj)([r.OV.S3_PUT_OBJECT,r.OV.S3_PUT_ACTIONS],"upload objects to this location")}))},[Ze]),{getRootProps:Qe,getInputProps:Xe,isDragActive:et,isDragAccept:tt}=(0,p.VB)({noClick:!0,onDrop:qe}),nt=(0,s.useMemo)(()=>(0,d.A)((0,d.A)((0,d.A)({},Le),et?Fe:{}),tt?Ve:{}),[et,tt]),st=e=>{if(t((0,c.A7)(null)),t((0,c.cQ)({status:!1})),E&&null!==I){const e=_e.split("/");e.pop();let t="";e&&e.length>0&&(t="".concat(e.join("/"),"/")),u("/browser/".concat(encodeURIComponent(ge),"/").concat(encodeURIComponent(t)))}t((0,c.TO)(!1)),e&&t((0,c.Yw)(!0))};let ot=j.c9.now();null!==Q&&void 0!==Q&&Q.creation_date&&(ot=j.c9.fromISO(Q.creation_date));const it=(null===We||void 0===We?void 0:We.length)<=1?"Download Selected":" Download selected objects as Zip. Any Deleted objects in the selection would be skipped from download.",at=[{action:()=>{t((0,F.op)(ge))},label:"Download",disabled:!ze||He,icon:(0,y.jsx)(m.s3U,{}),tooltip:ze?it:(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS],"download objects from this bucket")},{action:()=>{t((0,F.mS)())},label:"Share",disabled:1!==We.length||!ie||He,icon:(0,y.jsx)(m.liv,{}),tooltip:ie?"Share Selected File":"Sharing unavailable"},{action:()=>{t((0,F.HS)())},label:"Preview",disabled:1!==We.length||!le||He,icon:(0,y.jsx)(m.cyn,{}),tooltip:le?"Preview Selected File":"Preview unavailable"},{action:()=>{t((0,F.oz)())},label:"Anonymous Access",disabled:1!==We.length||!We[0].endsWith("/")||!Ke,icon:(0,y.jsx)(m._kf,{}),tooltip:1===We.length&&We[0].endsWith("/")?"Set Anonymous Access to this Folder":"Anonymous Access unavailable"},{action:()=>{ee(!0)},label:"Delete",icon:(0,y.jsx)(m.d7y,{}),disabled:!Me||0===We.length,tooltip:Me?"Delete Selected Files":(0,r.vj)([r.OV.S3_DELETE_OBJECT,r.OV.S3_DELETE_ACTIONS],"delete objects in this bucket")}];return(0,y.jsxs)(s.Fragment,{children:[K&&J&&(0,y.jsx)(Ne,{open:K,closeModalAndRefresh:()=>{t((0,c.Lf)(!1)),t((0,c.go)(null))},bucketName:ge,dataObject:{name:J.name,last_modified:"",version_id:J.version_id}}),X&&(0,y.jsx)(Ae,{deleteOpen:X,selectedBucket:ge,selectedObjects:We,closeDeleteModalAndRefresh:e=>{ee(!1),e&&(t((0,w.Hk)("Objects deleted successfully.")),t((0,c.KX)([])),t((0,c.Yw)(!0)))},versioning:z}),te&&(0,y.jsx)(ke,{open:te,closeModalAndRefresh:()=>{ne(!1)},bucketName:ge}),W&&J&&(0,y.jsx)(Be,{open:W,bucketName:ge,actualInfo:{name:J.name||"",last_modified:"",version_id:J.version_id||"",size:J.size||0},onClosePreview:()=>{t((0,c.xE)(!1)),t((0,c.go)(null))}}),!!M&&(0,y.jsx)(ce,{open:!!M,closeModal:()=>{t((0,c.Ew)(null))},currentItem:(null===(e=M.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:ge,internalPaths:_e,actualInfo:{name:M.name,last_modified:"",version_id:M.version_id,size:M.size}}),$&&(0,y.jsx)(Ie.default,{onClose:()=>{t((0,c.I8)(!1))},bucket:ge,modalOpen:$,prefilledRoute:"".concat(We[0],"*")}),(0,y.jsxs)(m.Mxu,{variant:"full",children:[Y&&(0,y.jsx)("div",{style:{paddingBottom:16},children:(0,y.jsx)(Ee,{})}),(0,y.jsx)(m.azJ,{withBorders:!0,sx:{padding:"0 5px"},children:(0,y.jsx)(m.lcx,{icon:(0,y.jsx)("span",{children:(0,y.jsx)(m.brV,{style:{width:30}})}),title:ge,subTitle:Y?null:(0,y.jsxs)(m.azJ,{sx:{"& .detailsSpacer":{marginRight:18,"@media (max-width: 600px)":{marginRight:0}}},children:[(0,y.jsxs)("span",{className:"detailsSpacer",children:["Created on:\xa0",(0,y.jsx)("strong",{children:null!==Q&&void 0!==Q&&Q.creation_date?ot.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,y.jsxs)("span",{className:"detailsSpacer",children:["Access:\xa0\xa0",(0,y.jsx)("strong",{children:(null===Q||void 0===Q?void 0:Q.access)||""})]}),Q&&(0,y.jsx)(s.Fragment,{children:(0,y.jsxs)("span",{className:"detailsSpacer",children:[Q.size&&(0,y.jsx)(s.Fragment,{children:(0,b.qO)(Q.size)}),Q.size&&de&&(0,y.jsxs)(s.Fragment,{children:[" ","/ ",(0,b.qO)(de.quota||0)]}),Q.size&&Q.objects?" - ":"",Q.objects&&(0,y.jsxs)(s.Fragment,{children:[Q.objects,"\xa0Object",Q.objects&&1!==Q.objects?"s":""]})]})})]}),actions:(0,y.jsxs)(s.Fragment,{children:[!Y&&(0,y.jsx)(V.A,{tooltip:Ge?"Rewind Bucket":(0,r.vj)([r.OV.S3_GET_OBJECT,r.OV.S3_GET_ACTIONS,r.OV.S3_GET_BUCKET_VERSIONING],"apply rewind in this bucket"),children:(0,y.jsx)(m.$nd,{id:"rewind-objects-list",label:"Rewind",icon:(0,y.jsx)(m.Exy,{color:"alert",dotOnly:!0,invisible:!f,children:(0,y.jsx)(m.osr,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:()=>{ne(!0)},disabled:!be||!Ge})}),(0,y.jsx)(V.A,{tooltip:"Reload List",children:(0,y.jsx)(m.$nd,{id:"refresh-objects-list",label:"Refresh",icon:(0,y.jsx)(m.fNY,{}),variant:"regular",onClick:()=>{_?t((0,c.SK)(!0)):(t((0,c.A3)()),t((0,c.Yw)(!0)))},disabled:!Y&&(!(0,S._)(ge,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET])||f)})}),(0,y.jsx)("input",{type:"file",multiple:!0,accept:Pe||void 0,onChange:$e,style:{display:"none"},ref:we}),(0,y.jsx)("input",{type:"file",multiple:!0,onChange:$e,style:{display:"none"},ref:Te}),(0,y.jsx)(D,{bucketName:ge,uploadPath:Re,uploadFileFunction:e=>{we&&we.current&&we.current.click(),e()},uploadFolderFunction:e=>{Te&&Te.current&&Te.current.click(),e()}})]}),bottomBorder:!1})}),(0,y.jsxs)("div",(0,d.A)((0,d.A)({id:"object-list-wrapper"},Qe({style:(0,d.A)({},nt)})),{},{children:[(0,y.jsx)("input",(0,d.A)({},Xe())),(0,y.jsxs)(m.azJ,{withBorders:!0,sx:{display:"flex",borderTop:0,padding:0,"& .hideListOnSmall":{"@media (max-width: 799px)":{display:"none"}}},children:[_?(0,y.jsx)(s.Fragment,{children:null!==I&&(0,y.jsx)(ve,{internalPaths:I,bucketName:ge})}):(0,y.jsx)(S.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:ge,errorProps:{disabled:!0},children:(0,y.jsxs)(m.xA9,{item:!0,xs:12,sx:{width:"100%",position:"relative","&.detailsOpen":{"@media (max-width: 799px)":{display:"none"}}},className:E?"detailsOpen":"",children:[!Y&&(0,y.jsx)(m.xA9,{item:!0,xs:12,sx:{padding:"12px 14px 5px"},children:(0,y.jsx)(A,{bucketName:ge,internalPaths:_e,additionalOptions:!be||f?null:(0,y.jsx)(m.Sc0,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:()=>{t((0,c.A3)()),t((0,c.lA)(!O)),st(!0)},checked:O,sx:{marginLeft:5,"@media (max-width: 600px)":{marginLeft:0,flexDirection:"row"}}}),hidePathButton:!1})}),(0,y.jsx)(Ce,{})]})}),!Y&&(0,y.jsx)(S.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:ge,errorProps:{disabled:!0},children:(0,y.jsxs)(R,{open:E,closePanel:()=>{st(!1)},className:"".concat(_?"hideListOnSmall":""),children:[We.length>0&&(0,y.jsx)(m.Smc,{items:at,title:"Selected Objects:"}),null!==I&&(0,y.jsx)(ue,{internalPaths:I,bucketName:ge,onClosePanel:st,versioningInfo:z,locking:G})]})})]})]}))]})]})};var Re=n(46881),Pe=n(89563),Ue=n(82817),ze=n(77370),Ge=n(70503);const Me=e=>{let{bucketName:t}=e;const n=(0,l.jL)(),a=(0,o.d4)(Te.s$),d=(0,o.d4)(e=>e.objectBrowser.versionsMode),u=(0,o.d4)(e=>e.objectBrowser.versionedFile),h=(0,o.d4)(e=>e.objectBrowser.searchVersions),x=!(null===a||void 0===a||!a.includes("object-browser-only")),p=(0,i.Zp)(),j=(0,Re.A)(t,[r.OV.S3_GET_BUCKET_POLICY,r.OV.S3_PUT_BUCKET_POLICY,r.OV.S3_GET_BUCKET_VERSIONING,r.OV.S3_PUT_BUCKET_VERSIONING,r.OV.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,r.OV.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,r.OV.S3_DELETE_BUCKET,r.OV.S3_GET_BUCKET_NOTIFICATIONS,r.OV.S3_PUT_BUCKET_NOTIFICATIONS,r.OV.S3_GET_REPLICATION_CONFIGURATION,r.OV.S3_PUT_REPLICATION_CONFIGURATION,r.OV.S3_GET_LIFECYCLE_CONFIGURATION,r.OV.S3_PUT_LIFECYCLE_CONFIGURATION,r.OV.ADMIN_GET_BUCKET_QUOTA,r.OV.ADMIN_SET_BUCKET_QUOTA,r.OV.S3_PUT_BUCKET_TAGGING,r.OV.S3_GET_BUCKET_TAGGING,r.OV.S3_LIST_BUCKET_VERSIONS,r.OV.S3_GET_BUCKET_POLICY_STATUS,r.OV.S3_DELETE_BUCKET_POLICY,r.OV.S3_GET_ACTIONS,r.OV.S3_PUT_ACTIONS]),b=(0,y.jsx)(s.Fragment,{children:d?(0,y.jsx)(s.Fragment,{children:(0,y.jsx)(ye.A,{placeholder:"Start typing to filter versions of ".concat(u),onChange:e=>{n((0,c.aj)(e))},value:h})}):(0,y.jsx)(S.R,{scopes:[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET],resource:t,errorProps:{disabled:!0},children:(0,y.jsx)(Ee,{})})});return(0,s.useEffect)(()=>{n((0,w.ph)("object_browser"))},[]),(0,y.jsx)(s.Fragment,{children:x?(0,y.jsxs)(m.xA9,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,y.jsx)(m.xA9,{children:(0,y.jsx)(Pe.A,{marginRight:30,marginTop:10})}),(0,y.jsxs)(m.xA9,{item:!0,xs:!0,sx:{display:"flex",gap:10},children:[b,(0,y.jsx)(ze.A,{})]})]}):(0,y.jsx)(Ue.A,{label:(0,y.jsx)(m.EGL,{label:"Object Browser",onClick:()=>{p(r.zZ.OBJECT_BROWSER_VIEW)}}),actions:(0,y.jsxs)(s.Fragment,{children:[(0,y.jsx)(S.R,{scopes:r.pC[r.ac.BUCKET_ADMIN],resource:t,errorProps:{disabled:!0},children:(0,y.jsx)(V.A,{tooltip:j?"Configure Bucket":"You do not have the required permissions to configure this bucket. Please contact your MinIO administrator to request "+r.ac.BUCKET_ADMIN+" permisions.",children:(0,y.jsx)(m.$nd,{id:"configure-bucket-main",color:"primary","aria-label":"Configure Bucket",onClick:()=>p("/buckets/".concat(t,"/admin")),icon:(0,y.jsx)(m.Zes,{style:{width:20,height:20,marginTop:-3}}),style:{padding:"0 10px"}})})}),(0,y.jsx)(Ge.A,{})]}),middleComponent:b})})},Je=()=>{const e=(0,l.jL)(),t=(0,i.g)(),n=(0,i.zy)(),d=(0,o.d4)(e=>e.objectBrowser.loadingVersioning),u=(0,o.d4)(e=>e.objectBrowser.rewind.rewindEnabled),h=(0,o.d4)(e=>e.objectBrowser.rewind.dateToRewind),m=(0,o.d4)(e=>e.objectBrowser.showDeleted),x=(0,o.d4)(e=>e.objectBrowser.requestInProgress),p=(0,o.d4)(e=>e.objectBrowser.loadingLocking),j=(0,o.d4)(e=>e.objectBrowser.reloadObjectsList),b=(0,o.d4)(e=>e.objectBrowser.simplePath),g=(0,o.d4)(e=>e.system.anonymousMode),f=(0,o.d4)(e=>e.objectBrowser.selectedBucket),v=(0,o.d4)(e=>e.objectBrowser.records),_=t.bucketName||"",S=n.pathname.split("/browser/".concat(encodeURIComponent(_),"/")),O=2===S.length?decodeURIComponent(S[1]):"",w=(0,s.useCallback)(t=>{let n=(new Date).toISOString();null!==h&&u&&(n=h);e({type:"socket/OBRequest",payload:{bucketName:_,path:t,rewindMode:u||m,date:n}})},[_,m,h,u,e]),T=(0,s.useCallback)(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e((0,c.cQ)({status:!1}));let n=O;O.endsWith("/")||""===O||(n="".concat(O.split("/").slice(0,-1).join("/"),"/")),"/"===n&&(n=""),(n!==b||_!==f||t)&&(e((0,c.u)(!0)),w(n))},[O,e,b,f,_,w]);(0,s.useEffect)(()=>()=>{e({type:"socket/OBCancelLast"})},[e]),(0,s.useEffect)(()=>{e((0,c.vn)(!0)),O.endsWith("/")||""===O?(e((0,c.TO)(!1)),e((0,c.A7)(null)),e((0,c.Qy)(!0))):(e((0,c.oe)(!0)),e((0,c.TO)(!0)),e((0,c.SK)(!0)),e((0,c.A7)(O||"")))},[_,O,h,u,e]),(0,s.useEffect)(()=>{T(!1)},[T]),(0,s.useEffect)(()=>{j&&0===v.length&&!x&&T(!0)},[j,v,x,T]);const C=(0,Re.A)(_,[r.OV.S3_LIST_BUCKET,r.OV.S3_ALL_LIST_BUCKET])||g;return(0,s.useEffect)(()=>{d&&!g&&(C?a.F.buckets.getBucketVersioning(_).then(t=>{e((0,c.AP)(t.data)),e((0,c.vn)(!1))}).catch(t=>{console.error("Error Getting Object Versioning Status: ",t.error.detailedMessage),e((0,c.vn)(!1))}):(e((0,c.vn)(!1)),e((0,c.A3)())))},[_,d,e,C,g]),(0,s.useEffect)(()=>{p&&(C?a.F.buckets.getBucketObjectLockingStatus(_).then(t=>{e((0,c.xW)(t.data.object_locking_enabled)),e((0,c.Qy)(!1))}).catch(t=>{console.error("Error Getting Object Locking Status: ",t.error.detailedMessage),e((0,c.Qy)(!1))}):(e((0,c.A3)()),e((0,c.Qy)(!1))))},[_,p,e,C]),(0,y.jsxs)(s.Fragment,{children:[!g&&(0,y.jsx)(Me,{bucketName:_}),(0,y.jsx)(De,{})]})}}}]);